import{r as fs,g as jr,c as rt}from"./react-C6vDfoWu.js";import{r as cs}from"./react-dom-C_ShZe-J.js";var L=fs();const re=jr(L);var Ye={},Nn;function vs(){if(Nn)return Ye;Nn=1,Object.defineProperty(Ye,"__esModule",{value:!0});for(var e=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),r={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},t={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:e?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},n={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},a=1;a<20;a++)n["f"+a]=111+a;function u(d,D,m){D&&!("byKey"in D)&&(m=D,D=null),Array.isArray(d)||(d=[d]);var h=d.map(function(b){return f(b,D)}),o=function(w){return h.some(function(O){return l(O,w)})},E=m==null?o:o(m);return E}function s(d,D){return u(d,D)}function i(d,D){return u(d,{byKey:!0},D)}function f(d,D){var m=D&&D.byKey,h={};d=d.replace("++","+add");var o=d.split("+"),E=o.length;for(var b in r)h[r[b]]=!1;var w=!0,O=!1,j=void 0;try{for(var G=o[Symbol.iterator](),$;!(w=($=G.next()).done);w=!0){var q=$.value,H=q.endsWith("?")&&q.length>1;H&&(q=q.slice(0,-1));var z=g(q),M=r[z];if(q.length>1&&!M&&!t[q]&&!n[z])throw new TypeError('Unknown modifier: "'+q+'"');(E===1||!M)&&(m?h.key=z:h.which=c(q)),M&&(h[M]=H?null:!0)}}catch(F){O=!0,j=F}finally{try{!w&&G.return&&G.return()}finally{if(O)throw j}}return h}function l(d,D){for(var m in d){var h=d[m],o=void 0;if(h!=null&&(m==="key"&&D.key!=null?o=D.key.toLowerCase():m==="which"?o=h===91&&D.which===93?91:D.which:o=D[m],!(o==null&&h===!1)&&o!==h))return!1}return!0}function c(d){d=g(d);var D=n[d]||d.toUpperCase().charCodeAt(0);return D}function g(d){return d=d.toLowerCase(),d=t[d]||d,d}return Ye.default=u,Ye.isHotkey=u,Ye.isCodeHotkey=s,Ye.isKeyHotkey=i,Ye.parseHotkey=f,Ye.compareHotkey=l,Ye.toKeyCode=c,Ye.toKeyName=g,Ye}var ft=vs();const Sc=jr(ft);var Mt,Mn;function ds(){if(Mn)return Mt;Mn=1,Mt=a;var e="֑-߿יִ-﷽ﹰ-ﻼ",r="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",t=new RegExp("^[^"+r+"]*["+e+"]"),n=new RegExp("^[^"+e+"]*["+r+"]");function a(u){return u=String(u||""),t.test(u)?"rtl":n.test(u)?"ltr":"neutral"}return Mt}var gs=ds();const Eu=jr(gs);var It,In;function En(){if(In)return It;In=1;function e(r){var t=typeof r;return r!=null&&(t=="object"||t=="function")}return It=e,It}var kt,kn;function hs(){if(kn)return kt;kn=1;var e=typeof rt=="object"&&rt&&rt.Object===Object&&rt;return kt=e,kt}var Lt,Ln;function bu(){if(Ln)return Lt;Ln=1;var e=hs(),r=typeof self=="object"&&self&&self.Object===Object&&self,t=e||r||Function("return this")();return Lt=t,Lt}var $t,$n;function Ds(){if($n)return $t;$n=1;var e=bu(),r=function(){return e.Date.now()};return $t=r,$t}var zt,zn;function ms(){if(zn)return zt;zn=1;var e=/\s/;function r(t){for(var n=t.length;n--&&e.test(t.charAt(n)););return n}return zt=r,zt}var Wt,Wn;function ps(){if(Wn)return Wt;Wn=1;var e=ms(),r=/^\s+/;function t(n){return n&&n.slice(0,e(n)+1).replace(r,"")}return Wt=t,Wt}var qt,qn;function Au(){if(qn)return qt;qn=1;var e=bu(),r=e.Symbol;return qt=r,qt}var Ht,Hn;function Cs(){if(Hn)return Ht;Hn=1;var e=Au(),r=Object.prototype,t=r.hasOwnProperty,n=r.toString,a=e?e.toStringTag:void 0;function u(s){var i=t.call(s,a),f=s[a];try{s[a]=void 0;var l=!0}catch{}var c=n.call(s);return l&&(i?s[a]=f:delete s[a]),c}return Ht=u,Ht}var Vt,Vn;function Bs(){if(Vn)return Vt;Vn=1;var e=Object.prototype,r=e.toString;function t(n){return r.call(n)}return Vt=t,Vt}var Kt,Kn;function Es(){if(Kn)return Kt;Kn=1;var e=Au(),r=Cs(),t=Bs(),n="[object Null]",a="[object Undefined]",u=e?e.toStringTag:void 0;function s(i){return i==null?i===void 0?a:n:u&&u in Object(i)?r(i):t(i)}return Kt=s,Kt}var Ut,Un;function bs(){if(Un)return Ut;Un=1;function e(r){return r!=null&&typeof r=="object"}return Ut=e,Ut}var Gt,Gn;function As(){if(Gn)return Gt;Gn=1;var e=Es(),r=bs(),t="[object Symbol]";function n(a){return typeof a=="symbol"||r(a)&&e(a)==t}return Gt=n,Gt}var Yt,Yn;function ws(){if(Yn)return Yt;Yn=1;var e=ps(),r=En(),t=As(),n=NaN,a=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,s=/^0o[0-7]+$/i,i=parseInt;function f(l){if(typeof l=="number")return l;if(t(l))return n;if(r(l)){var c=typeof l.valueOf=="function"?l.valueOf():l;l=r(c)?c+"":c}if(typeof l!="string")return l===0?l:+l;l=e(l);var g=u.test(l);return g||s.test(l)?i(l.slice(2),g?2:8):a.test(l)?n:+l}return Yt=f,Yt}var Xt,Xn;function wu(){if(Xn)return Xt;Xn=1;var e=En(),r=Ds(),t=ws(),n="Expected a function",a=Math.max,u=Math.min;function s(i,f,l){var c,g,d,D,m,h,o=0,E=!1,b=!1,w=!0;if(typeof i!="function")throw new TypeError(n);f=t(f)||0,e(l)&&(E=!!l.leading,b="maxWait"in l,d=b?a(t(l.maxWait)||0,f):d,w="trailing"in l?!!l.trailing:w);function O(y){var x=c,S=g;return c=g=void 0,o=y,D=i.apply(S,x),D}function j(y){return o=y,m=setTimeout(q,f),E?O(y):D}function G(y){var x=y-h,S=y-o,ne=f-x;return b?u(ne,d-S):ne}function $(y){var x=y-h,S=y-o;return h===void 0||x>=f||x<0||b&&S>=d}function q(){var y=r();if($(y))return H(y);m=setTimeout(q,G(y))}function H(y){return m=void 0,w&&c?O(y):(c=g=void 0,D)}function z(){m!==void 0&&clearTimeout(m),o=0,c=h=g=m=void 0}function M(){return m===void 0?D:H(r())}function F(){var y=r(),x=$(y);if(c=arguments,g=this,h=y,x){if(m===void 0)return j(h);if(b)return clearTimeout(m),m=setTimeout(q,f),O(h)}return m===void 0&&(m=setTimeout(q,f)),D}return F.cancel=z,F.flush=M,F}return Xt=s,Xt}var Fs=wu();const ys=jr(Fs);var Jt,Jn;function Os(){if(Jn)return Jt;Jn=1;var e=wu(),r=En(),t="Expected a function";function n(a,u,s){var i=!0,f=!0;if(typeof a!="function")throw new TypeError(t);return r(s)&&(i="leading"in s?!!s.leading:i,f="trailing"in s?!!s.trailing:f),e(a,u,{leading:i,maxWait:u,trailing:f})}return Jt=n,Jt}var xs=Os();const Ps=jr(xs),Zn=e=>typeof e=="object"&&e!=null&&e.nodeType===1,Qn=(e,r)=>(!r||e!=="hidden")&&e!=="visible"&&e!=="clip",Zt=(e,r)=>{if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){const t=getComputedStyle(e,null);return Qn(t.overflowY,r)||Qn(t.overflowX,r)||(n=>{const a=(u=>{if(!u.ownerDocument||!u.ownerDocument.defaultView)return null;try{return u.ownerDocument.defaultView.frameElement}catch{return null}})(n);return!!a&&(a.clientHeight<n.scrollHeight||a.clientWidth<n.scrollWidth)})(e)}return!1},tt=(e,r,t,n,a,u,s,i)=>u<e&&s>r||u>e&&s<r?0:u<=e&&i<=t||s>=r&&i>=t?u-e-n:s>r&&i<t||u<e&&i>t?s-r+a:0,Ss=e=>{const r=e.parentElement;return r??(e.getRootNode().host||null)},_n=(e,r)=>{var t,n,a,u;if(typeof document>"u")return[];const{scrollMode:s,block:i,inline:f,boundary:l,skipOverflowHiddenElements:c}=r,g=typeof l=="function"?l:ne=>ne!==l;if(!Zn(e))throw new TypeError("Invalid target");const d=document.scrollingElement||document.documentElement,D=[];let m=e;for(;Zn(m)&&g(m);){if(m=Ss(m),m===d){D.push(m);break}m!=null&&m===document.body&&Zt(m)&&!Zt(document.documentElement)||m!=null&&Zt(m,c)&&D.push(m)}const h=(n=(t=window.visualViewport)==null?void 0:t.width)!=null?n:innerWidth,o=(u=(a=window.visualViewport)==null?void 0:a.height)!=null?u:innerHeight,{scrollX:E,scrollY:b}=window,{height:w,width:O,top:j,right:G,bottom:$,left:q}=e.getBoundingClientRect(),{top:H,right:z,bottom:M,left:F}=(ne=>{const K=window.getComputedStyle(ne);return{top:parseFloat(K.scrollMarginTop)||0,right:parseFloat(K.scrollMarginRight)||0,bottom:parseFloat(K.scrollMarginBottom)||0,left:parseFloat(K.scrollMarginLeft)||0}})(e);let y=i==="start"||i==="nearest"?j-H:i==="end"?$+M:j+w/2-H+M,x=f==="center"?q+O/2-F+z:f==="end"?G+z:q-F;const S=[];for(let ne=0;ne<D.length;ne++){const K=D[ne],{height:ge,width:Q,top:se,right:me,bottom:le,left:ae}=K.getBoundingClientRect();if(s==="if-needed"&&j>=0&&q>=0&&$<=o&&G<=h&&j>=se&&$<=le&&q>=ae&&G<=me)return S;const Se=getComputedStyle(K),J=parseInt(Se.borderLeftWidth,10),C=parseInt(Se.borderTopWidth,10),k=parseInt(Se.borderRightWidth,10),T=parseInt(Se.borderBottomWidth,10);let R=0,ue=0;const X="offsetWidth"in K?K.offsetWidth-K.clientWidth-J-k:0,Be="offsetHeight"in K?K.offsetHeight-K.clientHeight-C-T:0,ce="offsetWidth"in K?K.offsetWidth===0?0:Q/K.offsetWidth:0,_="offsetHeight"in K?K.offsetHeight===0?0:ge/K.offsetHeight:0;if(d===K)R=i==="start"?y:i==="end"?y-o:i==="nearest"?tt(b,b+o,o,C,T,b+y,b+y+w,w):y-o/2,ue=f==="start"?x:f==="center"?x-h/2:f==="end"?x-h:tt(E,E+h,h,J,k,E+x,E+x+O,O),R=Math.max(0,R+b),ue=Math.max(0,ue+E);else{R=i==="start"?y-se-C:i==="end"?y-le+T+Be:i==="nearest"?tt(se,le,ge,C,T+Be,y,y+w,w):y-(se+ge/2)+Be/2,ue=f==="start"?x-ae-J:f==="center"?x-(ae+Q/2)+X/2:f==="end"?x-me+k+X:tt(ae,me,Q,J,k+X,x,x+O,O);const{scrollLeft:Ee,scrollTop:be}=K;R=_===0?0:Math.max(0,Math.min(be+R/_,K.scrollHeight-ge/_+Be)),ue=ce===0?0:Math.max(0,Math.min(Ee+ue/ce,K.scrollWidth-Q/ce+X)),y+=be-R,x+=Ee-ue}S.push({el:K,top:R,left:ue})}return S},Ts=e=>e===!1?{block:"end",inline:"nearest"}:(r=>r===Object(r)&&Object.keys(r).length!==0)(e)?e:{block:"start",inline:"nearest"};function Rs(e,r){if(!e.isConnected||!(a=>{let u=a;for(;u&&u.parentNode;){if(u.parentNode===document)return!0;u=u.parentNode instanceof ShadowRoot?u.parentNode.host:u.parentNode}return!1})(e))return;const t=(a=>{const u=window.getComputedStyle(a);return{top:parseFloat(u.scrollMarginTop)||0,right:parseFloat(u.scrollMarginRight)||0,bottom:parseFloat(u.scrollMarginBottom)||0,left:parseFloat(u.scrollMarginLeft)||0}})(e);if((a=>typeof a=="object"&&typeof a.behavior=="function")(r))return r.behavior(_n(e,r));const n=typeof r=="boolean"||r==null?void 0:r.behavior;for(const{el:a,top:u,left:s}of _n(e,Ts(r))){const i=u-t.top+t.bottom,f=s-t.left+t.right;a.scroll({top:i,left:f,behavior:n})}}/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function ea(e){return Object.prototype.toString.call(e)==="[object Object]"}function de(e){var r,t;return ea(e)===!1?!1:(r=e.constructor,r===void 0?!0:(t=r.prototype,!(ea(t)===!1||t.hasOwnProperty("isPrototypeOf")===!1)))}var Fu=Symbol.for("immer-nothing"),ra=Symbol.for("immer-draftable"),Ke=Symbol.for("immer-state");function Xe(e,...r){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Tr=Object.getPrototypeOf;function dr(e){return!!e&&!!e[Ke]}function wr(e){var r;return e?yu(e)||Array.isArray(e)||!!e[ra]||!!((r=e.constructor)!=null&&r[ra])||Ft(e)||yt(e):!1}var js=Object.prototype.constructor.toString();function yu(e){if(!e||typeof e!="object")return!1;const r=Tr(e);if(r===null)return!0;const t=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return t===Object?!0:typeof t=="function"&&Function.toString.call(t)===js}function ht(e,r){wt(e)===0?Reflect.ownKeys(e).forEach(t=>{r(t,e[t],e)}):e.forEach((t,n)=>r(n,t,e))}function wt(e){const r=e[Ke];return r?r.type_:Array.isArray(e)?1:Ft(e)?2:yt(e)?3:0}function sn(e,r){return wt(e)===2?e.has(r):Object.prototype.hasOwnProperty.call(e,r)}function Ou(e,r,t){const n=wt(e);n===2?e.set(r,t):n===3?e.add(t):e[r]=t}function Ns(e,r){return e===r?e!==0||1/e===1/r:e!==e&&r!==r}function Ft(e){return e instanceof Map}function yt(e){return e instanceof Set}function pr(e){return e.copy_||e.base_}function on(e,r){if(Ft(e))return new Map(e);if(yt(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const t=yu(e);if(r===!0||r==="class_only"&&!t){const n=Object.getOwnPropertyDescriptors(e);delete n[Ke];let a=Reflect.ownKeys(n);for(let u=0;u<a.length;u++){const s=a[u],i=n[s];i.writable===!1&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(n[s]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[s]})}return Object.create(Tr(e),n)}else{const n=Tr(e);if(n!==null&&t)return{...e};const a=Object.create(n);return Object.assign(a,e)}}function bn(e,r=!1){return Ot(e)||dr(e)||!wr(e)||(wt(e)>1&&(e.set=e.add=e.clear=e.delete=Ms),Object.freeze(e),r&&Object.entries(e).forEach(([t,n])=>bn(n,!0))),e}function Ms(){Xe(2)}function Ot(e){return Object.isFrozen(e)}var Is={};function Fr(e){const r=Is[e];return r||Xe(0,e),r}var Kr;function xu(){return Kr}function ks(e,r){return{drafts_:[],parent_:e,immer_:r,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function ta(e,r){r&&(Fr("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=r)}function ln(e){fn(e),e.drafts_.forEach(Ls),e.drafts_=null}function fn(e){e===Kr&&(Kr=e.parent_)}function na(e){return Kr=ks(Kr,e)}function Ls(e){const r=e[Ke];r.type_===0||r.type_===1?r.revoke_():r.revoked_=!0}function aa(e,r){r.unfinalizedDrafts_=r.drafts_.length;const t=r.drafts_[0];return e!==void 0&&e!==t?(t[Ke].modified_&&(ln(r),Xe(4)),wr(e)&&(e=Dt(r,e),r.parent_||mt(r,e)),r.patches_&&Fr("Patches").generateReplacementPatches_(t[Ke].base_,e,r.patches_,r.inversePatches_)):e=Dt(r,t,[]),ln(r),r.patches_&&r.patchListener_(r.patches_,r.inversePatches_),e!==Fu?e:void 0}function Dt(e,r,t){if(Ot(r))return r;const n=r[Ke];if(!n)return ht(r,(a,u)=>ua(e,n,r,a,u,t)),r;if(n.scope_!==e)return r;if(!n.modified_)return mt(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const a=n.copy_;let u=a,s=!1;n.type_===3&&(u=new Set(a),a.clear(),s=!0),ht(u,(i,f)=>ua(e,n,a,i,f,t,s)),mt(e,a,!1),t&&e.patches_&&Fr("Patches").generatePatches_(n,t,e.patches_,e.inversePatches_)}return n.copy_}function ua(e,r,t,n,a,u,s){if(dr(a)){const i=u&&r&&r.type_!==3&&!sn(r.assigned_,n)?u.concat(n):void 0,f=Dt(e,a,i);if(Ou(t,n,f),dr(f))e.canAutoFreeze_=!1;else return}else s&&t.add(a);if(wr(a)&&!Ot(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Dt(e,a),(!r||!r.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(t,n)&&mt(e,a)}}function mt(e,r,t=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&bn(r,t)}function $s(e,r){const t=Array.isArray(e),n={type_:t?1:0,scope_:r?r.scope_:xu(),modified_:!1,finalized_:!1,assigned_:{},parent_:r,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,u=An;t&&(a=[n],u=Ur);const{revoke:s,proxy:i}=Proxy.revocable(a,u);return n.draft_=i,n.revoke_=s,i}var An={get(e,r){if(r===Ke)return e;const t=pr(e);if(!sn(t,r))return zs(e,t,r);const n=t[r];return e.finalized_||!wr(n)?n:n===Qt(e.base_,r)?(_t(e),e.copy_[r]=vn(n,e)):n},has(e,r){return r in pr(e)},ownKeys(e){return Reflect.ownKeys(pr(e))},set(e,r,t){const n=Pu(pr(e),r);if(n!=null&&n.set)return n.set.call(e.draft_,t),!0;if(!e.modified_){const a=Qt(pr(e),r),u=a==null?void 0:a[Ke];if(u&&u.base_===t)return e.copy_[r]=t,e.assigned_[r]=!1,!0;if(Ns(t,a)&&(t!==void 0||sn(e.base_,r)))return!0;_t(e),cn(e)}return e.copy_[r]===t&&(t!==void 0||r in e.copy_)||Number.isNaN(t)&&Number.isNaN(e.copy_[r])||(e.copy_[r]=t,e.assigned_[r]=!0),!0},deleteProperty(e,r){return Qt(e.base_,r)!==void 0||r in e.base_?(e.assigned_[r]=!1,_t(e),cn(e)):delete e.assigned_[r],e.copy_&&delete e.copy_[r],!0},getOwnPropertyDescriptor(e,r){const t=pr(e),n=Reflect.getOwnPropertyDescriptor(t,r);return n&&{writable:!0,configurable:e.type_!==1||r!=="length",enumerable:n.enumerable,value:t[r]}},defineProperty(){Xe(11)},getPrototypeOf(e){return Tr(e.base_)},setPrototypeOf(){Xe(12)}},Ur={};ht(An,(e,r)=>{Ur[e]=function(){return arguments[0]=arguments[0][0],r.apply(this,arguments)}});Ur.deleteProperty=function(e,r){return Ur.set.call(this,e,r,void 0)};Ur.set=function(e,r,t){return An.set.call(this,e[0],r,t,e[0])};function Qt(e,r){const t=e[Ke];return(t?pr(t):e)[r]}function zs(e,r,t){var a;const n=Pu(r,t);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(e.draft_):void 0}function Pu(e,r){if(!(r in e))return;let t=Tr(e);for(;t;){const n=Object.getOwnPropertyDescriptor(t,r);if(n)return n;t=Tr(t)}}function cn(e){e.modified_||(e.modified_=!0,e.parent_&&cn(e.parent_))}function _t(e){e.copy_||(e.copy_=on(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Ws=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(r,t,n)=>{if(typeof r=="function"&&typeof t!="function"){const u=t;t=r;const s=this;return function(f=u,...l){return s.produce(f,c=>t.call(this,c,...l))}}typeof t!="function"&&Xe(6),n!==void 0&&typeof n!="function"&&Xe(7);let a;if(wr(r)){const u=na(this),s=vn(r,void 0);let i=!0;try{a=t(s),i=!1}finally{i?ln(u):fn(u)}return ta(u,n),aa(a,u)}else if(!r||typeof r!="object"){if(a=t(r),a===void 0&&(a=r),a===Fu&&(a=void 0),this.autoFreeze_&&bn(a,!0),n){const u=[],s=[];Fr("Patches").generateReplacementPatches_(r,a,u,s),n(u,s)}return a}else Xe(1,r)},this.produceWithPatches=(r,t)=>{if(typeof r=="function")return(s,...i)=>this.produceWithPatches(s,f=>r(f,...i));let n,a;return[this.produce(r,t,(s,i)=>{n=s,a=i}),n,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){wr(e)||Xe(8),dr(e)&&(e=qs(e));const r=na(this),t=vn(e,void 0);return t[Ke].isManual_=!0,fn(r),t}finishDraft(e,r){const t=e&&e[Ke];(!t||!t.isManual_)&&Xe(9);const{scope_:n}=t;return ta(n,r),aa(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,r){let t;for(t=r.length-1;t>=0;t--){const a=r[t];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}t>-1&&(r=r.slice(t+1));const n=Fr("Patches").applyPatches_;return dr(e)?n(e,r):this.produce(e,a=>n(a,r))}};function vn(e,r){const t=Ft(e)?Fr("MapSet").proxyMap_(e,r):yt(e)?Fr("MapSet").proxySet_(e,r):$s(e,r);return(r?r.scope_:xu()).drafts_.push(t),t}function qs(e){return dr(e)||Xe(10,e),Su(e)}function Su(e){if(!wr(e)||Ot(e))return e;const r=e[Ke];let t;if(r){if(!r.modified_)return r.base_;r.finalized_=!0,t=on(e,r.scope_.immer_.useStrictShallowCopy_)}else t=on(e,!0);return ht(t,(n,a)=>{Ou(t,n,Su(a))}),r&&(r.finalized_=!1),t}var Ue=new Ws,Nr=Ue.produce;Ue.produceWithPatches.bind(Ue);Ue.setAutoFreeze.bind(Ue);Ue.setUseStrictShallowCopy.bind(Ue);Ue.applyPatches.bind(Ue);var pt=Ue.createDraft.bind(Ue),Ct=Ue.finishDraft.bind(Ue),A={ancestors(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:t=!1}=r,n=A.levels(e,r);return t?n=n.slice(1):n=n.slice(0,-1),n},common(e,r){for(var t=[],n=0;n<e.length&&n<r.length;n++){var a=e[n],u=r[n];if(a!==u)break;t.push(a)}return t},compare(e,r){for(var t=Math.min(e.length,r.length),n=0;n<t;n++){if(e[n]<r[n])return-1;if(e[n]>r[n])return 1}return 0},endsAfter(e,r){var t=e.length-1,n=e.slice(0,t),a=r.slice(0,t),u=e[t],s=r[t];return A.equals(n,a)&&u>s},endsAt(e,r){var t=e.length,n=e.slice(0,t),a=r.slice(0,t);return A.equals(n,a)},endsBefore(e,r){var t=e.length-1,n=e.slice(0,t),a=r.slice(0,t),u=e[t],s=r[t];return A.equals(n,a)&&u<s},equals(e,r){return e.length===r.length&&e.every((t,n)=>t===r[n])},hasPrevious(e){return e[e.length-1]>0},isAfter(e,r){return A.compare(e,r)===1},isAncestor(e,r){return e.length<r.length&&A.compare(e,r)===0},isBefore(e,r){return A.compare(e,r)===-1},isChild(e,r){return e.length===r.length+1&&A.compare(e,r)===0},isCommon(e,r){return e.length<=r.length&&A.compare(e,r)===0},isDescendant(e,r){return e.length>r.length&&A.compare(e,r)===0},isParent(e,r){return e.length+1===r.length&&A.compare(e,r)===0},isPath(e){return Array.isArray(e)&&(e.length===0||typeof e[0]=="number")},isSibling(e,r){if(e.length!==r.length)return!1;var t=e.slice(0,-1),n=r.slice(0,-1),a=e[e.length-1],u=r[r.length-1];return a!==u&&A.equals(t,n)},levels(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:t=!1}=r,n=[],a=0;a<=e.length;a++)n.push(e.slice(0,a));return t&&n.reverse(),n},next(e){if(e.length===0)throw new Error("Cannot get the next path of a root path [".concat(e,"], because it has no next index."));var r=e[e.length-1];return e.slice(0,-1).concat(r+1)},operationCanTransformPath(e){switch(e.type){case"insert_node":case"remove_node":case"merge_node":case"split_node":case"move_node":return!0;default:return!1}},parent(e){if(e.length===0)throw new Error("Cannot get the parent path of the root path [".concat(e,"]."));return e.slice(0,-1)},previous(e){if(e.length===0)throw new Error("Cannot get the previous path of a root path [".concat(e,"], because it has no previous index."));var r=e[e.length-1];if(r<=0)throw new Error("Cannot get the previous path of a first child path [".concat(e,"] because it would result in a negative index."));return e.slice(0,-1).concat(r-1)},relative(e,r){if(!A.isAncestor(r,e)&&!A.equals(e,r))throw new Error("Cannot get the relative path of [".concat(e,"] inside ancestor [").concat(r,"], because it is not above or equal to the path."));return e.slice(r.length)},transform(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return null;var n=[...e],{affinity:a="forward"}=t;if(e.length===0)return n;switch(r.type){case"insert_node":{var{path:u}=r;(A.equals(u,n)||A.endsBefore(u,n)||A.isAncestor(u,n))&&(n[u.length-1]+=1);break}case"remove_node":{var{path:s}=r;if(A.equals(s,n)||A.isAncestor(s,n))return null;A.endsBefore(s,n)&&(n[s.length-1]-=1);break}case"merge_node":{var{path:i,position:f}=r;A.equals(i,n)||A.endsBefore(i,n)?n[i.length-1]-=1:A.isAncestor(i,n)&&(n[i.length-1]-=1,n[i.length]+=f);break}case"split_node":{var{path:l,position:c}=r;if(A.equals(l,n)){if(a==="forward")n[n.length-1]+=1;else if(a!=="backward")return null}else A.endsBefore(l,n)?n[l.length-1]+=1:A.isAncestor(l,n)&&e[l.length]>=c&&(n[l.length-1]+=1,n[l.length]-=c);break}case"move_node":{var{path:g,newPath:d}=r;if(A.equals(g,d))return n;if(A.isAncestor(g,n)||A.equals(g,n)){var D=d.slice();return A.endsBefore(g,d)&&g.length<d.length&&(D[g.length-1]-=1),D.concat(n.slice(g.length))}else A.isSibling(g,d)&&(A.isAncestor(d,n)||A.equals(d,n))?A.endsBefore(g,n)?n[g.length-1]-=1:n[g.length-1]+=1:A.endsBefore(d,n)||A.equals(d,n)||A.isAncestor(d,n)?(A.endsBefore(g,n)&&(n[g.length-1]-=1),n[d.length-1]+=1):A.endsBefore(g,n)&&(A.equals(d,n)&&(n[d.length-1]+=1),n[g.length-1]-=1);break}}return n}};function Gr(e){"@babel/helpers - typeof";return Gr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Gr(e)}function Hs(e,r){if(Gr(e)!=="object"||e===null)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var n=t.call(e,r||"default");if(Gr(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Vs(e){var r=Hs(e,"string");return Gr(r)==="symbol"?r:String(r)}function Mr(e,r,t){return r=Vs(r),r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function sa(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Lr(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?sa(Object(t),!0).forEach(function(n){Mr(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):sa(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var Ks=(e,r,t)=>{switch(t.type){case"insert_node":{var{path:n,node:a}=t,u=U.parent(e,n),s=n[n.length-1];if(s>u.children.length)throw new Error('Cannot apply an "insert_node" operation at path ['.concat(n,"] because the destination is past the end of the node."));if(u.children.splice(s,0,a),r)for(var[i,f]of N.points(r))r[f]=pe.transform(i,t);break}case"insert_text":{var{path:l,offset:c,text:g}=t;if(g.length===0)break;var d=U.leaf(e,l),D=d.text.slice(0,c),m=d.text.slice(c);if(d.text=D+g+m,r)for(var[h,o]of N.points(r))r[o]=pe.transform(h,t);break}case"merge_node":{var{path:E}=t,b=U.get(e,E),w=A.previous(E),O=U.get(e,w),j=U.parent(e,E),G=E[E.length-1];if(De.isText(b)&&De.isText(O))O.text+=b.text;else if(!De.isText(b)&&!De.isText(O))O.children.push(...b.children);else throw new Error('Cannot apply a "merge_node" operation at path ['.concat(E,"] to nodes of different interfaces: ").concat(ke.stringify(b)," ").concat(ke.stringify(O)));if(j.children.splice(G,1),r)for(var[$,q]of N.points(r))r[q]=pe.transform($,t);break}case"move_node":{var{path:H,newPath:z}=t;if(A.isAncestor(H,z))throw new Error("Cannot move a path [".concat(H,"] to new path [").concat(z,"] because the destination is inside itself."));var M=U.get(e,H),F=U.parent(e,H),y=H[H.length-1];F.children.splice(y,1);var x=A.transform(H,t),S=U.get(e,A.parent(x)),ne=x[x.length-1];if(S.children.splice(ne,0,M),r)for(var[K,ge]of N.points(r))r[ge]=pe.transform(K,t);break}case"remove_node":{var{path:Q}=t,se=Q[Q.length-1],me=U.parent(e,Q);if(me.children.splice(se,1),r)for(var[le,ae]of N.points(r)){var Se=pe.transform(le,t);if(r!=null&&Se!=null)r[ae]=Se;else{var J=void 0,C=void 0;for(var[k,T]of U.texts(e))if(A.compare(T,Q)===-1)J=[k,T];else{C=[k,T];break}var R=!1;J&&C&&(A.equals(C[1],Q)?R=!A.hasPrevious(C[1]):R=A.common(J[1],Q).length<A.common(C[1],Q).length),J&&!R?(le.path=J[1],le.offset=J[0].text.length):C?(le.path=C[1],le.offset=0):r=null}}break}case"remove_text":{var{path:ue,offset:X,text:Be}=t;if(Be.length===0)break;var ce=U.leaf(e,ue),_=ce.text.slice(0,X),Ee=ce.text.slice(X+Be.length);if(ce.text=_+Ee,r)for(var[be,Oe]of N.points(r))r[Oe]=pe.transform(be,t);break}case"set_node":{var{path:Ce,properties:je,newProperties:Re}=t;if(Ce.length===0)throw new Error("Cannot set properties on the root node!");var ze=U.get(e,Ce);for(var ve in Re){if(ve==="children"||ve==="text")throw new Error('Cannot set the "'.concat(ve,'" property of nodes!'));var We=Re[ve];We==null?delete ze[ve]:ze[ve]=We}for(var qe in je)Re.hasOwnProperty(qe)||delete ze[qe];break}case"set_selection":{var{newProperties:oe}=t;if(oe==null)r=oe;else{if(r==null){if(!N.isRange(oe))throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(ke.stringify(oe)," when there is no current selection."));r=Lr({},oe)}for(var he in oe){var Ze=oe[he];if(Ze==null){if(he==="anchor"||he==="focus")throw new Error('Cannot remove the "'.concat(he,'" selection property'));delete r[he]}else r[he]=Ze}}break}case"split_node":{var{path:Pe,position:Me,properties:Qe}=t;if(Pe.length===0)throw new Error('Cannot apply a "split_node" operation at path ['.concat(Pe,"] because the root node cannot be split."));var Ne=U.get(e,Pe),kr=U.parent(e,Pe),Dr=Pe[Pe.length-1],_e;if(De.isText(Ne)){var Pt=Ne.text.slice(0,Me),St=Ne.text.slice(Me);Ne.text=Pt,_e=Lr(Lr({},Qe),{},{text:St})}else{var Tt=Ne.children.slice(0,Me),Rt=Ne.children.slice(Me);Ne.children=Tt,_e=Lr(Lr({},Qe),{},{children:Rt})}if(kr.children.splice(Dr+1,0,_e),r)for(var[jt,Nt]of N.points(r))r[Nt]=pe.transform(jt,t);break}}return r},Us={transform(e,r){e.children=pt(e.children);var t=e.selection&&pt(e.selection);try{t=Ks(e,t,r)}finally{e.children=Ct(e.children),t?e.selection=dr(t)?Ct(t):t:e.selection=null}}},Gs={insertNodes(e,r,t){e.insertNodes(r,t)},liftNodes(e,r){e.liftNodes(r)},mergeNodes(e,r){e.mergeNodes(r)},moveNodes(e,r){e.moveNodes(r)},removeNodes(e,r){e.removeNodes(r)},setNodes(e,r,t){e.setNodes(r,t)},splitNodes(e,r){e.splitNodes(r)},unsetNodes(e,r,t){e.unsetNodes(r,t)},unwrapNodes(e,r){e.unwrapNodes(r)},wrapNodes(e,r,t){e.wrapNodes(r,t)}},Ys={collapse(e,r){e.collapse(r)},deselect(e){e.deselect()},move(e,r){e.move(r)},select(e,r){e.select(r)},setPoint(e,r,t){e.setPoint(r,t)},setSelection(e,r){e.setSelection(r)}},Tu=(e,r)=>{for(var t in e){var n=e[t],a=r[t];if(de(n)&&de(a)){if(!Tu(n,a))return!1}else if(Array.isArray(n)&&Array.isArray(a)){if(n.length!==a.length)return!1;for(var u=0;u<n.length;u++)if(n[u]!==a[u])return!1}else if(n!==a)return!1}for(var s in r)if(e[s]===void 0&&r[s]!==void 0)return!1;return!0};function Xs(e,r){if(e==null)return{};var t={},n=Object.keys(e),a,u;for(u=0;u<n.length;u++)a=n[u],!(r.indexOf(a)>=0)&&(t[a]=e[a]);return t}function Yr(e,r){if(e==null)return{};var t=Xs(e,r),n,a;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(a=0;a<u.length;a++)n=u[a],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(t[n]=e[n])}return t}var Js=["anchor","focus"];function ia(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Zs(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?ia(Object(t),!0).forEach(function(n){Mr(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ia(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var N={edges(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:t=!1}=r,{anchor:n,focus:a}=e;return N.isBackward(e)===t?[n,a]:[a,n]},end(e){var[,r]=N.edges(e);return r},equals(e,r){return pe.equals(e.anchor,r.anchor)&&pe.equals(e.focus,r.focus)},surrounds(e,r){var t=N.intersection(e,r);return t?N.equals(t,r):!1},includes(e,r){if(N.isRange(r)){if(N.includes(e,r.anchor)||N.includes(e,r.focus))return!0;var[t,n]=N.edges(e),[a,u]=N.edges(r);return pe.isBefore(t,a)&&pe.isAfter(n,u)}var[s,i]=N.edges(e),f=!1,l=!1;return pe.isPoint(r)?(f=pe.compare(r,s)>=0,l=pe.compare(r,i)<=0):(f=A.compare(r,s.path)>=0,l=A.compare(r,i.path)<=0),f&&l},intersection(e,r){var t=Yr(e,Js),[n,a]=N.edges(e),[u,s]=N.edges(r),i=pe.isBefore(n,u)?u:n,f=pe.isBefore(a,s)?a:s;return pe.isBefore(f,i)?null:Zs({anchor:i,focus:f},t)},isBackward(e){var{anchor:r,focus:t}=e;return pe.isAfter(r,t)},isCollapsed(e){var{anchor:r,focus:t}=e;return pe.equals(r,t)},isExpanded(e){return!N.isCollapsed(e)},isForward(e){return!N.isBackward(e)},isRange(e){return de(e)&&pe.isPoint(e.anchor)&&pe.isPoint(e.focus)},*points(e){yield[e.anchor,"anchor"],yield[e.focus,"focus"]},start(e){var[r]=N.edges(e);return r},transform(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Nr(e,n=>{if(n===null)return null;var{affinity:a="inward"}=t,u,s;if(a==="inward"){var i=N.isCollapsed(n);N.isForward(n)?(u="forward",s=i?u:"backward"):(u="backward",s=i?u:"forward")}else a==="outward"?N.isForward(n)?(u="backward",s="forward"):(u="forward",s="backward"):(u=a,s=a);var f=pe.transform(n.anchor,r,{affinity:u}),l=pe.transform(n.focus,r,{affinity:s});if(!f||!l)return null;n.anchor=f,n.focus=l})}},oa=e=>de(e)&&U.isNodeList(e.children)&&!B.isEditor(e),Te={isAncestor(e){return de(e)&&U.isNodeList(e.children)},isElement:oa,isElementList(e){return Array.isArray(e)&&e.every(r=>Te.isElement(r))},isElementProps(e){return e.children!==void 0},isElementType:function(r,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"type";return oa(r)&&r[n]===t},matches(e,r){for(var t in r)if(t!=="children"&&e[t]!==r[t])return!1;return!0}},Qs=["children"],_s=["text"],la=new WeakMap,U={ancestor(e,r){var t=U.get(e,r);if(De.isText(t))throw new Error("Cannot get the ancestor node at path [".concat(r,"] because it refers to a text node instead: ").concat(ke.stringify(t)));return t},ancestors(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var n of A.ancestors(r,t)){var a=U.ancestor(e,n),u=[a,n];yield u}}()},child(e,r){if(De.isText(e))throw new Error("Cannot get the child of a text node: ".concat(ke.stringify(e)));var t=e.children[r];if(t==null)throw new Error("Cannot get child at index `".concat(r,"` in node: ").concat(ke.stringify(e)));return t},children(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var{reverse:n=!1}=t,a=U.ancestor(e,r),{children:u}=a,s=n?u.length-1:0;n?s>=0:s<u.length;){var i=U.child(a,s),f=r.concat(s);yield[i,f],s=n?s-1:s+1}}()},common(e,r,t){var n=A.common(r,t),a=U.get(e,n);return[a,n]},descendant(e,r){var t=U.get(e,r);if(B.isEditor(t))throw new Error("Cannot get the descendant node at path [".concat(r,"] because it refers to the root editor node instead: ").concat(ke.stringify(t)));return t},descendants(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[t,n]of U.nodes(e,r))n.length!==0&&(yield[t,n])}()},elements(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[t,n]of U.nodes(e,r))Te.isElement(t)&&(yield[t,n])}()},extractProps(e){if(Te.isAncestor(e)){var r=Yr(e,Qs);return r}else{var r=Yr(e,_s);return r}},first(e,r){for(var t=r.slice(),n=U.get(e,t);n&&!(De.isText(n)||n.children.length===0);)n=n.children[0],t.push(0);return[n,t]},fragment(e,r){if(De.isText(e))throw new Error("Cannot get a fragment starting from a root text node: ".concat(ke.stringify(e)));var t=Nr({children:e.children},n=>{var[a,u]=N.edges(r),s=U.nodes(n,{reverse:!0,pass:d=>{var[,D]=d;return!N.includes(r,D)}});for(var[,i]of s){if(!N.includes(r,i)){var f=U.parent(n,i),l=i[i.length-1];f.children.splice(l,1)}if(A.equals(i,u.path)){var c=U.leaf(n,i);c.text=c.text.slice(0,u.offset)}if(A.equals(i,a.path)){var g=U.leaf(n,i);g.text=g.text.slice(a.offset)}}B.isEditor(n)&&(n.selection=null)});return t.children},get(e,r){var t=U.getIf(e,r);if(t===void 0)throw new Error("Cannot find a descendant at path [".concat(r,"] in node: ").concat(ke.stringify(e)));return t},getIf(e,r){for(var t=e,n=0;n<r.length;n++){var a=r[n];if(De.isText(t)||!t.children[a])return;t=t.children[a]}return t},has(e,r){for(var t=e,n=0;n<r.length;n++){var a=r[n];if(De.isText(t)||!t.children[a])return!1;t=t.children[a]}return!0},isNode(e){return De.isText(e)||Te.isElement(e)||B.isEditor(e)},isNodeList(e){if(!Array.isArray(e))return!1;var r=la.get(e);if(r!==void 0)return r;var t=e.every(n=>U.isNode(n));return la.set(e,t),t},last(e,r){for(var t=r.slice(),n=U.get(e,t);n&&!(De.isText(n)||n.children.length===0);){var a=n.children.length-1;n=n.children[a],t.push(a)}return[n,t]},leaf(e,r){var t=U.get(e,r);if(!De.isText(t))throw new Error("Cannot get the leaf node at path [".concat(r,"] because it refers to a non-leaf node: ").concat(ke.stringify(t)));return t},levels(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var n of A.levels(r,t)){var a=U.get(e,n);yield[a,n]}}()},matches(e,r){return Te.isElement(e)&&Te.isElementProps(r)&&Te.matches(e,r)||De.isText(e)&&De.isTextProps(r)&&De.matches(e,r)},nodes(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var{pass:t,reverse:n=!1}=r,{from:a=[],to:u}=r,s=new Set,i=[],f=e;!(u&&(n?A.isBefore(i,u):A.isAfter(i,u)));){if(s.has(f)||(yield[f,i]),!s.has(f)&&!De.isText(f)&&f.children.length!==0&&(t==null||t([f,i])===!1)){s.add(f);var l=n?f.children.length-1:0;A.isAncestor(i,a)&&(l=a[i.length]),i=i.concat(l),f=U.get(e,i);continue}if(i.length===0)break;if(!n){var c=A.next(i);if(U.has(e,c)){i=c,f=U.get(e,i);continue}}if(n&&i[i.length-1]!==0){var g=A.previous(i);i=g,f=U.get(e,i);continue}i=A.parent(i),f=U.get(e,i),s.add(f)}}()},parent(e,r){var t=A.parent(r),n=U.get(e,t);if(De.isText(n))throw new Error("Cannot get the parent of path [".concat(r,"] because it does not exist in the root."));return n},string(e){return De.isText(e)?e.text:e.children.map(U.string).join("")},texts(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[t,n]of U.nodes(e,r))De.isText(t)&&(yield[t,n])}()}};function fa(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function we(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?fa(Object(t),!0).forEach(function(n){Mr(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):fa(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var cr={isNodeOperation(e){return cr.isOperation(e)&&e.type.endsWith("_node")},isOperation(e){if(!de(e))return!1;switch(e.type){case"insert_node":return A.isPath(e.path)&&U.isNode(e.node);case"insert_text":return typeof e.offset=="number"&&typeof e.text=="string"&&A.isPath(e.path);case"merge_node":return typeof e.position=="number"&&A.isPath(e.path)&&de(e.properties);case"move_node":return A.isPath(e.path)&&A.isPath(e.newPath);case"remove_node":return A.isPath(e.path)&&U.isNode(e.node);case"remove_text":return typeof e.offset=="number"&&typeof e.text=="string"&&A.isPath(e.path);case"set_node":return A.isPath(e.path)&&de(e.properties)&&de(e.newProperties);case"set_selection":return e.properties===null&&N.isRange(e.newProperties)||e.newProperties===null&&N.isRange(e.properties)||de(e.properties)&&de(e.newProperties);case"split_node":return A.isPath(e.path)&&typeof e.position=="number"&&de(e.properties);default:return!1}},isOperationList(e){return Array.isArray(e)&&e.every(r=>cr.isOperation(r))},isSelectionOperation(e){return cr.isOperation(e)&&e.type.endsWith("_selection")},isTextOperation(e){return cr.isOperation(e)&&e.type.endsWith("_text")},inverse(e){switch(e.type){case"insert_node":return we(we({},e),{},{type:"remove_node"});case"insert_text":return we(we({},e),{},{type:"remove_text"});case"merge_node":return we(we({},e),{},{type:"split_node",path:A.previous(e.path)});case"move_node":{var{newPath:r,path:t}=e;if(A.equals(r,t))return e;if(A.isSibling(t,r))return we(we({},e),{},{path:r,newPath:t});var n=A.transform(t,e),a=A.transform(A.next(t),e);return we(we({},e),{},{path:n,newPath:a})}case"remove_node":return we(we({},e),{},{type:"insert_node"});case"remove_text":return we(we({},e),{},{type:"insert_text"});case"set_node":{var{properties:u,newProperties:s}=e;return we(we({},e),{},{properties:s,newProperties:u})}case"set_selection":{var{properties:i,newProperties:f}=e;return i==null?we(we({},e),{},{properties:f,newProperties:null}):f==null?we(we({},e),{},{properties:null,newProperties:i}):we(we({},e),{},{properties:f,newProperties:i})}case"split_node":return we(we({},e),{},{type:"merge_node",path:A.next(e.path)})}}},ca=new WeakMap,ei=e=>{var r=ca.get(e);if(r!==void 0)return r;if(!de(e))return!1;var t=typeof e.addMark=="function"&&typeof e.apply=="function"&&typeof e.deleteFragment=="function"&&typeof e.insertBreak=="function"&&typeof e.insertSoftBreak=="function"&&typeof e.insertFragment=="function"&&typeof e.insertNode=="function"&&typeof e.insertText=="function"&&typeof e.isElementReadOnly=="function"&&typeof e.isInline=="function"&&typeof e.isSelectable=="function"&&typeof e.isVoid=="function"&&typeof e.normalizeNode=="function"&&typeof e.onChange=="function"&&typeof e.removeMark=="function"&&typeof e.getDirtyPaths=="function"&&(e.marks===null||de(e.marks))&&(e.selection===null||N.isRange(e.selection))&&U.isNodeList(e.children)&&cr.isOperationList(e.operations);return ca.set(e,t),t},B={above(e,r){return e.above(r)},addMark(e,r,t){e.addMark(r,t)},after(e,r,t){return e.after(r,t)},before(e,r,t){return e.before(r,t)},deleteBackward(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:t="character"}=r;e.deleteBackward(t)},deleteForward(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:t="character"}=r;e.deleteForward(t)},deleteFragment(e,r){e.deleteFragment(r)},edges(e,r){return e.edges(r)},elementReadOnly(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.elementReadOnly(r)},end(e,r){return e.end(r)},first(e,r){return e.first(r)},fragment(e,r){return e.fragment(r)},hasBlocks(e,r){return e.hasBlocks(r)},hasInlines(e,r){return e.hasInlines(r)},hasPath(e,r){return e.hasPath(r)},hasTexts(e,r){return e.hasTexts(r)},insertBreak(e){e.insertBreak()},insertFragment(e,r,t){e.insertFragment(r,t)},insertNode(e,r){e.insertNode(r)},insertSoftBreak(e){e.insertSoftBreak()},insertText(e,r){e.insertText(r)},isBlock(e,r){return e.isBlock(r)},isEdge(e,r,t){return e.isEdge(r,t)},isEditor(e){return ei(e)},isElementReadOnly(e,r){return e.isElementReadOnly(r)},isEmpty(e,r){return e.isEmpty(r)},isEnd(e,r,t){return e.isEnd(r,t)},isInline(e,r){return e.isInline(r)},isNormalizing(e){return e.isNormalizing()},isSelectable(e,r){return e.isSelectable(r)},isStart(e,r,t){return e.isStart(r,t)},isVoid(e,r){return e.isVoid(r)},last(e,r){return e.last(r)},leaf(e,r,t){return e.leaf(r,t)},levels(e,r){return e.levels(r)},marks(e){return e.getMarks()},next(e,r){return e.next(r)},node(e,r,t){return e.node(r,t)},nodes(e,r){return e.nodes(r)},normalize(e,r){e.normalize(r)},parent(e,r,t){return e.parent(r,t)},path(e,r,t){return e.path(r,t)},pathRef(e,r,t){return e.pathRef(r,t)},pathRefs(e){return e.pathRefs()},point(e,r,t){return e.point(r,t)},pointRef(e,r,t){return e.pointRef(r,t)},pointRefs(e){return e.pointRefs()},positions(e,r){return e.positions(r)},previous(e,r){return e.previous(r)},range(e,r,t){return e.range(r,t)},rangeRef(e,r,t){return e.rangeRef(r,t)},rangeRefs(e){return e.rangeRefs()},removeMark(e,r){e.removeMark(r)},setNormalizing(e,r){e.setNormalizing(r)},start(e,r){return e.start(r)},string(e,r,t){return e.string(r,t)},unhangRange(e,r,t){return e.unhangRange(r,t)},void(e,r){return e.void(r)},withoutNormalizing(e,r){e.withoutNormalizing(r)},shouldMergeNodesRemovePrevNode:(e,r,t)=>e.shouldMergeNodesRemovePrevNode(r,t)};function va(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function da(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?va(Object(t),!0).forEach(function(n){Mr(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):va(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var pe={compare(e,r){var t=A.compare(e.path,r.path);return t===0?e.offset<r.offset?-1:e.offset>r.offset?1:0:t},isAfter(e,r){return pe.compare(e,r)===1},isBefore(e,r){return pe.compare(e,r)===-1},equals(e,r){return e.offset===r.offset&&A.equals(e.path,r.path)},isPoint(e){return de(e)&&typeof e.offset=="number"&&A.isPath(e.path)},transform(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Nr(e,n=>{if(n===null)return null;var{affinity:a="forward"}=t,{path:u,offset:s}=n;switch(r.type){case"insert_node":case"move_node":{n.path=A.transform(u,r,t);break}case"insert_text":{A.equals(r.path,u)&&(r.offset<s||r.offset===s&&a==="forward")&&(n.offset+=r.text.length);break}case"merge_node":{A.equals(r.path,u)&&(n.offset+=r.position),n.path=A.transform(u,r,t);break}case"remove_text":{A.equals(r.path,u)&&r.offset<=s&&(n.offset-=Math.min(s-r.offset,r.text.length));break}case"remove_node":{if(A.equals(r.path,u)||A.isAncestor(r.path,u))return null;n.path=A.transform(u,r,t);break}case"split_node":{if(A.equals(r.path,u)){if(r.position===s&&a==null)return null;(r.position<s||r.position===s&&a==="forward")&&(n.offset-=r.position,n.path=A.transform(u,r,da(da({},t),{},{affinity:"forward"})))}else n.path=A.transform(u,r,t);break}}})}},ga=void 0,ke={setScrubber(e){ga=e},stringify(e){return JSON.stringify(e,ga)}},ri=["text"],ti=["anchor","focus"];function ha(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function ar(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?ha(Object(t),!0).forEach(function(n){Mr(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ha(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var De={equals(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{loose:n=!1}=t;function a(u){var s=Yr(u,ri);return s}return Tu(n?a(e):e,n?a(r):r)},isText(e){return de(e)&&typeof e.text=="string"},isTextList(e){return Array.isArray(e)&&e.every(r=>De.isText(r))},isTextProps(e){return e.text!==void 0},matches(e,r){for(var t in r)if(t!=="text"&&(!e.hasOwnProperty(t)||e[t]!==r[t]))return!1;return!0},decorations(e,r){var t=[ar({},e)];for(var n of r){var a=Yr(n,ti),[u,s]=N.edges(n),i=[],f=0,l=u.offset,c=s.offset;for(var g of t){var{length:d}=g.text,D=f;if(f+=d,l<=D&&f<=c){Object.assign(g,a),i.push(g);continue}if(l!==c&&(l===f||c===D)||l>f||c<D||c===D&&D!==0){i.push(g);continue}var m=g,h=void 0,o=void 0;if(c<f){var E=c-D;o=ar(ar({},m),{},{text:m.text.slice(E)}),m=ar(ar({},m),{},{text:m.text.slice(0,E)})}if(l>D){var b=l-D;h=ar(ar({},m),{},{text:m.text.slice(0,b)}),m=ar(ar({},m),{},{text:m.text.slice(b)})}Object.assign(m,a),h&&i.push(h),i.push(m),o&&i.push(o)}t=i}return t}},ni=e=>e.selection?e.selection:e.children.length>0?B.end(e,[]):[0],Ae;(function(e){e[e.None=0]="None",e[e.Extend=1]="Extend",e[e.ZWJ=2]="ZWJ",e[e.RI=4]="RI",e[e.Prepend=8]="Prepend",e[e.SpacingMark=16]="SpacingMark",e[e.L=32]="L",e[e.V=64]="V",e[e.T=128]="T",e[e.LV=256]="LV",e[e.LVT=512]="LVT",e[e.ExtPict=1024]="ExtPict",e[e.Any=2048]="Any"})(Ae||(Ae={}));Ae.L,Ae.L|Ae.V|Ae.LV|Ae.LVT,Ae.LV|Ae.V,Ae.V|Ae.T,Ae.LVT|Ae.T,Ae.T,Ae.Any,Ae.Extend|Ae.ZWJ,Ae.Any,Ae.SpacingMark,Ae.Prepend,Ae.Any,Ae.ZWJ,Ae.ExtPict,Ae.RI,Ae.RI;var ai={delete(e,r){e.delete(r)},insertFragment(e,r,t){e.insertFragment(r,t)},insertText(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};B.withoutNormalizing(e,()=>{var{voids:n=!1}=t,{at:a=ni(e)}=t;if(A.isPath(a)&&(a=B.range(e,a)),N.isRange(a))if(N.isCollapsed(a))a=a.anchor;else{var u=N.end(a);if(!n&&B.void(e,{at:u}))return;var s=N.start(a),i=B.pointRef(e,s),f=B.pointRef(e,u);ie.delete(e,{at:a,voids:n});var l=i.unref(),c=f.unref();a=l||c,ie.setSelection(e,{anchor:a,focus:a})}if(!(!n&&B.void(e,{at:a})||B.elementReadOnly(e,{at:a}))){var{path:g,offset:d}=a;r.length>0&&e.apply({type:"insert_text",path:g,offset:d,text:r})}})}};function Da(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function nt(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Da(Object(t),!0).forEach(function(n){Mr(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Da(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var ie=nt(nt(nt(nt({},Us),Gs),Ys),ai),Ru=globalThis.Node,ui=globalThis.Text,wn=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView||null,si=e=>gr(e)&&e.nodeType===8,Ge=e=>gr(e)&&e.nodeType===1,gr=e=>{var r=wn(e);return!!r&&e instanceof r.Node},dn=e=>{var r=e&&e.anchorNode&&wn(e.anchorNode);return!!r&&e instanceof r.Selection},ju=e=>gr(e)&&e.nodeType===3,ii=e=>e.clipboardData&&e.clipboardData.getData("text/plain")!==""&&e.clipboardData.types.length===1,oi=e=>{var[r,t]=e;if(Ge(r)&&r.childNodes.length){var n=t===r.childNodes.length,a=n?t-1:t;for([r,a]=Nu(r,a,n?"backward":"forward"),n=a<t;Ge(r)&&r.childNodes.length;){var u=n?r.childNodes.length-1:0;r=fi(r,u,n?"backward":"forward")}t=n&&r.textContent!=null?r.textContent.length:0}return[r,t]},li=e=>{for(var r=e&&e.parentNode;r;){if(r.toString()==="[object ShadowRoot]")return!0;r=r.parentNode}return!1},Nu=(e,r,t)=>{for(var{childNodes:n}=e,a=n[r],u=r,s=!1,i=!1;(si(a)||Ge(a)&&a.childNodes.length===0||Ge(a)&&a.getAttribute("contenteditable")==="false")&&!(s&&i);){if(u>=n.length){s=!0,u=r-1,t="backward";continue}if(u<0){i=!0,u=r+1,t="forward";continue}a=n[u],r=u,u+=t==="forward"?1:-1}return[a,r]},fi=(e,r,t)=>{var[n]=Nu(e,r,t);return n},Mu=e=>{var r="";if(ju(e)&&e.nodeValue)return e.nodeValue;if(Ge(e)){for(var t of Array.from(e.childNodes))r+=Mu(t);var n=getComputedStyle(e).getPropertyValue("display");(n==="block"||n==="list"||e.tagName==="BR")&&(r+=`
`)}return r},ci=/data-slate-fragment="(.+?)"/m,vi=e=>{var r=e.getData("text/html"),[,t]=r.match(ci)||[];return t},Wr=e=>e.getSelection!=null?e.getSelection():document.getSelection(),Fn=(e,r,t)=>{var{target:n}=r;if(Ge(n)&&n.matches('[contentEditable="false"]'))return!1;var{document:a}=te.getWindow(e);if(a.contains(n))return te.hasDOMNode(e,n,{editable:!0});var u=t.find(s=>{var{addedNodes:i,removedNodes:f}=s;for(var l of i)if(l===n||l.contains(n))return!0;for(var c of f)if(c===n||c.contains(n))return!0});return!u||u===r?!1:Fn(e,u,t)},di=()=>{for(var e=document.activeElement;(r=e)!==null&&r!==void 0&&r.shadowRoot&&(t=e.shadowRoot)!==null&&t!==void 0&&t.activeElement;){var r,t,n;e=(n=e)===null||n===void 0||(n=n.shadowRoot)===null||n===void 0?void 0:n.activeElement}return e},ma=(e,r)=>!!(e.compareDocumentPosition(r)&Ru.DOCUMENT_POSITION_PRECEDING),gi=(e,r)=>!!(e.compareDocumentPosition(r)&Ru.DOCUMENT_POSITION_FOLLOWING),en,rn,Iu=typeof navigator<"u"&&typeof window<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,pa=typeof navigator<"u"&&/Mac OS X/.test(navigator.userAgent),Le=typeof navigator<"u"&&/Android/.test(navigator.userAgent),Or=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),Cr=typeof navigator<"u"&&/AppleWebKit(?!.*Chrome)/i.test(navigator.userAgent),hi=typeof navigator<"u"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),ku=typeof navigator<"u"&&/Chrome/i.test(navigator.userAgent),Di=typeof navigator<"u"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),mi=Le&&typeof navigator<"u"&&/Chrome?\/(?:[0-5]?\d)(?:\.)/i.test(navigator.userAgent),pi=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent),Ci=typeof navigator<"u"&&/.*UCBrowser/.test(navigator.userAgent),Bi=typeof navigator<"u"&&/.*Wechat/.test(navigator.userAgent)&&!/.*MacWechat/.test(navigator.userAgent),ct=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&/Version\/(\d+)/.test(navigator.userAgent)&&((en=navigator.userAgent.match(/Version\/(\d+)/))!==null&&en!==void 0&&en[1]&&parseInt((rn=navigator.userAgent.match(/Version\/(\d+)/))===null||rn===void 0?void 0:rn[1],10)<17);var or=(!Di||!mi)&&!hi&&typeof globalThis<"u"&&globalThis.InputEvent&&typeof globalThis.InputEvent.prototype.getTargetRanges=="function";function Xr(e){"@babel/helpers - typeof";return Xr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Xr(e)}function Ei(e,r){if(Xr(e)!=="object"||e===null)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var n=t.call(e,r||"default");if(Xr(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function bi(e){var r=Ei(e,"string");return Xr(r)==="symbol"?r:String(r)}function Lu(e,r,t){return r=bi(r),r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Ai=0;class wi{constructor(){Lu(this,"id",void 0),this.id="".concat(Ai++)}}var Pr=new WeakMap,yn=new WeakMap,On=new WeakMap,$u=new WeakMap,vt=new WeakMap,gn=new WeakMap,Jr=new WeakMap,Er=new WeakMap,Bt=new WeakMap,xt=new WeakMap,hn=new WeakMap,vr=new WeakMap,Br=new WeakMap,qr=new WeakMap,Dn=new WeakMap,xn=new WeakMap,Je=new WeakMap,sr=new WeakMap,He=new WeakMap,lr=new WeakMap,fr=new WeakMap,zu=new WeakMap,Rr=Symbol("placeholder"),Wu=Symbol("mark-placeholder"),te={androidPendingDiffs:e=>He.get(e),androidScheduleFlush:e=>{var r;(r=xn.get(e))===null||r===void 0||r()},blur:e=>{var r=te.toDOMNode(e,e),t=te.findDocumentOrShadowRoot(e);vr.set(e,!1),t.activeElement===r&&r.blur()},deselect:e=>{var{selection:r}=e,t=te.findDocumentOrShadowRoot(e),n=Wr(t);n&&n.rangeCount>0&&n.removeAllRanges(),r&&ie.deselect(e)},findDocumentOrShadowRoot:e=>{var r=te.toDOMNode(e,e),t=r.getRootNode();return t instanceof Document||t instanceof ShadowRoot?t:r.ownerDocument},findEventRange:(e,r)=>{"nativeEvent"in r&&(r=r.nativeEvent);var{clientX:t,clientY:n,target:a}=r;if(t==null||n==null)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(r));var u=te.toSlateNode(e,r.target),s=te.findPath(e,u);if(Te.isElement(u)&&B.isVoid(e,u)){var i=a.getBoundingClientRect(),f=e.isInline(u)?t-i.left<i.left+i.width-t:n-i.top<i.top+i.height-n,l=B.point(e,s,{edge:f?"start":"end"}),c=f?B.before(e,l):B.after(e,l);if(c){var g=B.range(e,c);return g}}var d,{document:D}=te.getWindow(e);if(D.caretRangeFromPoint)d=D.caretRangeFromPoint(t,n);else{var m=D.caretPositionFromPoint(t,n);m&&(d=D.createRange(),d.setStart(m.offsetNode,m.offset),d.setEnd(m.offsetNode,m.offset))}if(!d)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(r));var h=te.toSlateRange(e,d,{exactMatch:!1,suppressThrow:!1});return h},findKey:(e,r)=>{var t=Bt.get(r);return t||(t=new wi,Bt.set(r,t)),t},findPath:(e,r)=>{for(var t=[],n=r;;){var a=On.get(n);if(a==null){if(B.isEditor(n))return t;break}var u=yn.get(n);if(u==null)break;t.unshift(u),n=a}throw new Error("Unable to find the path for Slate node: ".concat(ke.stringify(r)))},focus:function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{retries:5};if(!vr.get(r)){if(t.retries<=0)throw new Error("Could not set focus, editor seems stuck with pending operations");if(r.operations.length>0){setTimeout(()=>{te.focus(r,{retries:t.retries-1})},10);return}var n=te.toDOMNode(r,r),a=te.findDocumentOrShadowRoot(r);if(a.activeElement!==n){if(r.selection&&a instanceof Document){var u=Wr(a),s=te.toDOMRange(r,r.selection);u==null||u.removeAllRanges(),u==null||u.addRange(s)}r.selection||ie.select(r,B.start(r,[])),vr.set(r,!0),n.focus({preventScroll:!0})}}},getWindow:e=>{var r=$u.get(e);if(!r)throw new Error("Unable to find a host window element for this editor");return r},hasDOMNode:function(r,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{editable:a=!1}=n,u=te.toDOMNode(r,r),s;try{s=Ge(t)?t:t.parentElement}catch(i){if(i instanceof Error&&!i.message.includes('Permission denied to access property "nodeType"'))throw i}return s?s.closest("[data-slate-editor]")===u&&(!a||s.isContentEditable?!0:typeof s.isContentEditable=="boolean"&&s.closest('[contenteditable="false"]')===u||!!s.getAttribute("data-slate-zero-width")):!1},hasEditableTarget:(e,r)=>gr(r)&&te.hasDOMNode(e,r,{editable:!0}),hasRange:(e,r)=>{var{anchor:t,focus:n}=r;return B.hasPath(e,t.path)&&B.hasPath(e,n.path)},hasSelectableTarget:(e,r)=>te.hasEditableTarget(e,r)||te.isTargetInsideNonReadonlyVoid(e,r),hasTarget:(e,r)=>gr(r)&&te.hasDOMNode(e,r),insertData:(e,r)=>{e.insertData(r)},insertFragmentData:(e,r)=>e.insertFragmentData(r),insertTextData:(e,r)=>e.insertTextData(r),isComposing:e=>!!Br.get(e),isFocused:e=>!!vr.get(e),isReadOnly:e=>!!hn.get(e),isTargetInsideNonReadonlyVoid:(e,r)=>{if(hn.get(e))return!1;var t=te.hasTarget(e,r)&&te.toSlateNode(e,r);return Te.isElement(t)&&B.isVoid(e,t)},setFragmentData:(e,r,t)=>e.setFragmentData(r,t),toDOMNode:(e,r)=>{var t=xt.get(e),n=B.isEditor(r)?vt.get(e):t==null?void 0:t.get(te.findKey(e,r));if(!n)throw new Error("Cannot resolve a DOM node from Slate node: ".concat(ke.stringify(r)));return n},toDOMPoint:(e,r)=>{var[t]=B.node(e,r.path),n=te.toDOMNode(e,t),a;B.void(e,{at:r})&&(r={path:r.path,offset:0});for(var u="[data-slate-string], [data-slate-zero-width]",s=Array.from(n.querySelectorAll(u)),i=0,f=0;f<s.length;f++){var l=s[f],c=l.childNodes[0];if(!(c==null||c.textContent==null)){var{length:g}=c.textContent,d=l.getAttribute("data-slate-length"),D=d==null?g:parseInt(d,10),m=i+D,h=s[f+1];if(r.offset===m&&h!==null&&h!==void 0&&h.hasAttribute("data-slate-mark-placeholder")){var o,E=h.childNodes[0];a=[E instanceof ui?E:h,(o=h.textContent)!==null&&o!==void 0&&o.startsWith("\uFEFF")?1:0];break}if(r.offset<=m){var b=Math.min(g,Math.max(0,r.offset-i));a=[c,b];break}i=m}}if(!a)throw new Error("Cannot resolve a DOM point from Slate point: ".concat(ke.stringify(r)));return a},toDOMRange:(e,r)=>{var{anchor:t,focus:n}=r,a=N.isBackward(r),u=te.toDOMPoint(e,t),s=N.isCollapsed(r)?u:te.toDOMPoint(e,n),i=te.getWindow(e),f=i.document.createRange(),[l,c]=a?s:u,[g,d]=a?u:s,D=Ge(l)?l:l.parentElement,m=!!D.getAttribute("data-slate-zero-width"),h=Ge(g)?g:g.parentElement,o=!!h.getAttribute("data-slate-zero-width");return f.setStart(l,m?1:c),f.setEnd(g,o?1:d),f},toSlateNode:(e,r)=>{var t=Ge(r)?r:r.parentElement;t&&!t.hasAttribute("data-slate-node")&&(t=t.closest("[data-slate-node]"));var n=t?Jr.get(t):null;if(!n)throw new Error("Cannot resolve a Slate node from DOM node: ".concat(t));return n},toSlatePoint:(e,r,t)=>{var{exactMatch:n,suppressThrow:a,searchDirection:u="backward"}=t,[s,i]=n?r:oi(r),f=s.parentNode,l=null,c=0;if(f){var g,d,D=te.toDOMNode(e,e),m=f.closest('[data-slate-void="true"]'),h=m&&D.contains(m)?m:null,o=f.closest('[contenteditable="false"]'),E=o&&D.contains(o)?o:null,b=f.closest("[data-slate-leaf]"),w=null;if(b){if(l=b.closest('[data-slate-node="text"]'),l){var O=te.getWindow(e),j=O.document.createRange();j.setStart(l,0),j.setEnd(s,i);var G=j.cloneContents(),$=[...Array.prototype.slice.call(G.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(G.querySelectorAll("[contenteditable=false]"))];$.forEach(ae=>{if(Le&&!n&&ae.hasAttribute("data-slate-zero-width")&&ae.textContent.length>0&&ae.textContext!=="\uFEFF"){ae.textContent.startsWith("\uFEFF")&&(ae.textContent=ae.textContent.slice(1));return}ae.parentNode.removeChild(ae)}),c=G.textContent.length,w=l}}else if(h){for(var q=h.querySelectorAll("[data-slate-leaf]"),H=0;H<q.length;H++){var z=q[H];if(te.hasDOMNode(e,z)){b=z;break}}b?(l=b.closest('[data-slate-node="text"]'),w=b,c=w.textContent.length,w.querySelectorAll("[data-slate-zero-width]").forEach(ae=>{c-=ae.textContent.length})):c=1}else if(E){var M=ae=>ae?ae.querySelectorAll("[data-slate-leaf]:not(:scope [data-slate-editor] [data-slate-leaf])"):[],F=E.closest('[data-slate-node="element"]');if(u==="forward"){var y,x=[...M(F),...M(F==null?void 0:F.nextElementSibling)];b=(y=x.find(ae=>gi(E,ae)))!==null&&y!==void 0?y:null}else{var S,ne=[...M(F==null?void 0:F.previousElementSibling),...M(F)];b=(S=ne.findLast(ae=>ma(E,ae)))!==null&&S!==void 0?S:null}b&&(l=b.closest('[data-slate-node="text"]'),w=b,u==="forward"?c=0:(c=w.textContent.length,w.querySelectorAll("[data-slate-zero-width]").forEach(ae=>{c-=ae.textContent.length})))}w&&c===w.textContent.length&&Le&&w.getAttribute("data-slate-zero-width")==="z"&&(g=w.textContent)!==null&&g!==void 0&&g.startsWith("\uFEFF")&&(f.hasAttribute("data-slate-zero-width")||Or&&(d=w.textContent)!==null&&d!==void 0&&d.endsWith(`

`))&&c--}if(Le&&!l&&!n){var K=f.hasAttribute("data-slate-node")?f:f.closest("[data-slate-node]");if(K&&te.hasDOMNode(e,K,{editable:!0})){var ge=te.toSlateNode(e,K),{path:Q,offset:se}=B.start(e,te.findPath(e,ge));return K.querySelector("[data-slate-leaf]")||(se=i),{path:Q,offset:se}}}if(!l){if(a)return null;throw new Error("Cannot resolve a Slate point from DOM point: ".concat(r))}var me=te.toSlateNode(e,l),le=te.findPath(e,me);return{path:le,offset:c}},toSlateRange:(e,r,t)=>{var n,{exactMatch:a,suppressThrow:u}=t,s=dn(r)?r.anchorNode:r.startContainer,i,f,l,c,g;if(s)if(dn(r)){if(Or&&r.rangeCount>1){l=r.focusNode;var d=r.getRangeAt(0),D=r.getRangeAt(r.rangeCount-1);if(l instanceof HTMLTableRowElement&&d.startContainer instanceof HTMLTableRowElement&&D.startContainer instanceof HTMLTableRowElement){let G=function($){return $.childElementCount>0?G($.children[0]):$};var m=d.startContainer,h=D.startContainer,o=G(m.children[d.startOffset]),E=G(h.children[D.startOffset]);c=0,E.childNodes.length>0?i=E.childNodes[0]:i=E,o.childNodes.length>0?l=o.childNodes[0]:l=o,E instanceof HTMLElement?f=E.innerHTML.length:f=0}else d.startContainer===l?(i=D.endContainer,f=D.endOffset,c=d.startOffset):(i=d.startContainer,f=d.endOffset,c=D.startOffset)}else i=r.anchorNode,f=r.anchorOffset,l=r.focusNode,c=r.focusOffset;ku&&li(i)||Or?g=r.anchorNode===r.focusNode&&r.anchorOffset===r.focusOffset:g=r.isCollapsed}else i=r.startContainer,f=r.startOffset,l=r.endContainer,c=r.endOffset,g=r.collapsed;if(i==null||l==null||f==null||c==null)throw new Error("Cannot resolve a Slate range from DOM range: ".concat(r));Or&&(n=l.textContent)!==null&&n!==void 0&&n.endsWith(`

`)&&c===l.textContent.length&&c--;var b=te.toSlatePoint(e,[i,f],{exactMatch:a,suppressThrow:u});if(!b)return null;var w=ma(i,l)||i===l&&c<f,O=g?b:te.toSlatePoint(e,[l,c],{exactMatch:a,suppressThrow:u,searchDirection:w?"forward":"backward"});if(!O)return null;var j={anchor:b,focus:O};return N.isExpanded(j)&&N.isForward(j)&&Ge(l)&&B.void(e,{at:j.focus,mode:"highest"})&&(j=B.unhangRange(e,j,{voids:!0})),j}};function Fi(e,r){var{path:t,diff:n}=r;if(!B.hasPath(e,t))return!1;var a=U.get(e,t);if(!De.isText(a))return!1;if(n.start!==a.text.length||n.text.length===0)return a.text.slice(n.start,n.start+n.text.length)===n.text;var u=A.next(t);if(!B.hasPath(e,u))return!1;var s=U.get(e,u);return De.isText(s)&&s.text.startsWith(n.text)}function qu(e){for(var r=arguments.length,t=new Array(r>1?r-1:0),n=1;n<r;n++)t[n-1]=arguments[n];return t.reduce((a,u)=>a.slice(0,u.start)+u.text+a.slice(u.end),e)}function yi(e,r){for(var t=Math.min(e.length,r.length),n=0;n<t;n++)if(e.charAt(n)!==r.charAt(n))return n;return t}function Oi(e,r,t){for(var n=Math.min(e.length,r.length,t),a=0;a<n;a++)if(e.charAt(e.length-a-1)!==r.charAt(r.length-a-1))return a;return n}function Hu(e,r){var{start:t,end:n,text:a}=r,u=e.slice(t,n),s=yi(u,a),i=Math.min(u.length-s,a.length-s),f=Oi(u,a,i),l={start:t+s,end:n-f,text:a.slice(s,a.length-f)};return l.start===l.end&&l.text.length===0?null:l}function xi(e,r,t){var n=Math.min(r.start,t.start),a=Math.max(0,Math.min(r.start+r.text.length,t.end)-t.start),u=qu(e,r,t),s=Math.max(t.start+t.text.length,r.start+r.text.length+(r.start+r.text.length>t.start?t.text.length:0)-a),i=u.slice(n,s),f=Math.max(r.end,t.end-r.text.length+(r.end-r.start));return Hu(e,{start:n,end:f,text:i})}function Pi(e){var{path:r,diff:t}=e;return{anchor:{path:r,offset:t.start},focus:{path:r,offset:t.end}}}function mn(e,r){var{path:t,offset:n}=r;if(!B.hasPath(e,t))return null;var a=U.get(e,t);if(!De.isText(a))return null;var u=B.above(e,{match:i=>Te.isElement(i)&&B.isBlock(e,i),at:t});if(!u)return null;for(;n>a.text.length;){var s=B.next(e,{at:t,match:De.isText});if(!s||!A.isDescendant(s[1],u[1]))return null;n-=a.text.length,a=s[0],t=s[1]}return{path:t,offset:n}}function Ca(e,r){var t=mn(e,r.anchor);if(!t)return null;if(N.isCollapsed(r))return{anchor:t,focus:t};var n=mn(e,r.focus);return n?{anchor:t,focus:n}:null}function pn(e,r,t){var n=He.get(e),a=n==null?void 0:n.find(c=>{var{path:g}=c;return A.equals(g,r.path)});if(!a||r.offset<=a.diff.start)return pe.transform(r,t,{affinity:"backward"});var{diff:u}=a;if(r.offset<=u.start+u.text.length){var s={path:r.path,offset:u.start},i=pe.transform(s,t,{affinity:"backward"});return i?{path:i.path,offset:i.offset+r.offset-u.start}:null}var f={path:r.path,offset:r.offset-u.text.length+u.end-u.start},l=pe.transform(f,t,{affinity:"backward"});return l?t.type==="split_node"&&A.equals(t.path,r.path)&&f.offset<t.position&&u.start<t.position?l:{path:l.path,offset:l.offset+u.text.length-u.end+u.start}:null}function Ba(e,r,t){var n=pn(e,r.anchor,t);if(!n)return null;if(N.isCollapsed(r))return{anchor:n,focus:n};var a=pn(e,r.focus,t);return a?{anchor:n,focus:a}:null}function Si(e,r){var{path:t,diff:n,id:a}=e;switch(r.type){case"insert_text":return!A.equals(r.path,t)||r.offset>=n.end?e:r.offset<=n.start?{diff:{start:r.text.length+n.start,end:r.text.length+n.end,text:n.text},id:a,path:t}:{diff:{start:n.start,end:n.end+r.text.length,text:n.text},id:a,path:t};case"remove_text":return!A.equals(r.path,t)||r.offset>=n.end?e:r.offset+r.text.length<=n.start?{diff:{start:n.start-r.text.length,end:n.end-r.text.length,text:n.text},id:a,path:t}:{diff:{start:n.start,end:n.end-r.text.length,text:n.text},id:a,path:t};case"split_node":return!A.equals(r.path,t)||r.position>=n.end?{diff:n,id:a,path:A.transform(t,r,{affinity:"backward"})}:r.position>n.start?{diff:{start:n.start,end:Math.min(r.position,n.end),text:n.text},id:a,path:t}:{diff:{start:n.start-r.position,end:n.end-r.position,text:n.text},id:a,path:A.transform(t,r,{affinity:"forward"})};case"merge_node":return A.equals(r.path,t)?{diff:{start:n.start+r.position,end:n.end+r.position,text:n.text},id:a,path:A.transform(t,r)}:{diff:n,id:a,path:A.transform(t,r)}}var u=A.transform(t,r);return u?{diff:n,path:u,id:a}:null}var Ea=(e,r)=>{var t=(r.top+r.bottom)/2;return e.top<=t&&e.bottom>=t},ba=(e,r,t)=>{var n=te.toDOMRange(e,r).getBoundingClientRect(),a=te.toDOMRange(e,t).getBoundingClientRect();return Ea(n,a)&&Ea(a,n)},Ti=(e,r)=>{var t=B.range(e,N.end(r)),n=Array.from(B.positions(e,{at:r})),a=0,u=n.length,s=Math.floor(u/2);if(ba(e,B.range(e,n[a]),t))return B.range(e,n[a],t);if(n.length<2)return B.range(e,n[n.length-1],t);for(;s!==n.length&&s!==a;)ba(e,B.range(e,n[s]),t)?u=s:a=s,s=Math.floor((a+u)/2);return B.range(e,n[u],t)};function Aa(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function wa(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Aa(Object(t),!0).forEach(function(n){Lu(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Aa(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var Ri=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x-slate-fragment",n=r,{apply:a,onChange:u,deleteBackward:s,addMark:i,removeMark:f}=n;return xt.set(n,new WeakMap),n.addMark=(l,c)=>{var g,d;(g=xn.get(n))===null||g===void 0||g(),!Je.get(n)&&(d=He.get(n))!==null&&d!==void 0&&d.length&&Je.set(n,null),sr.delete(n),i(l,c)},n.removeMark=l=>{var c;!Je.get(n)&&(c=He.get(n))!==null&&c!==void 0&&c.length&&Je.set(n,null),sr.delete(n),f(l)},n.deleteBackward=l=>{if(l!=="line")return s(l);if(n.selection&&N.isCollapsed(n.selection)){var c=B.above(n,{match:m=>Te.isElement(m)&&B.isBlock(n,m),at:n.selection});if(c){var[,g]=c,d=B.range(n,g,n.selection.anchor),D=Ti(n,d);N.isCollapsed(D)||ie.delete(n,{at:D})}}},n.apply=l=>{var c=[],g=[],d=He.get(n);if(d!=null&&d.length){var D=d.map(x=>Si(x,l)).filter(Boolean);He.set(n,D)}var m=fr.get(n);m&&fr.set(n,Ba(n,m,l));var h=lr.get(n);if(h!=null&&h.at){var o=pe.isPoint(h==null?void 0:h.at)?pn(n,h.at,l):Ba(n,h.at,l);lr.set(n,o?wa(wa({},h),{},{at:o}):null)}switch(l.type){case"insert_text":case"remove_text":case"set_node":case"split_node":{c.push(...yr(n,l.path));break}case"set_selection":{var E;(E=qr.get(n))===null||E===void 0||E.unref(),qr.delete(n);break}case"insert_node":case"remove_node":{c.push(...yr(n,A.parent(l.path)));break}case"merge_node":{var b=A.previous(l.path);c.push(...yr(n,b));break}case"move_node":{var w=A.common(A.parent(l.path),A.parent(l.newPath));c.push(...yr(n,w));var O;A.isBefore(l.path,l.newPath)?(c.push(...yr(n,A.parent(l.path))),O=l.newPath):(c.push(...yr(n,A.parent(l.newPath))),O=l.path);var j=U.get(r,A.parent(O)),G=te.findKey(n,j),$=B.pathRef(n,A.parent(O));g.push([$,G]);break}}switch(a(l),l.type){case"insert_node":case"remove_node":case"merge_node":case"move_node":case"split_node":Pr.set(n,!0)}for(var[q,H]of c){var[z]=B.node(n,q);Bt.set(z,H)}for(var[M,F]of g){if(M.current){var[y]=B.node(n,M.current);Bt.set(y,F)}M.unref()}},n.setFragmentData=l=>{var{selection:c}=n;if(c){var[g,d]=N.edges(c),D=B.void(n,{at:g.path}),m=B.void(n,{at:d.path});if(!(N.isCollapsed(c)&&!D)){var h=te.toDOMRange(n,c),o=h.cloneContents(),E=o.childNodes[0];if(o.childNodes.forEach(z=>{z.textContent&&z.textContent.trim()!==""&&(E=z)}),m){var[b]=m,w=h.cloneRange(),O=te.toDOMNode(n,b);w.setEndAfter(O),o=w.cloneContents()}if(D&&(E=o.querySelector("[data-slate-spacer]")),Array.from(o.querySelectorAll("[data-slate-zero-width]")).forEach(z=>{var M=z.getAttribute("data-slate-zero-width")==="n";z.textContent=M?`
`:""}),ju(E)){var j=E.ownerDocument.createElement("span");j.style.whiteSpace="pre",j.appendChild(E),o.appendChild(j),E=j}var G=n.getFragment(),$=JSON.stringify(G),q=window.btoa(encodeURIComponent($));E.setAttribute("data-slate-fragment",q),l.setData("application/".concat(t),q);var H=o.ownerDocument.createElement("div");return H.appendChild(o),H.setAttribute("hidden","true"),o.ownerDocument.body.appendChild(H),l.setData("text/html",H.innerHTML),l.setData("text/plain",Mu(H)),o.ownerDocument.body.removeChild(H),l}}},n.insertData=l=>{n.insertFragmentData(l)||n.insertTextData(l)},n.insertFragmentData=l=>{var c=l.getData("application/".concat(t))||vi(l);if(c){var g=decodeURIComponent(window.atob(c)),d=JSON.parse(g);return n.insertFragment(d),!0}return!1},n.insertTextData=l=>{var c=l.getData("text/plain");if(c){var g=c.split(/\r\n|\r|\n/),d=!1;for(var D of g)d&&ie.splitNodes(n,{always:!0}),n.insertText(D),d=!0;return!0}return!1},n.onChange=l=>{var c=Dn.get(n);c&&c(l),u(l)},n},yr=(e,r)=>{var t=[];for(var[n,a]of B.levels(e,{at:r})){var u=te.findKey(e,n);t.push([a,u])}return t},ji=3,Ni={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",insertSoftBreak:"shift+enter",splitBlock:"enter",undo:"mod+z"},Mi={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},Ii={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},Fe=e=>{var r=Ni[e],t=Mi[e],n=Ii[e],a=r&&ft.isHotkey(r),u=t&&ft.isHotkey(t),s=n&&ft.isHotkey(n);return i=>!!(a&&a(i)||pa&&u&&u(i)||!pa&&s&&s(i))},xe={isBold:Fe("bold"),isCompose:Fe("compose"),isMoveBackward:Fe("moveBackward"),isMoveForward:Fe("moveForward"),isDeleteBackward:Fe("deleteBackward"),isDeleteForward:Fe("deleteForward"),isDeleteLineBackward:Fe("deleteLineBackward"),isDeleteLineForward:Fe("deleteLineForward"),isDeleteWordBackward:Fe("deleteWordBackward"),isDeleteWordForward:Fe("deleteWordForward"),isExtendBackward:Fe("extendBackward"),isExtendForward:Fe("extendForward"),isExtendLineBackward:Fe("extendLineBackward"),isExtendLineForward:Fe("extendLineForward"),isItalic:Fe("italic"),isMoveLineBackward:Fe("moveLineBackward"),isMoveLineForward:Fe("moveLineForward"),isMoveWordBackward:Fe("moveWordBackward"),isMoveWordForward:Fe("moveWordForward"),isRedo:Fe("redo"),isSoftBreak:Fe("insertSoftBreak"),isSplitBlock:Fe("splitBlock"),isTransposeCharacter:Fe("transposeCharacter"),isUndo:Fe("undo")};function ki(e,r){if(e==null)return{};var t={},n=Object.keys(e),a,u;for(u=0;u<n.length;u++)a=n[u],!(r.indexOf(a)>=0)&&(t[a]=e[a]);return t}function Fa(e,r){if(e==null)return{};var t=ki(e,r),n,a;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(a=0;a<u.length;a++)n=u[a],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(t[n]=e[n])}return t}var Li=["anchor","focus"],$i=["anchor","focus"],zi=(e,r)=>Object.keys(e).length===Object.keys(r).length&&Object.keys(e).every(t=>r.hasOwnProperty(t)&&e[t]===r[t]),Vu=(e,r)=>{var t=Fa(e,Li),n=Fa(r,$i);return e[Rr]===r[Rr]&&zi(t,n)},Wi=(e,r)=>{if(e.length!==r.length)return!1;for(var t=0;t<e.length;t++){var n=e[t],a=r[t];if(!N.equals(n,a)||!Vu(n,a))return!1}return!0},qi=(e,r)=>{if(e.length!==r.length)return!1;for(var t=0;t<e.length;t++){var n=e[t],a=r[t];if(n.anchor.offset!==a.anchor.offset||n.focus.offset!==a.focus.offset||!Vu(n,a))return!1}return!0},br=[],Hi=function(){return br.some(function(e){return e.activeTargets.length>0})},Vi=function(){return br.some(function(e){return e.skippedTargets.length>0})},ya="ResizeObserver loop completed with undelivered notifications.",Ki=function(){var e;typeof ErrorEvent=="function"?e=new ErrorEvent("error",{message:ya}):(e=document.createEvent("Event"),e.initEvent("error",!1,!1),e.message=ya),window.dispatchEvent(e)},Zr;(function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(Zr||(Zr={}));var Ar=function(e){return Object.freeze(e)},Ui=function(){function e(r,t){this.inlineSize=r,this.blockSize=t,Ar(this)}return e}(),Ku=function(){function e(r,t,n,a){return this.x=r,this.y=t,this.width=n,this.height=a,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Ar(this)}return e.prototype.toJSON=function(){var r=this,t=r.x,n=r.y,a=r.top,u=r.right,s=r.bottom,i=r.left,f=r.width,l=r.height;return{x:t,y:n,top:a,right:u,bottom:s,left:i,width:f,height:l}},e.fromRect=function(r){return new e(r.x,r.y,r.width,r.height)},e}(),Pn=function(e){return e instanceof SVGElement&&"getBBox"in e},Uu=function(e){if(Pn(e)){var r=e.getBBox(),t=r.width,n=r.height;return!t&&!n}var a=e,u=a.offsetWidth,s=a.offsetHeight;return!(u||s||e.getClientRects().length)},Oa=function(e){var r;if(e instanceof Element)return!0;var t=(r=e==null?void 0:e.ownerDocument)===null||r===void 0?void 0:r.defaultView;return!!(t&&e instanceof t.Element)},Gi=function(e){switch(e.tagName){case"INPUT":if(e.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},Hr=typeof window<"u"?window:{},at=new WeakMap,xa=/auto|scroll/,Yi=/^tb|vertical/,Xi=/msie|trident/i.test(Hr.navigator&&Hr.navigator.userAgent),er=function(e){return parseFloat(e||"0")},Sr=function(e,r,t){return e===void 0&&(e=0),r===void 0&&(r=0),t===void 0&&(t=!1),new Ui((t?r:e)||0,(t?e:r)||0)},Pa=Ar({devicePixelContentBoxSize:Sr(),borderBoxSize:Sr(),contentBoxSize:Sr(),contentRect:new Ku(0,0,0,0)}),Gu=function(e,r){if(r===void 0&&(r=!1),at.has(e)&&!r)return at.get(e);if(Uu(e))return at.set(e,Pa),Pa;var t=getComputedStyle(e),n=Pn(e)&&e.ownerSVGElement&&e.getBBox(),a=!Xi&&t.boxSizing==="border-box",u=Yi.test(t.writingMode||""),s=!n&&xa.test(t.overflowY||""),i=!n&&xa.test(t.overflowX||""),f=n?0:er(t.paddingTop),l=n?0:er(t.paddingRight),c=n?0:er(t.paddingBottom),g=n?0:er(t.paddingLeft),d=n?0:er(t.borderTopWidth),D=n?0:er(t.borderRightWidth),m=n?0:er(t.borderBottomWidth),h=n?0:er(t.borderLeftWidth),o=g+l,E=f+c,b=h+D,w=d+m,O=i?e.offsetHeight-w-e.clientHeight:0,j=s?e.offsetWidth-b-e.clientWidth:0,G=a?o+b:0,$=a?E+w:0,q=n?n.width:er(t.width)-G-j,H=n?n.height:er(t.height)-$-O,z=q+o+j+b,M=H+E+O+w,F=Ar({devicePixelContentBoxSize:Sr(Math.round(q*devicePixelRatio),Math.round(H*devicePixelRatio),u),borderBoxSize:Sr(z,M,u),contentBoxSize:Sr(q,H,u),contentRect:new Ku(g,f,q,H)});return at.set(e,F),F},Yu=function(e,r,t){var n=Gu(e,t),a=n.borderBoxSize,u=n.contentBoxSize,s=n.devicePixelContentBoxSize;switch(r){case Zr.DEVICE_PIXEL_CONTENT_BOX:return s;case Zr.BORDER_BOX:return a;default:return u}},Ji=function(){function e(r){var t=Gu(r);this.target=r,this.contentRect=t.contentRect,this.borderBoxSize=Ar([t.borderBoxSize]),this.contentBoxSize=Ar([t.contentBoxSize]),this.devicePixelContentBoxSize=Ar([t.devicePixelContentBoxSize])}return e}(),Xu=function(e){if(Uu(e))return 1/0;for(var r=0,t=e.parentNode;t;)r+=1,t=t.parentNode;return r},Zi=function(){var e=1/0,r=[];br.forEach(function(s){if(s.activeTargets.length!==0){var i=[];s.activeTargets.forEach(function(l){var c=new Ji(l.target),g=Xu(l.target);i.push(c),l.lastReportedSize=Yu(l.target,l.observedBox),g<e&&(e=g)}),r.push(function(){s.callback.call(s.observer,i,s.observer)}),s.activeTargets.splice(0,s.activeTargets.length)}});for(var t=0,n=r;t<n.length;t++){var a=n[t];a()}return e},Sa=function(e){br.forEach(function(t){t.activeTargets.splice(0,t.activeTargets.length),t.skippedTargets.splice(0,t.skippedTargets.length),t.observationTargets.forEach(function(a){a.isActive()&&(Xu(a.target)>e?t.activeTargets.push(a):t.skippedTargets.push(a))})})},Qi=function(){var e=0;for(Sa(e);Hi();)e=Zi(),Sa(e);return Vi()&&Ki(),e>0},tn,Ju=[],_i=function(){return Ju.splice(0).forEach(function(e){return e()})},eo=function(e){if(!tn){var r=0,t=document.createTextNode(""),n={characterData:!0};new MutationObserver(function(){return _i()}).observe(t,n),tn=function(){t.textContent="".concat(r?r--:r++)}}Ju.push(e),tn()},ro=function(e){eo(function(){requestAnimationFrame(e)})},dt=0,to=function(){return!!dt},no=250,ao={attributes:!0,characterData:!0,childList:!0,subtree:!0},Ta=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],Ra=function(e){return e===void 0&&(e=0),Date.now()+e},nn=!1,uo=function(){function e(){var r=this;this.stopped=!0,this.listener=function(){return r.schedule()}}return e.prototype.run=function(r){var t=this;if(r===void 0&&(r=no),!nn){nn=!0;var n=Ra(r);ro(function(){var a=!1;try{a=Qi()}finally{if(nn=!1,r=n-Ra(),!to())return;a?t.run(1e3):r>0?t.run(r):t.start()}})}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var r=this,t=function(){return r.observer&&r.observer.observe(document.body,ao)};document.body?t():Hr.addEventListener("DOMContentLoaded",t)},e.prototype.start=function(){var r=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),Ta.forEach(function(t){return Hr.addEventListener(t,r.listener,!0)}))},e.prototype.stop=function(){var r=this;this.stopped||(this.observer&&this.observer.disconnect(),Ta.forEach(function(t){return Hr.removeEventListener(t,r.listener,!0)}),this.stopped=!0)},e}(),Cn=new uo,ja=function(e){!dt&&e>0&&Cn.start(),dt+=e,!dt&&Cn.stop()},so=function(e){return!Pn(e)&&!Gi(e)&&getComputedStyle(e).display==="inline"},io=function(){function e(r,t){this.target=r,this.observedBox=t||Zr.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var r=Yu(this.target,this.observedBox,!0);return so(this.target)&&(this.lastReportedSize=r),this.lastReportedSize.inlineSize!==r.inlineSize||this.lastReportedSize.blockSize!==r.blockSize},e}(),oo=function(){function e(r,t){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=r,this.callback=t}return e}(),ut=new WeakMap,Na=function(e,r){for(var t=0;t<e.length;t+=1)if(e[t].target===r)return t;return-1},st=function(){function e(){}return e.connect=function(r,t){var n=new oo(r,t);ut.set(r,n)},e.observe=function(r,t,n){var a=ut.get(r),u=a.observationTargets.length===0;Na(a.observationTargets,t)<0&&(u&&br.push(a),a.observationTargets.push(new io(t,n&&n.box)),ja(1),Cn.schedule())},e.unobserve=function(r,t){var n=ut.get(r),a=Na(n.observationTargets,t),u=n.observationTargets.length===1;a>=0&&(u&&br.splice(br.indexOf(n),1),n.observationTargets.splice(a,1),ja(-1))},e.disconnect=function(r){var t=this,n=ut.get(r);n.observationTargets.slice().forEach(function(a){return t.unobserve(r,a.target)}),n.activeTargets.splice(0,n.activeTargets.length)},e}(),lo=function(){function e(r){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof r!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");st.connect(this,r)}return e.prototype.observe=function(r,t){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Oa(r))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");st.observe(this,r,t)},e.prototype.unobserve=function(r){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Oa(r))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");st.unobserve(this,r)},e.prototype.disconnect=function(){st.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}(),fo=cs();const co=jr(fo);function vo(e,r){if(e==null)return{};var t={},n=Object.keys(e),a,u;for(u=0;u<n.length;u++)a=n[u],!(r.indexOf(a)>=0)&&(t[a]=e[a]);return t}function Et(e,r){if(e==null)return{};var t=vo(e,r),n,a;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(a=0;a<u.length;a++)n=u[a],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(t[n]=e[n])}return t}function Qr(e){"@babel/helpers - typeof";return Qr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Qr(e)}function go(e,r){if(Qr(e)!=="object"||e===null)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var n=t.call(e,r||"default");if(Qr(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function ho(e){var r=go(e,"string");return Qr(r)==="symbol"?r:String(r)}function nr(e,r,t){return r=ho(r),r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Sn=L.createContext(null),hr=()=>{var e=L.useContext(Sn);if(!e)throw new Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return e},I=te;function Ma(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function it(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Ma(Object(t),!0).forEach(function(n){nr(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ma(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var Do=25,mo=200,po=function(){},Co=e=>(e==null?void 0:e.constructor.name)==="DataTransfer";function Bo(e){var{editor:r,scheduleOnDOMSelectionChange:t,onDOMSelectionChange:n}=e,a=!1,u=null,s=null,i=null,f=0,l=!1,c=()=>{var F=fr.get(r);if(fr.delete(r),F){var{selection:y}=r,x=Ca(r,F);x&&(!y||!N.equals(x,y))&&ie.select(r,x)}},g=()=>{var F=lr.get(r);if(lr.delete(r),!!F){if(F.at){var y=pe.isPoint(F.at)?mn(r,F.at):Ca(r,F.at);if(!y)return;var x=B.range(r,y);(!r.selection||!N.equals(r.selection,x))&&ie.select(r,y)}F.run()}},d=()=>{if(s&&(clearTimeout(s),s=null),i&&(clearTimeout(i),i=null),!O()&&!w()){c();return}a||(a=!0,setTimeout(()=>a=!1)),w()&&(a="action");var F=r.selection&&B.rangeRef(r,r.selection,{affinity:"forward"});sr.set(r,r.marks),po("flush",lr.get(r),He.get(r));for(var y=O(),x;x=(S=He.get(r))===null||S===void 0?void 0:S[0];){var S,ne,K=Je.get(r);K!==void 0&&(Je.delete(r),r.marks=K),K&&l===!1&&(l=null);var ge=Pi(x);(!r.selection||!N.equals(r.selection,ge))&&ie.select(r,ge),x.diff.text?B.insertText(r,x.diff.text):B.deleteFragment(r),He.set(r,(ne=He.get(r))===null||ne===void 0?void 0:ne.filter(me=>{var{id:le}=me;return le!==x.id})),Fi(r,x)||(y=!1,lr.delete(r),sr.delete(r),a="action",fr.delete(r),t.cancel(),n.cancel(),F==null||F.unref())}var Q=F==null?void 0:F.unref();if(Q&&!fr.get(r)&&(!r.selection||!N.equals(Q,r.selection))&&ie.select(r,Q),w()){g();return}y&&t(),t.flush(),n.flush(),c();var se=sr.get(r);sr.delete(r),se!==void 0&&(r.marks=se,r.onChange())},D=F=>{u&&clearTimeout(u),u=setTimeout(()=>{Br.set(r,!1),d()},Do)},m=F=>{Br.set(r,!0),u&&(clearTimeout(u),u=null)},h=function(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,x=gn.get(r);if(x){if(O()||y){x.style.display="none";return}x.style.removeProperty("display")}},o=(F,y)=>{var x,S=(x=He.get(r))!==null&&x!==void 0?x:[];He.set(r,S);var ne=U.leaf(r,F),K=S.findIndex(se=>A.equals(se.path,F));if(K<0){var ge=Hu(ne.text,y);ge&&S.push({path:F,diff:y,id:f++}),h();return}var Q=xi(ne.text,S[K].diff,y);if(!Q){S.splice(K,1),h();return}S[K]=it(it({},S[K]),{},{diff:Q})},E=function(y){var{at:x}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};l=!1,fr.delete(r),t.cancel(),n.cancel(),w()&&d(),lr.set(r,{at:x,run:y}),i=setTimeout(d)},b=F=>{var y;if(s&&(clearTimeout(s),s=null),!Pr.get(r)){var{inputType:x}=F,S=null,ne=F.dataTransfer||F.data||void 0;l!==!1&&x!=="insertText"&&x!=="insertCompositionText"&&(l=!1);var[K]=F.getTargetRanges();K&&(S=I.toSlateRange(r,K,{exactMatch:!1,suppressThrow:!0}));var ge=I.getWindow(r),Q=ge.getSelection();if(!S&&Q&&(K=Q,S=I.toSlateRange(r,Q,{exactMatch:!1,suppressThrow:!0})),S=(y=S)!==null&&y!==void 0?y:r.selection,!!S){var se=!0;if(x.startsWith("delete")){if(N.isExpanded(S)){var[me,le]=N.edges(S),ae=U.leaf(r,me.path);if(ae.text.length===me.offset&&le.offset===0){var Se=B.next(r,{at:me.path,match:De.isText});Se&&A.equals(Se[1],le.path)&&(S={anchor:le,focus:le})}}var J=x.endsWith("Backward")?"backward":"forward",[C,k]=N.edges(S),[T,R]=B.leaf(r,C.path),ue={text:"",start:C.offset,end:k.offset},X=He.get(r),Be=X==null?void 0:X.find(Pe=>A.equals(Pe.path,R)),ce=Be?[Be.diff,ue]:[ue],_=qu(T.text,...ce);if(_.length===0&&(se=!1),N.isExpanded(S)){if(se&&A.equals(S.anchor.path,S.focus.path)){var Ee={path:S.anchor.path,offset:C.offset},be=B.range(r,Ee,Ee);return $(be),o(S.anchor.path,{text:"",end:k.offset,start:C.offset})}return E(()=>B.deleteFragment(r,{direction:J}),{at:S})}}switch(x){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":return E(()=>B.deleteFragment(r),{at:S});case"deleteContent":case"deleteContentForward":{var{anchor:Oe}=S;if(se&&N.isCollapsed(S)){var Ce=U.leaf(r,Oe.path);if(Oe.offset<Ce.text.length)return o(Oe.path,{text:"",start:Oe.offset,end:Oe.offset+1})}return E(()=>B.deleteForward(r),{at:S})}case"deleteContentBackward":{var je,{anchor:Re}=S,ze=dn(K)?K.isCollapsed:!!((je=K)!==null&&je!==void 0&&je.collapsed);return se&&ze&&N.isCollapsed(S)&&Re.offset>0?o(Re.path,{text:"",start:Re.offset-1,end:Re.offset}):E(()=>B.deleteBackward(r),{at:S})}case"deleteEntireSoftLine":return E(()=>{B.deleteBackward(r,{unit:"line"}),B.deleteForward(r,{unit:"line"})},{at:S});case"deleteHardLineBackward":return E(()=>B.deleteBackward(r,{unit:"block"}),{at:S});case"deleteSoftLineBackward":return E(()=>B.deleteBackward(r,{unit:"line"}),{at:S});case"deleteHardLineForward":return E(()=>B.deleteForward(r,{unit:"block"}),{at:S});case"deleteSoftLineForward":return E(()=>B.deleteForward(r,{unit:"line"}),{at:S});case"deleteWordBackward":return E(()=>B.deleteBackward(r,{unit:"word"}),{at:S});case"deleteWordForward":return E(()=>B.deleteForward(r,{unit:"word"}),{at:S});case"insertLineBreak":return E(()=>B.insertSoftBreak(r),{at:S});case"insertParagraph":return E(()=>B.insertBreak(r),{at:S});case"insertCompositionText":case"deleteCompositionText":case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{if(Co(ne))return E(()=>I.insertData(r,ne),{at:S});var ve=ne??"";if(Je.get(r)&&(ve=ve.replace("\uFEFF","")),x==="insertText"&&/.*\n.*\n$/.test(ve)&&(ve=ve.slice(0,-1)),ve.includes(`
`))return E(()=>{var Pe=ve.split(`
`);Pe.forEach((Me,Qe)=>{Me&&B.insertText(r,Me),Qe!==Pe.length-1&&B.insertSoftBreak(r)})},{at:S});if(A.equals(S.anchor.path,S.focus.path)){var[We,qe]=N.edges(S),oe={start:We.offset,end:qe.offset,text:ve};if(ve&&l&&x==="insertCompositionText"){var he=l.start+l.text.search(/\S|$/),Ze=oe.start+oe.text.search(/\S|$/);Ze===he+1&&oe.end===l.start+l.text.length?(oe.start-=1,l=null,z()):l=!1}else x==="insertText"?l===null?l=oe:l&&N.isCollapsed(S)&&l.end+l.text.length===We.offset?l=it(it({},l),{},{text:l.text+ve}):l=!1:l=!1;if(se){o(We.path,oe);return}}return E(()=>B.insertText(r,ve),{at:S})}}}}},w=()=>!!lr.get(r),O=()=>{var F;return!!((F=He.get(r))!==null&&F!==void 0&&F.length)},j=()=>w()||O(),G=()=>a,$=F=>{fr.set(r,F),s&&(clearTimeout(s),s=null);var{selection:y}=r;if(F){var x=!y||!A.equals(y.anchor.path,F.anchor.path),S=!y||!A.equals(y.anchor.path.slice(0,-1),F.anchor.path.slice(0,-1));(x&&l||S)&&(l=!1),(x||O())&&(s=setTimeout(d,mo))}},q=()=>{(w()||!O())&&d()},H=F=>{O()||(h(!0),setTimeout(h))},z=()=>{w()||(i=setTimeout(d))},M=F=>{if(!(O()||w())&&F.some(x=>Fn(r,x,F))){var y;(y=zu.get(r))===null||y===void 0||y()}};return{flush:d,scheduleFlush:z,hasPendingDiffs:O,hasPendingAction:w,hasPendingChanges:j,isFlushing:G,handleUserSelect:$,handleCompositionEnd:D,handleCompositionStart:m,handleDOMBeforeInput:b,handleKeyDown:H,handleDomMutations:M,handleInput:q}}function Eo(){var e=L.useRef(!1);return L.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),e.current}var _r=ct?L.useLayoutEffect:L.useEffect;function bo(e,r,t){var[n]=L.useState(()=>new MutationObserver(r));_r(()=>{n.takeRecords()}),L.useEffect(()=>{if(!e.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");return n.observe(e.current,t),()=>n.disconnect()},[n,e,t])}var Ao=["node"];function Ia(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function wo(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Ia(Object(t),!0).forEach(function(n){nr(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ia(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var Fo={subtree:!0,childList:!0,characterData:!0},yo=Le?e=>{var{node:r}=e,t=Et(e,Ao);if(!Le)return null;var n=hr(),a=Eo(),[u]=L.useState(()=>Bo(wo({editor:n},t)));return bo(r,u.handleDomMutations,Fo),xn.set(n,u.scheduleFlush),a&&u.flush(),u}:()=>null;function ka(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Oo(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?ka(Object(t),!0).forEach(function(n){nr(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ka(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var xo=e=>{var{isLast:r,leaf:t,parent:n,text:a}=e,u=hr(),s=I.findPath(u,a),i=A.parent(s),f=!!t[Wu];return u.isVoid(n)?re.createElement(an,{length:U.string(n).length}):t.text===""&&n.children[n.children.length-1]===a&&!u.isInline(n)&&B.string(u,i)===""?re.createElement(an,{isLineBreak:!0,isMarkPlaceholder:f}):t.text===""?re.createElement(an,{isMarkPlaceholder:f}):r&&t.text.slice(-1)===`
`?re.createElement(La,{isTrailing:!0,text:t.text}):re.createElement(La,{text:t.text})},La=e=>{var{text:r,isTrailing:t=!1}=e,n=L.useRef(null),a=()=>"".concat(r??"").concat(t?`
`:""),[u]=L.useState(a);return _r(()=>{var s=a();n.current&&n.current.textContent!==s&&(n.current.textContent=s)}),re.createElement(Po,{ref:n},u)},Po=L.memo(L.forwardRef((e,r)=>re.createElement("span",{"data-slate-string":!0,ref:r},e.children))),an=e=>{var{length:r=0,isLineBreak:t=!1,isMarkPlaceholder:n=!1}=e,a={"data-slate-zero-width":t?"n":"z","data-slate-length":r};return n&&(a["data-slate-mark-placeholder"]=!0),re.createElement("span",Oo({},a),!(Le||Iu)||!t?"\uFEFF":null,t?re.createElement("br",null):null)};function $a(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Zu(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?$a(Object(t),!0).forEach(function(n){nr(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):$a(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var So=Le?300:0;function To(e,r){e.current&&(e.current.disconnect(),r&&(e.current=null))}function za(e){e.current&&(clearTimeout(e.current),e.current=null)}var Ro=e=>{var{leaf:r,isLast:t,text:n,parent:a,renderPlaceholder:u,renderLeaf:s=b=>re.createElement(No,Zu({},b))}=e,i=hr(),f=L.useRef(null),l=L.useRef(null),[c,g]=L.useState(!1),d=L.useRef(null),D=L.useCallback(b=>{if(To(f,b==null),b==null){var w;gn.delete(i),(w=r.onPlaceholderResize)===null||w===void 0||w.call(r,null)}else{if(gn.set(i,b),!f.current){var O=window.ResizeObserver||lo;f.current=new O(()=>{var j;(j=r.onPlaceholderResize)===null||j===void 0||j.call(r,b)})}f.current.observe(b),l.current=b}},[l,r,i]),m=re.createElement(xo,{isLast:t,leaf:r,parent:a,text:n}),h=!!r[Rr];if(L.useEffect(()=>(h?d.current||(d.current=setTimeout(()=>{g(!0),d.current=null},So)):(za(d),g(!1)),()=>za(d)),[h,g]),h&&c){var o={children:r.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",top:0,pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none",WebkitUserModify:Cr?"inherit":void 0},contentEditable:!1,ref:D}};m=re.createElement(re.Fragment,null,u(o),m)}var E={"data-slate-leaf":!0};return s({attributes:E,children:m,leaf:r,text:n})},jo=re.memo(Ro,(e,r)=>r.parent===e.parent&&r.isLast===e.isLast&&r.renderLeaf===e.renderLeaf&&r.renderPlaceholder===e.renderPlaceholder&&r.text===e.text&&De.equals(r.leaf,e.leaf)&&r.leaf[Rr]===e.leaf[Rr]),No=e=>{var{attributes:r,children:t}=e;return re.createElement("span",Zu({},r),t)},Mo=e=>{for(var{decorations:r,isLast:t,parent:n,renderPlaceholder:a,renderLeaf:u,text:s}=e,i=hr(),f=L.useRef(null),l=De.decorations(s,r),c=I.findKey(i,s),g=[],d=0;d<l.length;d++){var D=l[d];g.push(re.createElement(jo,{isLast:t&&d===l.length-1,key:"".concat(c.id,"-").concat(d),renderPlaceholder:a,leaf:D,text:s,parent:n,renderLeaf:u}))}var m=L.useCallback(h=>{var o=xt.get(i);h?(o==null||o.set(c,h),Er.set(s,h),Jr.set(h,s)):(o==null||o.delete(c),Er.delete(s),f.current&&Jr.delete(f.current)),f.current=h},[f,i,c,s]);return re.createElement("span",{"data-slate-node":"text",ref:m},g)},Qu=re.memo(Mo,(e,r)=>r.parent===e.parent&&r.isLast===e.isLast&&r.renderLeaf===e.renderLeaf&&r.renderPlaceholder===e.renderPlaceholder&&r.text===e.text&&qi(r.decorations,e.decorations));function Wa(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Bn(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Wa(Object(t),!0).forEach(function(n){nr(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Wa(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var Io=e=>{var{decorations:r,element:t,renderElement:n=b=>re.createElement(Lo,Bn({},b)),renderPlaceholder:a,renderLeaf:u,selection:s}=e,i=hr(),f=zo(),l=i.isInline(t),c=I.findKey(i,t),g=L.useCallback(b=>{var w=xt.get(i);b?(w==null||w.set(c,b),Er.set(t,b),Jr.set(b,t)):(w==null||w.delete(c),Er.delete(t))},[i,c,t]),d=rs({decorations:r,node:t,renderElement:n,renderPlaceholder:a,renderLeaf:u,selection:s}),D={"data-slate-node":"element",ref:g};if(l&&(D["data-slate-inline"]=!0),!l&&B.hasInlines(i,t)){var m=U.string(t),h=Eu(m);h==="rtl"&&(D.dir=h)}if(B.isVoid(i,t)){D["data-slate-void"]=!0,!f&&l&&(D.contentEditable=!1);var o=l?"span":"div",[[E]]=U.texts(t);d=re.createElement(o,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},re.createElement(Qu,{renderPlaceholder:a,decorations:[],isLast:!1,parent:t,text:E})),yn.set(E,0),On.set(E,t)}return n({attributes:D,children:d,element:t})},ko=re.memo(Io,(e,r)=>e.element===r.element&&e.renderElement===r.renderElement&&e.renderLeaf===r.renderLeaf&&e.renderPlaceholder===r.renderPlaceholder&&Wi(e.decorations,r.decorations)&&(e.selection===r.selection||!!e.selection&&!!r.selection&&N.equals(e.selection,r.selection))),Lo=e=>{var{attributes:r,children:t,element:n}=e,a=hr(),u=a.isInline(n)?"span":"div";return re.createElement(u,Bn(Bn({},r),{},{style:{position:"relative"}}),t)},_u=L.createContext(()=>[]),$o=()=>L.useContext(_u),es=L.createContext(!1),Tc=()=>L.useContext(es),rs=e=>{var{decorations:r,node:t,renderElement:n,renderPlaceholder:a,renderLeaf:u,selection:s}=e,i=$o(),f=hr();Pr.set(f,!1);for(var l=I.findPath(f,t),c=[],g=Te.isElement(t)&&!f.isInline(t)&&B.hasInlines(f,t),d=0;d<t.children.length;d++){var D=l.concat(d),m=t.children[d],h=I.findKey(f,m),o=B.range(f,D),E=s&&N.intersection(o,s),b=i([m,D]);for(var w of r){var O=N.intersection(w,o);O&&b.push(O)}Te.isElement(m)?c.push(re.createElement(es.Provider,{key:"provider-".concat(h.id),value:!!E},re.createElement(ko,{decorations:b,element:m,key:h.id,renderElement:n,renderPlaceholder:a,renderLeaf:u,selection:E}))):c.push(re.createElement(Qu,{decorations:b,key:h.id,isLast:g&&d===t.children.length-1,parent:t,renderPlaceholder:a,renderLeaf:u,text:m})),yn.set(m,d),On.set(m,t)}return c},ts=L.createContext(!1),zo=()=>L.useContext(ts),ns=L.createContext(null),Wo=()=>{var e=L.useContext(ns);if(!e)throw new Error("The `useSlate` hook must be used inside the <Slate> component's context.");var{editor:r}=e;return r};function qo(){var e=hr(),r=L.useRef(!1),t=L.useRef(0),n=L.useCallback(()=>{if(!r.current){r.current=!0;var a=I.getWindow(e);a.cancelAnimationFrame(t.current),t.current=a.requestAnimationFrame(()=>{r.current=!1})}},[e]);return L.useEffect(()=>()=>cancelAnimationFrame(t.current),[]),{receivedUserInput:r,onUserInput:n}}var Ho=(e,r)=>{var t=[],n=()=>{t=[]},a=s=>{if(r.current){var i=s.filter(f=>Fn(e,f,s));t.push(...i)}};function u(){t.length>0&&(t.reverse().forEach(s=>{s.type!=="characterData"&&(s.removedNodes.forEach(i=>{s.target.insertBefore(i,s.nextSibling)}),s.addedNodes.forEach(i=>{s.target.removeChild(i)}))}),n())}return{registerMutations:a,restoreDOM:u,clear:n}},Vo={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0};class as extends L.Component{constructor(){super(...arguments),nr(this,"context",null),nr(this,"manager",null),nr(this,"mutationObserver",null)}observe(){var r,{node:t}=this.props;if(!t.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");(r=this.mutationObserver)===null||r===void 0||r.observe(t.current,Vo)}componentDidMount(){var{receivedUserInput:r}=this.props,t=this.context;this.manager=Ho(t,r),this.mutationObserver=new MutationObserver(this.manager.registerMutations),this.observe()}getSnapshotBeforeUpdate(){var r,t,n,a=(r=this.mutationObserver)===null||r===void 0?void 0:r.takeRecords();if(a!=null&&a.length){var u;(u=this.manager)===null||u===void 0||u.registerMutations(a)}return(t=this.mutationObserver)===null||t===void 0||t.disconnect(),(n=this.manager)===null||n===void 0||n.restoreDOM(),null}componentDidUpdate(){var r;(r=this.manager)===null||r===void 0||r.clear(),this.observe()}componentWillUnmount(){var r;(r=this.mutationObserver)===null||r===void 0||r.disconnect()}render(){return this.props.children}}nr(as,"contextType",Sn);var Ko=Le?as:e=>{var{children:r}=e;return re.createElement(re.Fragment,null,r)},Uo=L.createContext(!1),Go=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","scrollSelectionIntoView","style","as","disableDefaultStyles"],Yo=["text"];function qa(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function rr(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?qa(Object(t),!0).forEach(function(n){nr(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):qa(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var Xo=e=>re.createElement(re.Fragment,null,rs(e)),Rc=L.forwardRef((e,r)=>{var t=L.useCallback(C=>re.createElement(Jo,rr({},C)),[]),{autoFocus:n,decorate:a=Zo,onDOMBeforeInput:u,placeholder:s,readOnly:i=!1,renderElement:f,renderLeaf:l,renderPlaceholder:c=t,scrollSelectionIntoView:g=Qo,style:d={},as:D="div",disableDefaultStyles:m=!1}=e,h=Et(e,Go),o=Wo(),[E,b]=L.useState(!1),w=L.useRef(null),O=L.useRef([]),[j,G]=L.useState(),$=L.useRef(!1),{onUserInput:q,receivedUserInput:H}=qo(),[,z]=L.useReducer(C=>C+1,0);zu.set(o,z),hn.set(o,i);var M=L.useMemo(()=>({isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null,hasMarkPlaceholder:!1}),[]);L.useEffect(()=>{w.current&&n&&w.current.focus()},[n]);var F=L.useRef(),y=L.useMemo(()=>Ps(()=>{if(Pr.get(o)){y();return}var C=I.toDOMNode(o,o),k=C.getRootNode();if(!$.current&&Cr&&k instanceof ShadowRoot){$.current=!0;var T=di();T?document.execCommand("indent"):ie.deselect(o),$.current=!1;return}var R=F.current;if((Le||!I.isComposing(o))&&(!M.isUpdatingSelection||R!=null&&R.isFlushing())&&!M.isDraggingInternally){var ue=I.findDocumentOrShadowRoot(o),{activeElement:X}=ue,Be=I.toDOMNode(o,o),ce=Wr(ue);if(X===Be?(M.latestElement=X,vr.set(o,!0)):vr.delete(o),!ce)return ie.deselect(o);var{anchorNode:_,focusNode:Ee}=ce,be=I.hasEditableTarget(o,_)||I.isTargetInsideNonReadonlyVoid(o,_),Oe=I.hasTarget(o,Ee);if(be&&Oe){var Ce=I.toSlateRange(o,ce,{exactMatch:!1,suppressThrow:!0});Ce&&(!I.isComposing(o)&&!(R!=null&&R.hasPendingChanges())&&!(R!=null&&R.isFlushing())?ie.select(o,Ce):R==null||R.handleUserSelect(Ce))}i&&(!be||!Oe)&&ie.deselect(o)}},100),[o,i,M]),x=L.useMemo(()=>ys(y,0),[y]);F.current=yo({node:w,onDOMSelectionChange:y,scheduleOnDOMSelectionChange:x}),_r(()=>{var C,k,T;w.current&&(T=wn(w.current))?($u.set(o,T),vt.set(o,w.current),Er.set(o,w.current),Jr.set(w.current,o)):Er.delete(o);var{selection:R}=o,ue=I.findDocumentOrShadowRoot(o),X=Wr(ue);if(!(!X||!I.isFocused(o)||(C=F.current)!==null&&C!==void 0&&C.hasPendingAction())){var Be=be=>{var Oe=X.type!=="None";if(!(!R&&!Oe)){var Ce=X.focusNode,je;if(Or&&X.rangeCount>1){var Re=X.getRangeAt(0),ze=X.getRangeAt(X.rangeCount-1);Re.startContainer===Ce?je=ze.endContainer:je=Re.startContainer}else je=X.anchorNode;var ve=vt.get(o),We=!1;if(ve.contains(je)&&ve.contains(Ce)&&(We=!0),Oe&&We&&R&&!be){var qe=I.toSlateRange(o,X,{exactMatch:!0,suppressThrow:!0});if(qe&&N.equals(qe,R)){var oe;if(!M.hasMarkPlaceholder||(oe=je)!==null&&oe!==void 0&&(oe=oe.parentElement)!==null&&oe!==void 0&&oe.hasAttribute("data-slate-mark-placeholder"))return}}if(R&&!I.hasRange(o,R)){o.selection=I.toSlateRange(o,X,{exactMatch:!1,suppressThrow:!0});return}M.isUpdatingSelection=!0;var he=R&&I.toDOMRange(o,R);return he?(I.isComposing(o)&&!Le?X.collapseToEnd():N.isBackward(R)?X.setBaseAndExtent(he.endContainer,he.endOffset,he.startContainer,he.startOffset):X.setBaseAndExtent(he.startContainer,he.startOffset,he.endContainer,he.endOffset),g(o,he)):X.removeAllRanges(),he}};X.rangeCount<=1&&Be();var ce=((k=F.current)===null||k===void 0?void 0:k.isFlushing())==="action";if(!Le||!ce){setTimeout(()=>{M.isUpdatingSelection=!1});return}var _=null,Ee=requestAnimationFrame(()=>{if(ce){var be=Oe=>{try{var Ce=I.toDOMNode(o,o);Ce.focus(),Be(Oe)}catch{}};be(),_=setTimeout(()=>{be(!0),M.isUpdatingSelection=!1})}});return()=>{cancelAnimationFrame(Ee),_&&clearTimeout(_)}}});var S=L.useCallback(C=>{var k=I.toDOMNode(o,o),T=k.getRootNode();if($!=null&&$.current&&Cr&&T instanceof ShadowRoot){var R=C.getTargetRanges(),ue=R[0],X=new window.Range;X.setStart(ue.startContainer,ue.startOffset),X.setEnd(ue.endContainer,ue.endOffset);var Be=I.toSlateRange(o,X,{exactMatch:!1,suppressThrow:!1});ie.select(o,Be),C.preventDefault(),C.stopImmediatePropagation();return}if(q(),!i&&I.hasEditableTarget(o,C.target)&&!_o(C,u)){var ce;if(F.current)return F.current.handleDOMBeforeInput(C);x.flush(),y.flush();var{selection:_}=o,{inputType:Ee}=C,be=C.dataTransfer||C.data||void 0,Oe=Ee==="insertCompositionText"||Ee==="deleteCompositionText";if(Oe&&I.isComposing(o))return;var Ce=!1;if(Ee==="insertText"&&_&&N.isCollapsed(_)&&C.data&&C.data.length===1&&/[a-z ]/i.test(C.data)&&_.anchor.offset!==0&&(Ce=!0,o.marks&&(Ce=!1),!Pr.get(o))){var je,Re,{anchor:ze}=_,[ve,We]=I.toDOMPoint(o,ze),qe=(je=ve.parentElement)===null||je===void 0?void 0:je.closest("a"),oe=I.getWindow(o);if(Ce&&qe&&I.hasDOMNode(o,qe)){var he,Ze=oe==null?void 0:oe.document.createTreeWalker(qe,NodeFilter.SHOW_TEXT).lastChild();Ze===ve&&((he=Ze.textContent)===null||he===void 0?void 0:he.length)===We&&(Ce=!1)}if(Ce&&ve.parentElement&&(oe==null||(Re=oe.getComputedStyle(ve.parentElement))===null||Re===void 0?void 0:Re.whiteSpace)==="pre"){var Pe=B.above(o,{at:ze.path,match:_e=>Te.isElement(_e)&&B.isBlock(o,_e)});Pe&&U.string(Pe[0]).includes("	")&&(Ce=!1)}}if((!Ee.startsWith("delete")||Ee.startsWith("deleteBy"))&&!Pr.get(o)){var[Me]=C.getTargetRanges();if(Me){var Qe=I.toSlateRange(o,Me,{exactMatch:!1,suppressThrow:!1});if(!_||!N.equals(_,Qe)){Ce=!1;var Ne=!Oe&&o.selection&&B.rangeRef(o,o.selection);ie.select(o,Qe),Ne&&qr.set(o,Ne)}}}if(Oe)return;if(Ce||C.preventDefault(),_&&N.isExpanded(_)&&Ee.startsWith("delete")){var kr=Ee.endsWith("Backward")?"backward":"forward";B.deleteFragment(o,{direction:kr});return}switch(Ee){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":{B.deleteFragment(o);break}case"deleteContent":case"deleteContentForward":{B.deleteForward(o);break}case"deleteContentBackward":{B.deleteBackward(o);break}case"deleteEntireSoftLine":{B.deleteBackward(o,{unit:"line"}),B.deleteForward(o,{unit:"line"});break}case"deleteHardLineBackward":{B.deleteBackward(o,{unit:"block"});break}case"deleteSoftLineBackward":{B.deleteBackward(o,{unit:"line"});break}case"deleteHardLineForward":{B.deleteForward(o,{unit:"block"});break}case"deleteSoftLineForward":{B.deleteForward(o,{unit:"line"});break}case"deleteWordBackward":{B.deleteBackward(o,{unit:"word"});break}case"deleteWordForward":{B.deleteForward(o,{unit:"word"});break}case"insertLineBreak":B.insertSoftBreak(o);break;case"insertParagraph":{B.insertBreak(o);break}case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{Ee==="insertFromComposition"&&I.isComposing(o)&&(b(!1),Br.set(o,!1)),(be==null?void 0:be.constructor.name)==="DataTransfer"?I.insertData(o,be):typeof be=="string"&&(Ce?O.current.push(()=>B.insertText(o,be)):B.insertText(o,be));break}}var Dr=(ce=qr.get(o))===null||ce===void 0?void 0:ce.unref();qr.delete(o),Dr&&(!o.selection||!N.equals(o.selection,Dr))&&ie.select(o,Dr)}},[o,y,q,u,i,x]),ne=L.useCallback(C=>{C==null?(y.cancel(),x.cancel(),vt.delete(o),Er.delete(o),w.current&&or&&w.current.removeEventListener("beforeinput",S)):or&&C.addEventListener("beforeinput",S),w.current=C,typeof r=="function"?r(C):r&&(r.current=C)},[y,x,o,S,r]);_r(()=>{var C=I.getWindow(o);C.document.addEventListener("selectionchange",x);var k=()=>{M.isDraggingInternally=!1};return C.document.addEventListener("dragend",k),C.document.addEventListener("drop",k),()=>{C.document.removeEventListener("selectionchange",x),C.document.removeEventListener("dragend",k),C.document.removeEventListener("drop",k)}},[x,M]);var K=a([o,[]]),ge=s&&o.children.length===1&&Array.from(U.texts(o)).length===1&&U.string(o)===""&&!E,Q=L.useCallback(C=>{if(C&&ge){var k;G((k=C.getBoundingClientRect())===null||k===void 0?void 0:k.height)}else G(void 0)},[ge]);if(ge){var se=B.start(o,[]);K.push({[Rr]:!0,placeholder:s,onPlaceholderResize:Q,anchor:se,focus:se})}var{marks:me}=o;if(M.hasMarkPlaceholder=!1,o.selection&&N.isCollapsed(o.selection)&&me){var{anchor:le}=o.selection,ae=U.leaf(o,le.path),Se=Et(ae,Yo);if(!De.equals(ae,me,{loose:!0})){M.hasMarkPlaceholder=!0;var J=Object.fromEntries(Object.keys(Se).map(C=>[C,null]));K.push(rr(rr(rr({[Wu]:!0},J),me),{},{anchor:le,focus:le}))}}return L.useEffect(()=>{setTimeout(()=>{var{selection:C}=o;if(C){var{anchor:k}=C,T=U.leaf(o,k.path);if(me&&!De.equals(T,me,{loose:!0})){Je.set(o,me);return}}Je.delete(o)})}),re.createElement(ts.Provider,{value:i},re.createElement(Uo.Provider,{value:E},re.createElement(_u.Provider,{value:a},re.createElement(Ko,{node:w,receivedUserInput:H},re.createElement(D,rr(rr({role:i?void 0:"textbox","aria-multiline":i?void 0:!0},h),{},{spellCheck:or||!ct?h.spellCheck:!1,autoCorrect:or||!ct?h.autoCorrect:"false",autoCapitalize:or||!ct?h.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!i,zindex:-1,suppressContentEditableWarning:!0,ref:ne,style:rr(rr({},m?{}:rr({position:"relative",whiteSpace:"pre-wrap",wordWrap:"break-word"},j?{minHeight:j}:{})),d),onBeforeInput:L.useCallback(C=>{if(!or&&!i&&!Ie(C,h.onBeforeInput)&&I.hasSelectableTarget(o,C.target)&&(C.preventDefault(),!I.isComposing(o))){var k=C.data;B.insertText(o,k)}},[h.onBeforeInput,o,i]),onInput:L.useCallback(C=>{if(!Ie(C,h.onInput)){if(F.current){F.current.handleInput();return}for(var k of O.current)k();if(O.current=[],!I.isFocused(o)){var T=C.nativeEvent,R=o;if(T.inputType==="historyUndo"&&typeof R.undo=="function"){R.undo();return}if(T.inputType==="historyRedo"&&typeof R.redo=="function"){R.redo();return}}}},[h.onInput,o]),onBlur:L.useCallback(C=>{if(!(i||M.isUpdatingSelection||!I.hasSelectableTarget(o,C.target)||Ie(C,h.onBlur))){var k=I.findDocumentOrShadowRoot(o);if(M.latestElement!==k.activeElement){var{relatedTarget:T}=C,R=I.toDOMNode(o,o);if(T!==R&&!(Ge(T)&&T.hasAttribute("data-slate-spacer"))){if(T!=null&&gr(T)&&I.hasDOMNode(o,T)){var ue=I.toSlateNode(o,T);if(Te.isElement(ue)&&!o.isVoid(ue))return}if(Cr){var X=Wr(k);X==null||X.removeAllRanges()}vr.delete(o)}}}},[i,M.isUpdatingSelection,M.latestElement,o,h.onBlur]),onClick:L.useCallback(C=>{if(I.hasTarget(o,C.target)&&!Ie(C,h.onClick)&&gr(C.target)){var k=I.toSlateNode(o,C.target),T=I.findPath(o,k);if(!B.hasPath(o,T)||U.get(o,T)!==k)return;if(C.detail===ji&&T.length>=1){var R=T;if(!(Te.isElement(k)&&B.isBlock(o,k))){var ue,X=B.above(o,{match:Ce=>Te.isElement(Ce)&&B.isBlock(o,Ce),at:T});R=(ue=X==null?void 0:X[1])!==null&&ue!==void 0?ue:T.slice(0,1)}var Be=B.range(o,R);ie.select(o,Be);return}if(i)return;var ce=B.start(o,T),_=B.end(o,T),Ee=B.void(o,{at:ce}),be=B.void(o,{at:_});if(Ee&&be&&A.equals(Ee[1],be[1])){var Oe=B.range(o,ce);ie.select(o,Oe)}}},[o,h.onClick,i]),onCompositionEnd:L.useCallback(C=>{if(I.hasSelectableTarget(o,C.target)){var k;if(I.isComposing(o)&&Promise.resolve().then(()=>{b(!1),Br.set(o,!1)}),(k=F.current)===null||k===void 0||k.handleCompositionEnd(C),Ie(C,h.onCompositionEnd)||Le)return;if(!Cr&&!pi&&!Iu&&!Bi&&!Ci&&C.data){var T=Je.get(o);Je.delete(o),T!==void 0&&(sr.set(o,o.marks),o.marks=T),B.insertText(o,C.data);var R=sr.get(o);sr.delete(o),R!==void 0&&(o.marks=R)}}},[h.onCompositionEnd,o]),onCompositionUpdate:L.useCallback(C=>{I.hasSelectableTarget(o,C.target)&&!Ie(C,h.onCompositionUpdate)&&(I.isComposing(o)||(b(!0),Br.set(o,!0)))},[h.onCompositionUpdate,o]),onCompositionStart:L.useCallback(C=>{if(I.hasSelectableTarget(o,C.target)){var k;if((k=F.current)===null||k===void 0||k.handleCompositionStart(C),Ie(C,h.onCompositionStart)||Le)return;b(!0);var{selection:T}=o;if(T&&N.isExpanded(T)){B.deleteFragment(o);return}}},[h.onCompositionStart,o]),onCopy:L.useCallback(C=>{I.hasSelectableTarget(o,C.target)&&!Ie(C,h.onCopy)&&!Ha(C)&&(C.preventDefault(),I.setFragmentData(o,C.clipboardData,"copy"))},[h.onCopy,o]),onCut:L.useCallback(C=>{if(!i&&I.hasSelectableTarget(o,C.target)&&!Ie(C,h.onCut)&&!Ha(C)){C.preventDefault(),I.setFragmentData(o,C.clipboardData,"cut");var{selection:k}=o;if(k)if(N.isExpanded(k))B.deleteFragment(o);else{var T=U.parent(o,k.anchor.path);B.isVoid(o,T)&&ie.delete(o)}}},[i,o,h.onCut]),onDragOver:L.useCallback(C=>{if(I.hasTarget(o,C.target)&&!Ie(C,h.onDragOver)){var k=I.toSlateNode(o,C.target);Te.isElement(k)&&B.isVoid(o,k)&&C.preventDefault()}},[h.onDragOver,o]),onDragStart:L.useCallback(C=>{if(!i&&I.hasTarget(o,C.target)&&!Ie(C,h.onDragStart)){var k=I.toSlateNode(o,C.target),T=I.findPath(o,k),R=Te.isElement(k)&&B.isVoid(o,k)||B.void(o,{at:T,voids:!0});if(R){var ue=B.range(o,T);ie.select(o,ue)}M.isDraggingInternally=!0,I.setFragmentData(o,C.dataTransfer,"drag")}},[i,o,h.onDragStart,M]),onDrop:L.useCallback(C=>{if(!i&&I.hasTarget(o,C.target)&&!Ie(C,h.onDrop)){C.preventDefault();var k=o.selection,T=I.findEventRange(o,C),R=C.dataTransfer;ie.select(o,T),M.isDraggingInternally&&k&&!N.equals(k,T)&&!B.void(o,{at:T,voids:!0})&&ie.delete(o,{at:k}),I.insertData(o,R),I.isFocused(o)||I.focus(o)}},[i,o,h.onDrop,M]),onDragEnd:L.useCallback(C=>{!i&&M.isDraggingInternally&&h.onDragEnd&&I.hasTarget(o,C.target)&&h.onDragEnd(C)},[i,M,h,o]),onFocus:L.useCallback(C=>{if(!i&&!M.isUpdatingSelection&&I.hasEditableTarget(o,C.target)&&!Ie(C,h.onFocus)){var k=I.toDOMNode(o,o),T=I.findDocumentOrShadowRoot(o);if(M.latestElement=T.activeElement,Or&&C.target!==k){k.focus();return}vr.set(o,!0)}},[i,M,o,h.onFocus]),onKeyDown:L.useCallback(C=>{if(!i&&I.hasEditableTarget(o,C.target)){var k;(k=F.current)===null||k===void 0||k.handleKeyDown(C);var{nativeEvent:T}=C;if(I.isComposing(o)&&T.isComposing===!1&&(Br.set(o,!1),b(!1)),Ie(C,h.onKeyDown)||I.isComposing(o))return;var{selection:R}=o,ue=o.children[R!==null?R.focus.path[0]:0],X=Eu(U.string(ue))==="rtl";if(xe.isRedo(T)){C.preventDefault();var Be=o;typeof Be.redo=="function"&&Be.redo();return}if(xe.isUndo(T)){C.preventDefault();var ce=o;typeof ce.undo=="function"&&ce.undo();return}if(xe.isMoveLineBackward(T)){C.preventDefault(),ie.move(o,{unit:"line",reverse:!0});return}if(xe.isMoveLineForward(T)){C.preventDefault(),ie.move(o,{unit:"line"});return}if(xe.isExtendLineBackward(T)){C.preventDefault(),ie.move(o,{unit:"line",edge:"focus",reverse:!0});return}if(xe.isExtendLineForward(T)){C.preventDefault(),ie.move(o,{unit:"line",edge:"focus"});return}if(xe.isMoveBackward(T)){C.preventDefault(),R&&N.isCollapsed(R)?ie.move(o,{reverse:!X}):ie.collapse(o,{edge:X?"end":"start"});return}if(xe.isMoveForward(T)){C.preventDefault(),R&&N.isCollapsed(R)?ie.move(o,{reverse:X}):ie.collapse(o,{edge:X?"start":"end"});return}if(xe.isMoveWordBackward(T)){C.preventDefault(),R&&N.isExpanded(R)&&ie.collapse(o,{edge:"focus"}),ie.move(o,{unit:"word",reverse:!X});return}if(xe.isMoveWordForward(T)){C.preventDefault(),R&&N.isExpanded(R)&&ie.collapse(o,{edge:"focus"}),ie.move(o,{unit:"word",reverse:X});return}if(or){if((ku||Cr)&&R&&(xe.isDeleteBackward(T)||xe.isDeleteForward(T))&&N.isCollapsed(R)){var _=U.parent(o,R.anchor.path);if(Te.isElement(_)&&B.isVoid(o,_)&&(B.isInline(o,_)||B.isBlock(o,_))){C.preventDefault(),B.deleteBackward(o,{unit:"block"});return}}}else{if(xe.isBold(T)||xe.isItalic(T)||xe.isTransposeCharacter(T)){C.preventDefault();return}if(xe.isSoftBreak(T)){C.preventDefault(),B.insertSoftBreak(o);return}if(xe.isSplitBlock(T)){C.preventDefault(),B.insertBreak(o);return}if(xe.isDeleteBackward(T)){C.preventDefault(),R&&N.isExpanded(R)?B.deleteFragment(o,{direction:"backward"}):B.deleteBackward(o);return}if(xe.isDeleteForward(T)){C.preventDefault(),R&&N.isExpanded(R)?B.deleteFragment(o,{direction:"forward"}):B.deleteForward(o);return}if(xe.isDeleteLineBackward(T)){C.preventDefault(),R&&N.isExpanded(R)?B.deleteFragment(o,{direction:"backward"}):B.deleteBackward(o,{unit:"line"});return}if(xe.isDeleteLineForward(T)){C.preventDefault(),R&&N.isExpanded(R)?B.deleteFragment(o,{direction:"forward"}):B.deleteForward(o,{unit:"line"});return}if(xe.isDeleteWordBackward(T)){C.preventDefault(),R&&N.isExpanded(R)?B.deleteFragment(o,{direction:"backward"}):B.deleteBackward(o,{unit:"word"});return}if(xe.isDeleteWordForward(T)){C.preventDefault(),R&&N.isExpanded(R)?B.deleteFragment(o,{direction:"forward"}):B.deleteForward(o,{unit:"word"});return}}}},[i,o,h.onKeyDown]),onPaste:L.useCallback(C=>{!i&&I.hasEditableTarget(o,C.target)&&!Ie(C,h.onPaste)&&(!or||ii(C.nativeEvent)||Cr)&&(C.preventDefault(),I.insertData(o,C.clipboardData))},[i,o,h.onPaste])}),re.createElement(Xo,{decorations:K,node:o,renderElement:f,renderPlaceholder:c,renderLeaf:l,selection:o.selection}))))))}),Jo=e=>{var{attributes:r,children:t}=e;return re.createElement("span",rr({},r),t,Le&&re.createElement("br",null))},Zo=()=>[],Qo=(e,r)=>{if(r.getBoundingClientRect&&(!e.selection||e.selection&&N.isCollapsed(e.selection))){var t=r.startContainer.parentElement;t.getBoundingClientRect=r.getBoundingClientRect.bind(r),Rs(t,{scrollMode:"if-needed"}),delete t.getBoundingClientRect}},Ie=(e,r)=>{if(!r)return!1;var t=r(e);return t??(e.isDefaultPrevented()||e.isPropagationStopped())},Ha=e=>gr(e.target)&&(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement),_o=(e,r)=>{if(!r)return!1;var t=r(e);return t??e.defaultPrevented},el=L.createContext(!1),rl=L.createContext({});function tl(e){var r=L.useRef([]).current,t=L.useRef({editor:e}).current,n=L.useCallback(u=>{t.editor=u,r.forEach(s=>s(u))},[r,t]),a=L.useMemo(()=>({getSlate:()=>t.editor,addEventListener:u=>(r.push(u),()=>{r.splice(r.indexOf(u),1)})}),[r,t]);return{selectorContext:a,onChange:n}}var us=parseInt(re.version.split(".")[0],10),nl=["editor","children","onChange","onSelectionChange","onValueChange","initialValue"],jc=e=>{var{editor:r,children:t,onChange:n,onSelectionChange:a,onValueChange:u,initialValue:s}=e,i=Et(e,nl),[f,l]=re.useState(()=>{if(!U.isNodeList(s))throw new Error("[Slate] initialValue is invalid! Expected a list of elements but got: ".concat(ke.stringify(s)));if(!B.isEditor(r))throw new Error("[Slate] editor is invalid! You passed: ".concat(ke.stringify(r)));return r.children=s,Object.assign(r,i),{v:0,editor:r}}),{selectorContext:c,onChange:g}=tl(r),d=L.useCallback(h=>{var o;switch(n&&n(r.children),h==null||(o=h.operation)===null||o===void 0?void 0:o.type){case"set_selection":a==null||a(r.selection);break;default:u==null||u(r.children)}l(E=>({v:E.v+1,editor:r})),g(r)},[r,g,n,a,u]);L.useEffect(()=>(Dn.set(r,d),()=>{Dn.set(r,()=>{})}),[r,d]);var[D,m]=L.useState(I.isFocused(r));return L.useEffect(()=>{m(I.isFocused(r))},[r]),_r(()=>{var h=()=>m(I.isFocused(r));return us>=17?(document.addEventListener("focusin",h),document.addEventListener("focusout",h),()=>{document.removeEventListener("focusin",h),document.removeEventListener("focusout",h)}):(document.addEventListener("focus",h,!0),document.addEventListener("blur",h,!0),()=>{document.removeEventListener("focus",h,!0),document.removeEventListener("blur",h,!0)})},[]),re.createElement(rl.Provider,{value:c},re.createElement(ns.Provider,{value:f},re.createElement(Sn.Provider,{value:f.editor},re.createElement(el.Provider,{value:D},t))))},Nc=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x-slate-fragment",n=r;n=Ri(n,t);var{onChange:a}=n;return n.onChange=u=>{var s=us<18?co.unstable_batchedUpdates:i=>i();s(()=>{a(u)})},n},al={transform(e,r){var{current:t,affinity:n}=e;if(t!=null){var a=p.transform(t,r,{affinity:n});e.current=a,a==null&&e.unref()}}},ul={transform(e,r){var{current:t,affinity:n}=e;if(t!=null){var a=fe.transform(t,r,{affinity:n});e.current=a,a==null&&e.unref()}}},sl={transform(e,r){var{current:t,affinity:n}=e;if(t!=null){var a=P.transform(t,r,{affinity:n});e.current=a,a==null&&e.unref()}}},bt=new WeakMap,At=new WeakMap,Vr=new WeakMap,ss=new WeakMap,Va=new WeakMap,Ka=new WeakMap,Ua=new WeakMap,p={ancestors(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:t=!1}=r,n=p.levels(e,r);return t?n=n.slice(1):n=n.slice(0,-1),n},common(e,r){for(var t=[],n=0;n<e.length&&n<r.length;n++){var a=e[n],u=r[n];if(a!==u)break;t.push(a)}return t},compare(e,r){for(var t=Math.min(e.length,r.length),n=0;n<t;n++){if(e[n]<r[n])return-1;if(e[n]>r[n])return 1}return 0},endsAfter(e,r){var t=e.length-1,n=e.slice(0,t),a=r.slice(0,t),u=e[t],s=r[t];return p.equals(n,a)&&u>s},endsAt(e,r){var t=e.length,n=e.slice(0,t),a=r.slice(0,t);return p.equals(n,a)},endsBefore(e,r){var t=e.length-1,n=e.slice(0,t),a=r.slice(0,t),u=e[t],s=r[t];return p.equals(n,a)&&u<s},equals(e,r){return e.length===r.length&&e.every((t,n)=>t===r[n])},hasPrevious(e){return e[e.length-1]>0},isAfter(e,r){return p.compare(e,r)===1},isAncestor(e,r){return e.length<r.length&&p.compare(e,r)===0},isBefore(e,r){return p.compare(e,r)===-1},isChild(e,r){return e.length===r.length+1&&p.compare(e,r)===0},isCommon(e,r){return e.length<=r.length&&p.compare(e,r)===0},isDescendant(e,r){return e.length>r.length&&p.compare(e,r)===0},isParent(e,r){return e.length+1===r.length&&p.compare(e,r)===0},isPath(e){return Array.isArray(e)&&(e.length===0||typeof e[0]=="number")},isSibling(e,r){if(e.length!==r.length)return!1;var t=e.slice(0,-1),n=r.slice(0,-1),a=e[e.length-1],u=r[r.length-1];return a!==u&&p.equals(t,n)},levels(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:t=!1}=r,n=[],a=0;a<=e.length;a++)n.push(e.slice(0,a));return t&&n.reverse(),n},next(e){if(e.length===0)throw new Error("Cannot get the next path of a root path [".concat(e,"], because it has no next index."));var r=e[e.length-1];return e.slice(0,-1).concat(r+1)},operationCanTransformPath(e){switch(e.type){case"insert_node":case"remove_node":case"merge_node":case"split_node":case"move_node":return!0;default:return!1}},parent(e){if(e.length===0)throw new Error("Cannot get the parent path of the root path [".concat(e,"]."));return e.slice(0,-1)},previous(e){if(e.length===0)throw new Error("Cannot get the previous path of a root path [".concat(e,"], because it has no previous index."));var r=e[e.length-1];if(r<=0)throw new Error("Cannot get the previous path of a first child path [".concat(e,"] because it would result in a negative index."));return e.slice(0,-1).concat(r-1)},relative(e,r){if(!p.isAncestor(r,e)&&!p.equals(e,r))throw new Error("Cannot get the relative path of [".concat(e,"] inside ancestor [").concat(r,"], because it is not above or equal to the path."));return e.slice(r.length)},transform(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return null;var n=[...e],{affinity:a="forward"}=t;if(e.length===0)return n;switch(r.type){case"insert_node":{var{path:u}=r;(p.equals(u,n)||p.endsBefore(u,n)||p.isAncestor(u,n))&&(n[u.length-1]+=1);break}case"remove_node":{var{path:s}=r;if(p.equals(s,n)||p.isAncestor(s,n))return null;p.endsBefore(s,n)&&(n[s.length-1]-=1);break}case"merge_node":{var{path:i,position:f}=r;p.equals(i,n)||p.endsBefore(i,n)?n[i.length-1]-=1:p.isAncestor(i,n)&&(n[i.length-1]-=1,n[i.length]+=f);break}case"split_node":{var{path:l,position:c}=r;if(p.equals(l,n)){if(a==="forward")n[n.length-1]+=1;else if(a!=="backward")return null}else p.endsBefore(l,n)?n[l.length-1]+=1:p.isAncestor(l,n)&&e[l.length]>=c&&(n[l.length-1]+=1,n[l.length]-=c);break}case"move_node":{var{path:g,newPath:d}=r;if(p.equals(g,d))return n;if(p.isAncestor(g,n)||p.equals(g,n)){var D=d.slice();return p.endsBefore(g,d)&&g.length<d.length&&(D[g.length-1]-=1),D.concat(n.slice(g.length))}else p.isSibling(g,d)&&(p.isAncestor(d,n)||p.equals(d,n))?p.endsBefore(g,n)?n[g.length-1]-=1:n[g.length-1]+=1:p.endsBefore(d,n)||p.equals(d,n)||p.isAncestor(d,n)?(p.endsBefore(g,n)&&(n[g.length-1]-=1),n[d.length-1]+=1):p.endsBefore(g,n)&&(p.equals(d,n)&&(n[d.length-1]+=1),n[g.length-1]-=1);break}}return n}};function et(e){"@babel/helpers - typeof";return et=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},et(e)}function il(e,r){if(et(e)!=="object"||e===null)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var n=t.call(e,r||"default");if(et(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function ol(e){var r=il(e,"string");return et(r)==="symbol"?r:String(r)}function $e(e,r,t){return r=ol(r),r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Ga(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function $r(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Ga(Object(t),!0).forEach(function(n){$e(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ga(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var ll=(e,r,t)=>{switch(t.type){case"insert_node":{var{path:n,node:a}=t,u=W.parent(e,n),s=n[n.length-1];if(s>u.children.length)throw new Error('Cannot apply an "insert_node" operation at path ['.concat(n,"] because the destination is past the end of the node."));if(u.children.splice(s,0,a),r)for(var[i,f]of P.points(r))r[f]=fe.transform(i,t);break}case"insert_text":{var{path:l,offset:c,text:g}=t;if(g.length===0)break;var d=W.leaf(e,l),D=d.text.slice(0,c),m=d.text.slice(c);if(d.text=D+g+m,r)for(var[h,o]of P.points(r))r[o]=fe.transform(h,t);break}case"merge_node":{var{path:E}=t,b=W.get(e,E),w=p.previous(E),O=W.get(e,w),j=W.parent(e,E),G=E[E.length-1];if(Y.isText(b)&&Y.isText(O))O.text+=b.text;else if(!Y.isText(b)&&!Y.isText(O))O.children.push(...b.children);else throw new Error('Cannot apply a "merge_node" operation at path ['.concat(E,"] to nodes of different interfaces: ").concat(Ve.stringify(b)," ").concat(Ve.stringify(O)));if(j.children.splice(G,1),r)for(var[$,q]of P.points(r))r[q]=fe.transform($,t);break}case"move_node":{var{path:H,newPath:z}=t;if(p.isAncestor(H,z))throw new Error("Cannot move a path [".concat(H,"] to new path [").concat(z,"] because the destination is inside itself."));var M=W.get(e,H),F=W.parent(e,H),y=H[H.length-1];F.children.splice(y,1);var x=p.transform(H,t),S=W.get(e,p.parent(x)),ne=x[x.length-1];if(S.children.splice(ne,0,M),r)for(var[K,ge]of P.points(r))r[ge]=fe.transform(K,t);break}case"remove_node":{var{path:Q}=t,se=Q[Q.length-1],me=W.parent(e,Q);if(me.children.splice(se,1),r)for(var[le,ae]of P.points(r)){var Se=fe.transform(le,t);if(r!=null&&Se!=null)r[ae]=Se;else{var J=void 0,C=void 0;for(var[k,T]of W.texts(e))if(p.compare(T,Q)===-1)J=[k,T];else{C=[k,T];break}var R=!1;J&&C&&(p.equals(C[1],Q)?R=!p.hasPrevious(C[1]):R=p.common(J[1],Q).length<p.common(C[1],Q).length),J&&!R?(le.path=J[1],le.offset=J[0].text.length):C?(le.path=C[1],le.offset=0):r=null}}break}case"remove_text":{var{path:ue,offset:X,text:Be}=t;if(Be.length===0)break;var ce=W.leaf(e,ue),_=ce.text.slice(0,X),Ee=ce.text.slice(X+Be.length);if(ce.text=_+Ee,r)for(var[be,Oe]of P.points(r))r[Oe]=fe.transform(be,t);break}case"set_node":{var{path:Ce,properties:je,newProperties:Re}=t;if(Ce.length===0)throw new Error("Cannot set properties on the root node!");var ze=W.get(e,Ce);for(var ve in Re){if(ve==="children"||ve==="text")throw new Error('Cannot set the "'.concat(ve,'" property of nodes!'));var We=Re[ve];We==null?delete ze[ve]:ze[ve]=We}for(var qe in je)Re.hasOwnProperty(qe)||delete ze[qe];break}case"set_selection":{var{newProperties:oe}=t;if(oe==null)r=oe;else{if(r==null){if(!P.isRange(oe))throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(Ve.stringify(oe)," when there is no current selection."));r=$r({},oe)}for(var he in oe){var Ze=oe[he];if(Ze==null){if(he==="anchor"||he==="focus")throw new Error('Cannot remove the "'.concat(he,'" selection property'));delete r[he]}else r[he]=Ze}}break}case"split_node":{var{path:Pe,position:Me,properties:Qe}=t;if(Pe.length===0)throw new Error('Cannot apply a "split_node" operation at path ['.concat(Pe,"] because the root node cannot be split."));var Ne=W.get(e,Pe),kr=W.parent(e,Pe),Dr=Pe[Pe.length-1],_e;if(Y.isText(Ne)){var Pt=Ne.text.slice(0,Me),St=Ne.text.slice(Me);Ne.text=Pt,_e=$r($r({},Qe),{},{text:St})}else{var Tt=Ne.children.slice(0,Me),Rt=Ne.children.slice(Me);Ne.children=Tt,_e=$r($r({},Qe),{},{children:Rt})}if(kr.children.splice(Dr+1,0,_e),r)for(var[jt,Nt]of P.points(r))r[Nt]=fe.transform(jt,t);break}}return r},fl={transform(e,r){e.children=pt(e.children);var t=e.selection&&pt(e.selection);try{t=ll(e,t,r)}finally{e.children=Ct(e.children),t?e.selection=dr(t)?Ct(t):t:e.selection=null}}},cl={insertNodes(e,r,t){e.insertNodes(r,t)},liftNodes(e,r){e.liftNodes(r)},mergeNodes(e,r){e.mergeNodes(r)},moveNodes(e,r){e.moveNodes(r)},removeNodes(e,r){e.removeNodes(r)},setNodes(e,r,t){e.setNodes(r,t)},splitNodes(e,r){e.splitNodes(r)},unsetNodes(e,r,t){e.unsetNodes(r,t)},unwrapNodes(e,r){e.unwrapNodes(r)},wrapNodes(e,r,t){e.wrapNodes(r,t)}},vl={collapse(e,r){e.collapse(r)},deselect(e){e.deselect()},move(e,r){e.move(r)},select(e,r){e.select(r)},setPoint(e,r,t){e.setPoint(r,t)},setSelection(e,r){e.setSelection(r)}},is=(e,r)=>{for(var t in e){var n=e[t],a=r[t];if(de(n)&&de(a)){if(!is(n,a))return!1}else if(Array.isArray(n)&&Array.isArray(a)){if(n.length!==a.length)return!1;for(var u=0;u<n.length;u++)if(n[u]!==a[u])return!1}else if(n!==a)return!1}for(var s in r)if(e[s]===void 0&&r[s]!==void 0)return!1;return!0};function dl(e,r){if(e==null)return{};var t={},n=Object.keys(e),a,u;for(u=0;u<n.length;u++)a=n[u],!(r.indexOf(a)>=0)&&(t[a]=e[a]);return t}function ir(e,r){if(e==null)return{};var t=dl(e,r),n,a;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(a=0;a<u.length;a++)n=u[a],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(t[n]=e[n])}return t}var gl=["anchor","focus"];function Ya(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function hl(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Ya(Object(t),!0).forEach(function(n){$e(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ya(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var P={edges(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:t=!1}=r,{anchor:n,focus:a}=e;return P.isBackward(e)===t?[n,a]:[a,n]},end(e){var[,r]=P.edges(e);return r},equals(e,r){return fe.equals(e.anchor,r.anchor)&&fe.equals(e.focus,r.focus)},surrounds(e,r){var t=P.intersection(e,r);return t?P.equals(t,r):!1},includes(e,r){if(P.isRange(r)){if(P.includes(e,r.anchor)||P.includes(e,r.focus))return!0;var[t,n]=P.edges(e),[a,u]=P.edges(r);return fe.isBefore(t,a)&&fe.isAfter(n,u)}var[s,i]=P.edges(e),f=!1,l=!1;return fe.isPoint(r)?(f=fe.compare(r,s)>=0,l=fe.compare(r,i)<=0):(f=p.compare(r,s.path)>=0,l=p.compare(r,i.path)<=0),f&&l},intersection(e,r){var t=ir(e,gl),[n,a]=P.edges(e),[u,s]=P.edges(r),i=fe.isBefore(n,u)?u:n,f=fe.isBefore(a,s)?a:s;return fe.isBefore(f,i)?null:hl({anchor:i,focus:f},t)},isBackward(e){var{anchor:r,focus:t}=e;return fe.isAfter(r,t)},isCollapsed(e){var{anchor:r,focus:t}=e;return fe.equals(r,t)},isExpanded(e){return!P.isCollapsed(e)},isForward(e){return!P.isBackward(e)},isRange(e){return de(e)&&fe.isPoint(e.anchor)&&fe.isPoint(e.focus)},*points(e){yield[e.anchor,"anchor"],yield[e.focus,"focus"]},start(e){var[r]=P.edges(e);return r},transform(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Nr(e,n=>{if(n===null)return null;var{affinity:a="inward"}=t,u,s;if(a==="inward"){var i=P.isCollapsed(n);P.isForward(n)?(u="forward",s=i?u:"backward"):(u="backward",s=i?u:"forward")}else a==="outward"?P.isForward(n)?(u="backward",s="forward"):(u="forward",s="backward"):(u=a,s=a);var f=fe.transform(n.anchor,r,{affinity:u}),l=fe.transform(n.focus,r,{affinity:s});if(!f||!l)return null;n.anchor=f,n.focus=l})}},Xa=e=>de(e)&&W.isNodeList(e.children)&&!v.isEditor(e),Z={isAncestor(e){return de(e)&&W.isNodeList(e.children)},isElement:Xa,isElementList(e){return Array.isArray(e)&&e.every(r=>Z.isElement(r))},isElementProps(e){return e.children!==void 0},isElementType:function(r,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"type";return Xa(r)&&r[n]===t},matches(e,r){for(var t in r)if(t!=="children"&&e[t]!==r[t])return!1;return!0}},Dl=["children"],ml=["text"],Ja=new WeakMap,W={ancestor(e,r){var t=W.get(e,r);if(Y.isText(t))throw new Error("Cannot get the ancestor node at path [".concat(r,"] because it refers to a text node instead: ").concat(Ve.stringify(t)));return t},ancestors(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var n of p.ancestors(r,t)){var a=W.ancestor(e,n),u=[a,n];yield u}}()},child(e,r){if(Y.isText(e))throw new Error("Cannot get the child of a text node: ".concat(Ve.stringify(e)));var t=e.children[r];if(t==null)throw new Error("Cannot get child at index `".concat(r,"` in node: ").concat(Ve.stringify(e)));return t},children(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var{reverse:n=!1}=t,a=W.ancestor(e,r),{children:u}=a,s=n?u.length-1:0;n?s>=0:s<u.length;){var i=W.child(a,s),f=r.concat(s);yield[i,f],s=n?s-1:s+1}}()},common(e,r,t){var n=p.common(r,t),a=W.get(e,n);return[a,n]},descendant(e,r){var t=W.get(e,r);if(v.isEditor(t))throw new Error("Cannot get the descendant node at path [".concat(r,"] because it refers to the root editor node instead: ").concat(Ve.stringify(t)));return t},descendants(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[t,n]of W.nodes(e,r))n.length!==0&&(yield[t,n])}()},elements(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[t,n]of W.nodes(e,r))Z.isElement(t)&&(yield[t,n])}()},extractProps(e){if(Z.isAncestor(e)){var r=ir(e,Dl);return r}else{var r=ir(e,ml);return r}},first(e,r){for(var t=r.slice(),n=W.get(e,t);n&&!(Y.isText(n)||n.children.length===0);)n=n.children[0],t.push(0);return[n,t]},fragment(e,r){if(Y.isText(e))throw new Error("Cannot get a fragment starting from a root text node: ".concat(Ve.stringify(e)));var t=Nr({children:e.children},n=>{var[a,u]=P.edges(r),s=W.nodes(n,{reverse:!0,pass:d=>{var[,D]=d;return!P.includes(r,D)}});for(var[,i]of s){if(!P.includes(r,i)){var f=W.parent(n,i),l=i[i.length-1];f.children.splice(l,1)}if(p.equals(i,u.path)){var c=W.leaf(n,i);c.text=c.text.slice(0,u.offset)}if(p.equals(i,a.path)){var g=W.leaf(n,i);g.text=g.text.slice(a.offset)}}v.isEditor(n)&&(n.selection=null)});return t.children},get(e,r){var t=W.getIf(e,r);if(t===void 0)throw new Error("Cannot find a descendant at path [".concat(r,"] in node: ").concat(Ve.stringify(e)));return t},getIf(e,r){for(var t=e,n=0;n<r.length;n++){var a=r[n];if(Y.isText(t)||!t.children[a])return;t=t.children[a]}return t},has(e,r){for(var t=e,n=0;n<r.length;n++){var a=r[n];if(Y.isText(t)||!t.children[a])return!1;t=t.children[a]}return!0},isNode(e){return Y.isText(e)||Z.isElement(e)||v.isEditor(e)},isNodeList(e){if(!Array.isArray(e))return!1;var r=Ja.get(e);if(r!==void 0)return r;var t=e.every(n=>W.isNode(n));return Ja.set(e,t),t},last(e,r){for(var t=r.slice(),n=W.get(e,t);n&&!(Y.isText(n)||n.children.length===0);){var a=n.children.length-1;n=n.children[a],t.push(a)}return[n,t]},leaf(e,r){var t=W.get(e,r);if(!Y.isText(t))throw new Error("Cannot get the leaf node at path [".concat(r,"] because it refers to a non-leaf node: ").concat(Ve.stringify(t)));return t},levels(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var n of p.levels(r,t)){var a=W.get(e,n);yield[a,n]}}()},matches(e,r){return Z.isElement(e)&&Z.isElementProps(r)&&Z.matches(e,r)||Y.isText(e)&&Y.isTextProps(r)&&Y.matches(e,r)},nodes(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var{pass:t,reverse:n=!1}=r,{from:a=[],to:u}=r,s=new Set,i=[],f=e;!(u&&(n?p.isBefore(i,u):p.isAfter(i,u)));){if(s.has(f)||(yield[f,i]),!s.has(f)&&!Y.isText(f)&&f.children.length!==0&&(t==null||t([f,i])===!1)){s.add(f);var l=n?f.children.length-1:0;p.isAncestor(i,a)&&(l=a[i.length]),i=i.concat(l),f=W.get(e,i);continue}if(i.length===0)break;if(!n){var c=p.next(i);if(W.has(e,c)){i=c,f=W.get(e,i);continue}}if(n&&i[i.length-1]!==0){var g=p.previous(i);i=g,f=W.get(e,i);continue}i=p.parent(i),f=W.get(e,i),s.add(f)}}()},parent(e,r){var t=p.parent(r),n=W.get(e,t);if(Y.isText(n))throw new Error("Cannot get the parent of path [".concat(r,"] because it does not exist in the root."));return n},string(e){return Y.isText(e)?e.text:e.children.map(W.string).join("")},texts(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[t,n]of W.nodes(e,r))Y.isText(t)&&(yield[t,n])}()}};function Za(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function ye(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Za(Object(t),!0).forEach(function(n){$e(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Za(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var zr={isNodeOperation(e){return zr.isOperation(e)&&e.type.endsWith("_node")},isOperation(e){if(!de(e))return!1;switch(e.type){case"insert_node":return p.isPath(e.path)&&W.isNode(e.node);case"insert_text":return typeof e.offset=="number"&&typeof e.text=="string"&&p.isPath(e.path);case"merge_node":return typeof e.position=="number"&&p.isPath(e.path)&&de(e.properties);case"move_node":return p.isPath(e.path)&&p.isPath(e.newPath);case"remove_node":return p.isPath(e.path)&&W.isNode(e.node);case"remove_text":return typeof e.offset=="number"&&typeof e.text=="string"&&p.isPath(e.path);case"set_node":return p.isPath(e.path)&&de(e.properties)&&de(e.newProperties);case"set_selection":return e.properties===null&&P.isRange(e.newProperties)||e.newProperties===null&&P.isRange(e.properties)||de(e.properties)&&de(e.newProperties);case"split_node":return p.isPath(e.path)&&typeof e.position=="number"&&de(e.properties);default:return!1}},isOperationList(e){return Array.isArray(e)&&e.every(r=>zr.isOperation(r))},isSelectionOperation(e){return zr.isOperation(e)&&e.type.endsWith("_selection")},isTextOperation(e){return zr.isOperation(e)&&e.type.endsWith("_text")},inverse(e){switch(e.type){case"insert_node":return ye(ye({},e),{},{type:"remove_node"});case"insert_text":return ye(ye({},e),{},{type:"remove_text"});case"merge_node":return ye(ye({},e),{},{type:"split_node",path:p.previous(e.path)});case"move_node":{var{newPath:r,path:t}=e;if(p.equals(r,t))return e;if(p.isSibling(t,r))return ye(ye({},e),{},{path:r,newPath:t});var n=p.transform(t,e),a=p.transform(p.next(t),e);return ye(ye({},e),{},{path:n,newPath:a})}case"remove_node":return ye(ye({},e),{},{type:"insert_node"});case"remove_text":return ye(ye({},e),{},{type:"insert_text"});case"set_node":{var{properties:u,newProperties:s}=e;return ye(ye({},e),{},{properties:s,newProperties:u})}case"set_selection":{var{properties:i,newProperties:f}=e;return i==null?ye(ye({},e),{},{properties:f,newProperties:null}):f==null?ye(ye({},e),{},{properties:null,newProperties:i}):ye(ye({},e),{},{properties:f,newProperties:i})}case"split_node":return ye(ye({},e),{},{type:"merge_node",path:p.next(e.path)})}}},Qa=new WeakMap,pl=e=>{var r=Qa.get(e);if(r!==void 0)return r;if(!de(e))return!1;var t=typeof e.addMark=="function"&&typeof e.apply=="function"&&typeof e.deleteFragment=="function"&&typeof e.insertBreak=="function"&&typeof e.insertSoftBreak=="function"&&typeof e.insertFragment=="function"&&typeof e.insertNode=="function"&&typeof e.insertText=="function"&&typeof e.isElementReadOnly=="function"&&typeof e.isInline=="function"&&typeof e.isSelectable=="function"&&typeof e.isVoid=="function"&&typeof e.normalizeNode=="function"&&typeof e.onChange=="function"&&typeof e.removeMark=="function"&&typeof e.getDirtyPaths=="function"&&(e.marks===null||de(e.marks))&&(e.selection===null||P.isRange(e.selection))&&W.isNodeList(e.children)&&zr.isOperationList(e.operations);return Qa.set(e,t),t},v={above(e,r){return e.above(r)},addMark(e,r,t){e.addMark(r,t)},after(e,r,t){return e.after(r,t)},before(e,r,t){return e.before(r,t)},deleteBackward(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:t="character"}=r;e.deleteBackward(t)},deleteForward(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:t="character"}=r;e.deleteForward(t)},deleteFragment(e,r){e.deleteFragment(r)},edges(e,r){return e.edges(r)},elementReadOnly(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.elementReadOnly(r)},end(e,r){return e.end(r)},first(e,r){return e.first(r)},fragment(e,r){return e.fragment(r)},hasBlocks(e,r){return e.hasBlocks(r)},hasInlines(e,r){return e.hasInlines(r)},hasPath(e,r){return e.hasPath(r)},hasTexts(e,r){return e.hasTexts(r)},insertBreak(e){e.insertBreak()},insertFragment(e,r,t){e.insertFragment(r,t)},insertNode(e,r){e.insertNode(r)},insertSoftBreak(e){e.insertSoftBreak()},insertText(e,r){e.insertText(r)},isBlock(e,r){return e.isBlock(r)},isEdge(e,r,t){return e.isEdge(r,t)},isEditor(e){return pl(e)},isElementReadOnly(e,r){return e.isElementReadOnly(r)},isEmpty(e,r){return e.isEmpty(r)},isEnd(e,r,t){return e.isEnd(r,t)},isInline(e,r){return e.isInline(r)},isNormalizing(e){return e.isNormalizing()},isSelectable(e,r){return e.isSelectable(r)},isStart(e,r,t){return e.isStart(r,t)},isVoid(e,r){return e.isVoid(r)},last(e,r){return e.last(r)},leaf(e,r,t){return e.leaf(r,t)},levels(e,r){return e.levels(r)},marks(e){return e.getMarks()},next(e,r){return e.next(r)},node(e,r,t){return e.node(r,t)},nodes(e,r){return e.nodes(r)},normalize(e,r){e.normalize(r)},parent(e,r,t){return e.parent(r,t)},path(e,r,t){return e.path(r,t)},pathRef(e,r,t){return e.pathRef(r,t)},pathRefs(e){return e.pathRefs()},point(e,r,t){return e.point(r,t)},pointRef(e,r,t){return e.pointRef(r,t)},pointRefs(e){return e.pointRefs()},positions(e,r){return e.positions(r)},previous(e,r){return e.previous(r)},range(e,r,t){return e.range(r,t)},rangeRef(e,r,t){return e.rangeRef(r,t)},rangeRefs(e){return e.rangeRefs()},removeMark(e,r){e.removeMark(r)},setNormalizing(e,r){e.setNormalizing(r)},start(e,r){return e.start(r)},string(e,r,t){return e.string(r,t)},unhangRange(e,r,t){return e.unhangRange(r,t)},void(e,r){return e.void(r)},withoutNormalizing(e,r){e.withoutNormalizing(r)},shouldMergeNodesRemovePrevNode:(e,r,t)=>e.shouldMergeNodesRemovePrevNode(r,t)},Cl={isSpan(e){return Array.isArray(e)&&e.length===2&&e.every(p.isPath)}};function _a(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function eu(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?_a(Object(t),!0).forEach(function(n){$e(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_a(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var fe={compare(e,r){var t=p.compare(e.path,r.path);return t===0?e.offset<r.offset?-1:e.offset>r.offset?1:0:t},isAfter(e,r){return fe.compare(e,r)===1},isBefore(e,r){return fe.compare(e,r)===-1},equals(e,r){return e.offset===r.offset&&p.equals(e.path,r.path)},isPoint(e){return de(e)&&typeof e.offset=="number"&&p.isPath(e.path)},transform(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Nr(e,n=>{if(n===null)return null;var{affinity:a="forward"}=t,{path:u,offset:s}=n;switch(r.type){case"insert_node":case"move_node":{n.path=p.transform(u,r,t);break}case"insert_text":{p.equals(r.path,u)&&(r.offset<s||r.offset===s&&a==="forward")&&(n.offset+=r.text.length);break}case"merge_node":{p.equals(r.path,u)&&(n.offset+=r.position),n.path=p.transform(u,r,t);break}case"remove_text":{p.equals(r.path,u)&&r.offset<=s&&(n.offset-=Math.min(s-r.offset,r.text.length));break}case"remove_node":{if(p.equals(r.path,u)||p.isAncestor(r.path,u))return null;n.path=p.transform(u,r,t);break}case"split_node":{if(p.equals(r.path,u)){if(r.position===s&&a==null)return null;(r.position<s||r.position===s&&a==="forward")&&(n.offset-=r.position,n.path=p.transform(u,r,eu(eu({},t),{},{affinity:"forward"})))}else n.path=p.transform(u,r,t);break}}})}},ru=void 0,Ve={setScrubber(e){ru=e},stringify(e){return JSON.stringify(e,ru)}},Bl=["text"],El=["anchor","focus"];function tu(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function ur(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?tu(Object(t),!0).forEach(function(n){$e(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):tu(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var Y={equals(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{loose:n=!1}=t;function a(u){var s=ir(u,Bl);return s}return is(n?a(e):e,n?a(r):r)},isText(e){return de(e)&&typeof e.text=="string"},isTextList(e){return Array.isArray(e)&&e.every(r=>Y.isText(r))},isTextProps(e){return e.text!==void 0},matches(e,r){for(var t in r)if(t!=="text"&&(!e.hasOwnProperty(t)||e[t]!==r[t]))return!1;return!0},decorations(e,r){var t=[ur({},e)];for(var n of r){var a=ir(n,El),[u,s]=P.edges(n),i=[],f=0,l=u.offset,c=s.offset;for(var g of t){var{length:d}=g.text,D=f;if(f+=d,l<=D&&f<=c){Object.assign(g,a),i.push(g);continue}if(l!==c&&(l===f||c===D)||l>f||c<D||c===D&&D!==0){i.push(g);continue}var m=g,h=void 0,o=void 0;if(c<f){var E=c-D;o=ur(ur({},m),{},{text:m.text.slice(E)}),m=ur(ur({},m),{},{text:m.text.slice(0,E)})}if(l>D){var b=l-D;h=ur(ur({},m),{},{text:m.text.slice(0,b)}),m=ur(ur({},m),{},{text:m.text.slice(b)})}Object.assign(m,a),h&&i.push(h),i.push(m),o&&i.push(o)}t=i}return t}},Tn=e=>e.selection?e.selection:e.children.length>0?v.end(e,[]):[0],Ir=(e,r)=>{var[t]=v.node(e,r);return n=>n===t},Rn=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=!t,a=t?Ol(r):r,u=ee.None,s=ee.None,i=0,f=null,l=null;for(var c of a){var g=c.codePointAt(0);if(!g)break;var d=$l(c,g);if([u,s]=n?[s,d]:[d,u],xr(u,ee.ZWJ)&&xr(s,ee.ExtPict)&&(n?f=nu(r.substring(0,i)):f=nu(r.substring(0,r.length-i)),!f)||xr(u,ee.RI)&&xr(s,ee.RI)&&(l!==null?l=!l:n?l=!0:l=Vl(r.substring(0,r.length-i)),!l)||u!==ee.None&&s!==ee.None&&Wl(u,s))break;i+=c.length}return i||1},bl=/\s/,Al=/[\u002B\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,wl=/['\u2018\u2019]/,Fl=function(r){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=0,a=!1;r.length>0;){var u=Rn(r,t),[s,i]=jn(r,u,t);if(yl(s,i,t))a=!0,n+=u;else if(!a)n+=u;else break;r=i}return n},jn=(e,r,t)=>{if(t){var n=e.length-r;return[e.slice(n,e.length),e.slice(0,n)]}return[e.slice(0,r),e.slice(r)]},yl=function e(r,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(bl.test(r))return!1;if(wl.test(r)){var a=Rn(t,n),[u,s]=jn(t,a,n);if(e(u,s,n))return!0}return!Al.test(r)},Ol=function*(r){for(var t=r.length-1,n=0;n<r.length;n++){var a=r.charAt(t-n);if(Pl(a.charCodeAt(0))){var u=r.charAt(t-n-1);if(xl(u.charCodeAt(0))){yield u+a,n++;continue}}yield a}},xl=e=>e>=55296&&e<=56319,Pl=e=>e>=56320&&e<=57343,ee;(function(e){e[e.None=0]="None",e[e.Extend=1]="Extend",e[e.ZWJ=2]="ZWJ",e[e.RI=4]="RI",e[e.Prepend=8]="Prepend",e[e.SpacingMark=16]="SpacingMark",e[e.L=32]="L",e[e.V=64]="V",e[e.T=128]="T",e[e.LV=256]="LV",e[e.LVT=512]="LVT",e[e.ExtPict=1024]="ExtPict",e[e.Any=2048]="Any"})(ee||(ee={}));var Sl=/^(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])$/,Tl=/^(?:[\u0600-\u0605\u06DD\u070F\u0890\u0891\u08E2\u0D4E]|\uD804[\uDCBD\uDCCD\uDDC2\uDDC3]|\uD806[\uDD3F\uDD41\uDE3A\uDE84-\uDE89]|\uD807\uDD46)$/,Rl=/^(?:[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E\u094F\u0982\u0983\u09BF\u09C0\u09C7\u09C8\u09CB\u09CC\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB\u0ACC\u0B02\u0B03\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0C01-\u0C03\u0C41-\u0C44\u0C82\u0C83\u0CBE\u0CC0\u0CC1\u0CC3\u0CC4\u0CC7\u0CC8\u0CCA\u0CCB\u0D02\u0D03\u0D3F\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D82\u0D83\u0DD0\u0DD1\u0DD8-\u0DDE\u0DF2\u0DF3\u0E33\u0EB3\u0F3E\u0F3F\u0F7F\u1031\u103B\u103C\u1056\u1057\u1084\u1715\u1734\u17B6\u17BE-\u17C5\u17C7\u17C8\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1A19\u1A1A\u1A55\u1A57\u1A6D-\u1A72\u1B04\u1B3B\u1B3D-\u1B41\u1B43\u1B44\u1B82\u1BA1\u1BA6\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1C24-\u1C2B\u1C34\u1C35\u1CE1\u1CF7\uA823\uA824\uA827\uA880\uA881\uA8B4-\uA8C3\uA952\uA953\uA983\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9C0\uAA2F\uAA30\uAA33\uAA34\uAA4D\uAAEB\uAAEE\uAAEF\uAAF5\uABE3\uABE4\uABE6\uABE7\uABE9\uABEA\uABEC]|\uD804[\uDC00\uDC02\uDC82\uDCB0-\uDCB2\uDCB7\uDCB8\uDD2C\uDD45\uDD46\uDD82\uDDB3-\uDDB5\uDDBF\uDDC0\uDDCE\uDE2C-\uDE2E\uDE32\uDE33\uDE35\uDEE0-\uDEE2\uDF02\uDF03\uDF3F\uDF41-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF62\uDF63]|\uD805[\uDC35-\uDC37\uDC40\uDC41\uDC45\uDCB1\uDCB2\uDCB9\uDCBB\uDCBC\uDCBE\uDCC1\uDDB0\uDDB1\uDDB8-\uDDBB\uDDBE\uDE30-\uDE32\uDE3B\uDE3C\uDE3E\uDEAC\uDEAE\uDEAF\uDEB6\uDF26]|\uD806[\uDC2C-\uDC2E\uDC38\uDD31-\uDD35\uDD37\uDD38\uDD3D\uDD40\uDD42\uDDD1-\uDDD3\uDDDC-\uDDDF\uDDE4\uDE39\uDE57\uDE58\uDE97]|\uD807[\uDC2F\uDC3E\uDCA9\uDCB1\uDCB4\uDD8A-\uDD8E\uDD93\uDD94\uDD96\uDEF5\uDEF6]|\uD81B[\uDF51-\uDF87\uDFF0\uDFF1]|\uD834[\uDD66\uDD6D])$/,jl=/^[\u1100-\u115F\uA960-\uA97C]$/,Nl=/^[\u1160-\u11A7\uD7B0-\uD7C6]$/,Ml=/^[\u11A8-\u11FF\uD7CB-\uD7FB]$/,Il=/^[\uAC00\uAC1C\uAC38\uAC54\uAC70\uAC8C\uACA8\uACC4\uACE0\uACFC\uAD18\uAD34\uAD50\uAD6C\uAD88\uADA4\uADC0\uADDC\uADF8\uAE14\uAE30\uAE4C\uAE68\uAE84\uAEA0\uAEBC\uAED8\uAEF4\uAF10\uAF2C\uAF48\uAF64\uAF80\uAF9C\uAFB8\uAFD4\uAFF0\uB00C\uB028\uB044\uB060\uB07C\uB098\uB0B4\uB0D0\uB0EC\uB108\uB124\uB140\uB15C\uB178\uB194\uB1B0\uB1CC\uB1E8\uB204\uB220\uB23C\uB258\uB274\uB290\uB2AC\uB2C8\uB2E4\uB300\uB31C\uB338\uB354\uB370\uB38C\uB3A8\uB3C4\uB3E0\uB3FC\uB418\uB434\uB450\uB46C\uB488\uB4A4\uB4C0\uB4DC\uB4F8\uB514\uB530\uB54C\uB568\uB584\uB5A0\uB5BC\uB5D8\uB5F4\uB610\uB62C\uB648\uB664\uB680\uB69C\uB6B8\uB6D4\uB6F0\uB70C\uB728\uB744\uB760\uB77C\uB798\uB7B4\uB7D0\uB7EC\uB808\uB824\uB840\uB85C\uB878\uB894\uB8B0\uB8CC\uB8E8\uB904\uB920\uB93C\uB958\uB974\uB990\uB9AC\uB9C8\uB9E4\uBA00\uBA1C\uBA38\uBA54\uBA70\uBA8C\uBAA8\uBAC4\uBAE0\uBAFC\uBB18\uBB34\uBB50\uBB6C\uBB88\uBBA4\uBBC0\uBBDC\uBBF8\uBC14\uBC30\uBC4C\uBC68\uBC84\uBCA0\uBCBC\uBCD8\uBCF4\uBD10\uBD2C\uBD48\uBD64\uBD80\uBD9C\uBDB8\uBDD4\uBDF0\uBE0C\uBE28\uBE44\uBE60\uBE7C\uBE98\uBEB4\uBED0\uBEEC\uBF08\uBF24\uBF40\uBF5C\uBF78\uBF94\uBFB0\uBFCC\uBFE8\uC004\uC020\uC03C\uC058\uC074\uC090\uC0AC\uC0C8\uC0E4\uC100\uC11C\uC138\uC154\uC170\uC18C\uC1A8\uC1C4\uC1E0\uC1FC\uC218\uC234\uC250\uC26C\uC288\uC2A4\uC2C0\uC2DC\uC2F8\uC314\uC330\uC34C\uC368\uC384\uC3A0\uC3BC\uC3D8\uC3F4\uC410\uC42C\uC448\uC464\uC480\uC49C\uC4B8\uC4D4\uC4F0\uC50C\uC528\uC544\uC560\uC57C\uC598\uC5B4\uC5D0\uC5EC\uC608\uC624\uC640\uC65C\uC678\uC694\uC6B0\uC6CC\uC6E8\uC704\uC720\uC73C\uC758\uC774\uC790\uC7AC\uC7C8\uC7E4\uC800\uC81C\uC838\uC854\uC870\uC88C\uC8A8\uC8C4\uC8E0\uC8FC\uC918\uC934\uC950\uC96C\uC988\uC9A4\uC9C0\uC9DC\uC9F8\uCA14\uCA30\uCA4C\uCA68\uCA84\uCAA0\uCABC\uCAD8\uCAF4\uCB10\uCB2C\uCB48\uCB64\uCB80\uCB9C\uCBB8\uCBD4\uCBF0\uCC0C\uCC28\uCC44\uCC60\uCC7C\uCC98\uCCB4\uCCD0\uCCEC\uCD08\uCD24\uCD40\uCD5C\uCD78\uCD94\uCDB0\uCDCC\uCDE8\uCE04\uCE20\uCE3C\uCE58\uCE74\uCE90\uCEAC\uCEC8\uCEE4\uCF00\uCF1C\uCF38\uCF54\uCF70\uCF8C\uCFA8\uCFC4\uCFE0\uCFFC\uD018\uD034\uD050\uD06C\uD088\uD0A4\uD0C0\uD0DC\uD0F8\uD114\uD130\uD14C\uD168\uD184\uD1A0\uD1BC\uD1D8\uD1F4\uD210\uD22C\uD248\uD264\uD280\uD29C\uD2B8\uD2D4\uD2F0\uD30C\uD328\uD344\uD360\uD37C\uD398\uD3B4\uD3D0\uD3EC\uD408\uD424\uD440\uD45C\uD478\uD494\uD4B0\uD4CC\uD4E8\uD504\uD520\uD53C\uD558\uD574\uD590\uD5AC\uD5C8\uD5E4\uD600\uD61C\uD638\uD654\uD670\uD68C\uD6A8\uD6C4\uD6E0\uD6FC\uD718\uD734\uD750\uD76C\uD788]$/,kl=/^[\uAC01-\uAC1B\uAC1D-\uAC37\uAC39-\uAC53\uAC55-\uAC6F\uAC71-\uAC8B\uAC8D-\uACA7\uACA9-\uACC3\uACC5-\uACDF\uACE1-\uACFB\uACFD-\uAD17\uAD19-\uAD33\uAD35-\uAD4F\uAD51-\uAD6B\uAD6D-\uAD87\uAD89-\uADA3\uADA5-\uADBF\uADC1-\uADDB\uADDD-\uADF7\uADF9-\uAE13\uAE15-\uAE2F\uAE31-\uAE4B\uAE4D-\uAE67\uAE69-\uAE83\uAE85-\uAE9F\uAEA1-\uAEBB\uAEBD-\uAED7\uAED9-\uAEF3\uAEF5-\uAF0F\uAF11-\uAF2B\uAF2D-\uAF47\uAF49-\uAF63\uAF65-\uAF7F\uAF81-\uAF9B\uAF9D-\uAFB7\uAFB9-\uAFD3\uAFD5-\uAFEF\uAFF1-\uB00B\uB00D-\uB027\uB029-\uB043\uB045-\uB05F\uB061-\uB07B\uB07D-\uB097\uB099-\uB0B3\uB0B5-\uB0CF\uB0D1-\uB0EB\uB0ED-\uB107\uB109-\uB123\uB125-\uB13F\uB141-\uB15B\uB15D-\uB177\uB179-\uB193\uB195-\uB1AF\uB1B1-\uB1CB\uB1CD-\uB1E7\uB1E9-\uB203\uB205-\uB21F\uB221-\uB23B\uB23D-\uB257\uB259-\uB273\uB275-\uB28F\uB291-\uB2AB\uB2AD-\uB2C7\uB2C9-\uB2E3\uB2E5-\uB2FF\uB301-\uB31B\uB31D-\uB337\uB339-\uB353\uB355-\uB36F\uB371-\uB38B\uB38D-\uB3A7\uB3A9-\uB3C3\uB3C5-\uB3DF\uB3E1-\uB3FB\uB3FD-\uB417\uB419-\uB433\uB435-\uB44F\uB451-\uB46B\uB46D-\uB487\uB489-\uB4A3\uB4A5-\uB4BF\uB4C1-\uB4DB\uB4DD-\uB4F7\uB4F9-\uB513\uB515-\uB52F\uB531-\uB54B\uB54D-\uB567\uB569-\uB583\uB585-\uB59F\uB5A1-\uB5BB\uB5BD-\uB5D7\uB5D9-\uB5F3\uB5F5-\uB60F\uB611-\uB62B\uB62D-\uB647\uB649-\uB663\uB665-\uB67F\uB681-\uB69B\uB69D-\uB6B7\uB6B9-\uB6D3\uB6D5-\uB6EF\uB6F1-\uB70B\uB70D-\uB727\uB729-\uB743\uB745-\uB75F\uB761-\uB77B\uB77D-\uB797\uB799-\uB7B3\uB7B5-\uB7CF\uB7D1-\uB7EB\uB7ED-\uB807\uB809-\uB823\uB825-\uB83F\uB841-\uB85B\uB85D-\uB877\uB879-\uB893\uB895-\uB8AF\uB8B1-\uB8CB\uB8CD-\uB8E7\uB8E9-\uB903\uB905-\uB91F\uB921-\uB93B\uB93D-\uB957\uB959-\uB973\uB975-\uB98F\uB991-\uB9AB\uB9AD-\uB9C7\uB9C9-\uB9E3\uB9E5-\uB9FF\uBA01-\uBA1B\uBA1D-\uBA37\uBA39-\uBA53\uBA55-\uBA6F\uBA71-\uBA8B\uBA8D-\uBAA7\uBAA9-\uBAC3\uBAC5-\uBADF\uBAE1-\uBAFB\uBAFD-\uBB17\uBB19-\uBB33\uBB35-\uBB4F\uBB51-\uBB6B\uBB6D-\uBB87\uBB89-\uBBA3\uBBA5-\uBBBF\uBBC1-\uBBDB\uBBDD-\uBBF7\uBBF9-\uBC13\uBC15-\uBC2F\uBC31-\uBC4B\uBC4D-\uBC67\uBC69-\uBC83\uBC85-\uBC9F\uBCA1-\uBCBB\uBCBD-\uBCD7\uBCD9-\uBCF3\uBCF5-\uBD0F\uBD11-\uBD2B\uBD2D-\uBD47\uBD49-\uBD63\uBD65-\uBD7F\uBD81-\uBD9B\uBD9D-\uBDB7\uBDB9-\uBDD3\uBDD5-\uBDEF\uBDF1-\uBE0B\uBE0D-\uBE27\uBE29-\uBE43\uBE45-\uBE5F\uBE61-\uBE7B\uBE7D-\uBE97\uBE99-\uBEB3\uBEB5-\uBECF\uBED1-\uBEEB\uBEED-\uBF07\uBF09-\uBF23\uBF25-\uBF3F\uBF41-\uBF5B\uBF5D-\uBF77\uBF79-\uBF93\uBF95-\uBFAF\uBFB1-\uBFCB\uBFCD-\uBFE7\uBFE9-\uC003\uC005-\uC01F\uC021-\uC03B\uC03D-\uC057\uC059-\uC073\uC075-\uC08F\uC091-\uC0AB\uC0AD-\uC0C7\uC0C9-\uC0E3\uC0E5-\uC0FF\uC101-\uC11B\uC11D-\uC137\uC139-\uC153\uC155-\uC16F\uC171-\uC18B\uC18D-\uC1A7\uC1A9-\uC1C3\uC1C5-\uC1DF\uC1E1-\uC1FB\uC1FD-\uC217\uC219-\uC233\uC235-\uC24F\uC251-\uC26B\uC26D-\uC287\uC289-\uC2A3\uC2A5-\uC2BF\uC2C1-\uC2DB\uC2DD-\uC2F7\uC2F9-\uC313\uC315-\uC32F\uC331-\uC34B\uC34D-\uC367\uC369-\uC383\uC385-\uC39F\uC3A1-\uC3BB\uC3BD-\uC3D7\uC3D9-\uC3F3\uC3F5-\uC40F\uC411-\uC42B\uC42D-\uC447\uC449-\uC463\uC465-\uC47F\uC481-\uC49B\uC49D-\uC4B7\uC4B9-\uC4D3\uC4D5-\uC4EF\uC4F1-\uC50B\uC50D-\uC527\uC529-\uC543\uC545-\uC55F\uC561-\uC57B\uC57D-\uC597\uC599-\uC5B3\uC5B5-\uC5CF\uC5D1-\uC5EB\uC5ED-\uC607\uC609-\uC623\uC625-\uC63F\uC641-\uC65B\uC65D-\uC677\uC679-\uC693\uC695-\uC6AF\uC6B1-\uC6CB\uC6CD-\uC6E7\uC6E9-\uC703\uC705-\uC71F\uC721-\uC73B\uC73D-\uC757\uC759-\uC773\uC775-\uC78F\uC791-\uC7AB\uC7AD-\uC7C7\uC7C9-\uC7E3\uC7E5-\uC7FF\uC801-\uC81B\uC81D-\uC837\uC839-\uC853\uC855-\uC86F\uC871-\uC88B\uC88D-\uC8A7\uC8A9-\uC8C3\uC8C5-\uC8DF\uC8E1-\uC8FB\uC8FD-\uC917\uC919-\uC933\uC935-\uC94F\uC951-\uC96B\uC96D-\uC987\uC989-\uC9A3\uC9A5-\uC9BF\uC9C1-\uC9DB\uC9DD-\uC9F7\uC9F9-\uCA13\uCA15-\uCA2F\uCA31-\uCA4B\uCA4D-\uCA67\uCA69-\uCA83\uCA85-\uCA9F\uCAA1-\uCABB\uCABD-\uCAD7\uCAD9-\uCAF3\uCAF5-\uCB0F\uCB11-\uCB2B\uCB2D-\uCB47\uCB49-\uCB63\uCB65-\uCB7F\uCB81-\uCB9B\uCB9D-\uCBB7\uCBB9-\uCBD3\uCBD5-\uCBEF\uCBF1-\uCC0B\uCC0D-\uCC27\uCC29-\uCC43\uCC45-\uCC5F\uCC61-\uCC7B\uCC7D-\uCC97\uCC99-\uCCB3\uCCB5-\uCCCF\uCCD1-\uCCEB\uCCED-\uCD07\uCD09-\uCD23\uCD25-\uCD3F\uCD41-\uCD5B\uCD5D-\uCD77\uCD79-\uCD93\uCD95-\uCDAF\uCDB1-\uCDCB\uCDCD-\uCDE7\uCDE9-\uCE03\uCE05-\uCE1F\uCE21-\uCE3B\uCE3D-\uCE57\uCE59-\uCE73\uCE75-\uCE8F\uCE91-\uCEAB\uCEAD-\uCEC7\uCEC9-\uCEE3\uCEE5-\uCEFF\uCF01-\uCF1B\uCF1D-\uCF37\uCF39-\uCF53\uCF55-\uCF6F\uCF71-\uCF8B\uCF8D-\uCFA7\uCFA9-\uCFC3\uCFC5-\uCFDF\uCFE1-\uCFFB\uCFFD-\uD017\uD019-\uD033\uD035-\uD04F\uD051-\uD06B\uD06D-\uD087\uD089-\uD0A3\uD0A5-\uD0BF\uD0C1-\uD0DB\uD0DD-\uD0F7\uD0F9-\uD113\uD115-\uD12F\uD131-\uD14B\uD14D-\uD167\uD169-\uD183\uD185-\uD19F\uD1A1-\uD1BB\uD1BD-\uD1D7\uD1D9-\uD1F3\uD1F5-\uD20F\uD211-\uD22B\uD22D-\uD247\uD249-\uD263\uD265-\uD27F\uD281-\uD29B\uD29D-\uD2B7\uD2B9-\uD2D3\uD2D5-\uD2EF\uD2F1-\uD30B\uD30D-\uD327\uD329-\uD343\uD345-\uD35F\uD361-\uD37B\uD37D-\uD397\uD399-\uD3B3\uD3B5-\uD3CF\uD3D1-\uD3EB\uD3ED-\uD407\uD409-\uD423\uD425-\uD43F\uD441-\uD45B\uD45D-\uD477\uD479-\uD493\uD495-\uD4AF\uD4B1-\uD4CB\uD4CD-\uD4E7\uD4E9-\uD503\uD505-\uD51F\uD521-\uD53B\uD53D-\uD557\uD559-\uD573\uD575-\uD58F\uD591-\uD5AB\uD5AD-\uD5C7\uD5C9-\uD5E3\uD5E5-\uD5FF\uD601-\uD61B\uD61D-\uD637\uD639-\uD653\uD655-\uD66F\uD671-\uD68B\uD68D-\uD6A7\uD6A9-\uD6C3\uD6C5-\uD6DF\uD6E1-\uD6FB\uD6FD-\uD717\uD719-\uD733\uD735-\uD74F\uD751-\uD76B\uD76D-\uD787\uD789-\uD7A3]$/,Ll=/^(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])$/,$l=(e,r)=>{var t=ee.Any;return e.search(Sl)!==-1&&(t|=ee.Extend),r===8205&&(t|=ee.ZWJ),r>=127462&&r<=127487&&(t|=ee.RI),e.search(Tl)!==-1&&(t|=ee.Prepend),e.search(Rl)!==-1&&(t|=ee.SpacingMark),e.search(jl)!==-1&&(t|=ee.L),e.search(Nl)!==-1&&(t|=ee.V),e.search(Ml)!==-1&&(t|=ee.T),e.search(Il)!==-1&&(t|=ee.LV),e.search(kl)!==-1&&(t|=ee.LVT),e.search(Ll)!==-1&&(t|=ee.ExtPict),t};function xr(e,r){return(e&r)!==0}var zl=[[ee.L,ee.L|ee.V|ee.LV|ee.LVT],[ee.LV|ee.V,ee.V|ee.T],[ee.LVT|ee.T,ee.T],[ee.Any,ee.Extend|ee.ZWJ],[ee.Any,ee.SpacingMark],[ee.Prepend,ee.Any],[ee.ZWJ,ee.ExtPict],[ee.RI,ee.RI]];function Wl(e,r){return zl.findIndex(t=>xr(e,t[0])&&xr(r,t[1]))===-1}var ql=/(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])*\u200D$/,nu=e=>e.search(ql)!==-1,Hl=/(?:\uD83C[\uDDE6-\uDDFF])+$/g,Vl=e=>{var r=e.match(Hl);if(r===null)return!1;var t=r[0].length/2;return t%2===1},Kl={delete(e,r){e.delete(r)},insertFragment(e,r,t){e.insertFragment(r,t)},insertText(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};v.withoutNormalizing(e,()=>{var{voids:n=!1}=t,{at:a=Tn(e)}=t;if(p.isPath(a)&&(a=v.range(e,a)),P.isRange(a))if(P.isCollapsed(a))a=a.anchor;else{var u=P.end(a);if(!n&&v.void(e,{at:u}))return;var s=P.start(a),i=v.pointRef(e,s),f=v.pointRef(e,u);V.delete(e,{at:a,voids:n});var l=i.unref(),c=f.unref();a=l||c,V.setSelection(e,{anchor:a,focus:a})}if(!(!n&&v.void(e,{at:a})||v.elementReadOnly(e,{at:a}))){var{path:g,offset:d}=a;r.length>0&&e.apply({type:"insert_text",path:g,offset:d,text:r})}})}};function au(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function ot(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?au(Object(t),!0).forEach(function(n){$e(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):au(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var V=ot(ot(ot(ot({},fl),cl),vl),Kl),gt=new WeakMap,Ul=e=>gt.get(e)||!1,Gl=(e,r,t)=>{var n=gt.get(e)||!1;gt.set(e,!0);try{r(),t()}finally{gt.set(e,n)}};function os(e,r,t){var n=bt.get(e)||[],a=At.get(e)||new Set,u,s,i=g=>{if(g){var d=g.join(",");s.has(d)||(s.add(d),u.push(g))}};if(t){u=[],s=new Set;for(var f of n){var l=t(f);i(l)}}else u=n,s=a;for(var c of r)i(c);bt.set(e,u),At.set(e,s)}var Yl=(e,r)=>{for(var t of v.pathRefs(e))al.transform(t,r);for(var n of v.pointRefs(e))ul.transform(n,r);for(var a of v.rangeRefs(e))sl.transform(a,r);if(!Ul(e)){var u=p.operationCanTransformPath(r)?s=>p.transform(s,r):void 0;os(e,e.getDirtyPaths(r),u)}V.transform(e,r),e.operations.push(r),v.normalize(e,{operation:r}),r.type==="set_selection"&&(e.marks=null),Vr.get(e)||(Vr.set(e,!0),Promise.resolve().then(()=>{Vr.set(e,!1),e.onChange({operation:r}),e.operations=[]}))},Xl=(e,r)=>{switch(r.type){case"insert_text":case"remove_text":case"set_node":{var{path:t}=r;return p.levels(t)}case"insert_node":{var{node:n,path:a}=r,u=p.levels(a),s=Y.isText(n)?[]:Array.from(W.nodes(n),z=>{var[,M]=z;return a.concat(M)});return[...u,...s]}case"merge_node":{var{path:i}=r,f=p.ancestors(i),l=p.previous(i);return[...f,l]}case"move_node":{var{path:c,newPath:g}=r;if(p.equals(c,g))return[];var d=[],D=[];for(var m of p.ancestors(c)){var h=p.transform(m,r);d.push(h)}for(var o of p.ancestors(g)){var E=p.transform(o,r);D.push(E)}var b=D[D.length-1],w=g[g.length-1],O=b.concat(w);return[...d,...D,O]}case"remove_node":{var{path:j}=r,G=p.ancestors(j);return[...G]}case"split_node":{var{path:$}=r,q=p.levels($),H=p.next($);return[...q,H]}default:return[]}},Jl=e=>{var{selection:r}=e;return r?W.fragment(e,r):[]},Zl=(e,r)=>{var[t,n]=r;if(!Y.isText(t)){if(Z.isElement(t)&&t.children.length===0){var a={text:""};V.insertNodes(e,a,{at:n.concat(0),voids:!0});return}for(var u=v.isEditor(t)?!1:Z.isElement(t)&&(e.isInline(t)||t.children.length===0||Y.isText(t.children[0])||e.isInline(t.children[0])),s=0,i=0;i<t.children.length;i++,s++){var f=W.get(e,n);if(!Y.isText(f)){var l=f.children[s],c=f.children[s-1],g=i===t.children.length-1,d=Y.isText(l)||Z.isElement(l)&&e.isInline(l);if(d!==u)V.removeNodes(e,{at:n.concat(s),voids:!0}),s--;else if(Z.isElement(l)){if(e.isInline(l)){if(c==null||!Y.isText(c)){var D={text:""};V.insertNodes(e,D,{at:n.concat(s),voids:!0}),s++}else if(g){var m={text:""};V.insertNodes(e,m,{at:n.concat(s+1),voids:!0}),s++}}}else{if(!Y.isText(l)&&!("children"in l)){var h=l;h.children=[]}c!=null&&Y.isText(c)&&(Y.equals(l,c,{loose:!0})?(V.mergeNodes(e,{at:n.concat(s),voids:!0}),s--):c.text===""?(V.removeNodes(e,{at:n.concat(s-1),voids:!0}),s--):l.text===""&&(V.removeNodes(e,{at:n.concat(s),voids:!0}),s--))}}}}},Ql=(e,r)=>{var{iteration:t,initialDirtyPathsLength:n}=r,a=n*42;if(t>a)throw new Error("Could not completely normalize the editor after ".concat(a," iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state."));return!0},_l=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{voids:n=!1,mode:a="lowest",at:u=r.selection,match:s}=t;if(u){var i=v.path(r,u),f=a==="lowest";for(var[l,c]of v.levels(r,{at:i,voids:n,match:s,reverse:f}))if(!Y.isText(l)){if(P.isRange(u)){if(p.isAncestor(c,u.anchor.path)&&p.isAncestor(c,u.focus.path))return[l,c]}else if(!p.equals(i,c))return[l,c]}}};function uu(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function su(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?uu(Object(t),!0).forEach(function(n){$e(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):uu(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var ef=(e,r,t)=>{var{selection:n}=e;if(n){var a=(g,d)=>{if(!Y.isText(g))return!1;var[D,m]=v.parent(e,d);return!e.isVoid(D)||e.markableVoid(D)},u=P.isExpanded(n),s=!1;if(!u){var[i,f]=v.node(e,n);if(i&&a(i,f)){var[l]=v.parent(e,f);s=l&&e.markableVoid(l)}}if(u||s)V.setNodes(e,{[r]:t},{match:a,split:!0,voids:!0});else{var c=su(su({},v.marks(e)||{}),{},{[r]:t});e.marks=c,Vr.get(e)||e.onChange()}}};function iu(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function ou(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?iu(Object(t),!0).forEach(function(n){$e(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):iu(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var rf=function(r,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=v.point(r,t,{edge:"end"}),u=v.end(r,[]),s={anchor:a,focus:u},{distance:i=1}=n,f=0,l;for(var c of v.positions(r,ou(ou({},n),{},{at:s}))){if(f>i)break;f!==0&&(l=c),f++}return l};function lu(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function fu(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?lu(Object(t),!0).forEach(function(n){$e(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):lu(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var tf=function(r,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=v.start(r,[]),u=v.point(r,t,{edge:"start"}),s={anchor:a,focus:u},{distance:i=1}=n,f=0,l;for(var c of v.positions(r,fu(fu({},n),{},{at:s,reverse:!0}))){if(f>i)break;f!==0&&(l=c),f++}return l},nf=(e,r)=>{var{selection:t}=e;t&&P.isCollapsed(t)&&V.delete(e,{unit:r,reverse:!0})},af=(e,r)=>{var{selection:t}=e;t&&P.isCollapsed(t)&&V.delete(e,{unit:r})},uf=function(r){var{direction:t="forward"}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:n}=r;n&&P.isExpanded(n)&&V.delete(r,{reverse:t==="backward"})},sf=(e,r)=>[v.start(e,r),v.end(e,r)];function cu(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function vu(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?cu(Object(t),!0).forEach(function(n){$e(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):cu(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var of=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return v.above(r,vu(vu({},t),{},{match:n=>Z.isElement(n)&&v.isElementReadOnly(r,n)}))},lf=(e,r)=>v.point(e,r,{edge:"end"}),ff=(e,r)=>{var t=v.path(e,r,{edge:"start"});return v.node(e,t)},cf=(e,r)=>{var t=v.range(e,r);return W.fragment(e,t)};function du(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function gu(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?du(Object(t),!0).forEach(function(n){$e(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):du(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var vf=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return v.above(r,gu(gu({},t),{},{match:n=>Z.isElement(n)&&v.isVoid(r,n)}))},df=(e,r)=>r.children.some(t=>Z.isElement(t)&&v.isBlock(e,t)),gf=(e,r)=>r.children.some(t=>Y.isText(t)||v.isInline(e,t)),hf=(e,r)=>W.has(e,r),Df=(e,r)=>r.children.every(t=>Y.isText(t)),mf=e=>{V.splitNodes(e,{always:!0})},pf=(e,r,t)=>{V.insertNodes(e,r,t)},Cf=e=>{V.splitNodes(e,{always:!0})};function hu(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Bf(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?hu(Object(t),!0).forEach(function(n){$e(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):hu(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var Ef=function(r,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:a,marks:u}=r;if(a){if(u){var s=Bf({text:t},u);V.insertNodes(r,s,{at:n.at,voids:n.voids})}else V.insertText(r,t,n);r.marks=null}},bf=(e,r)=>!e.isInline(r),Af=(e,r,t)=>v.isStart(e,r,t)||v.isEnd(e,r,t),wf=(e,r)=>{var{children:t}=r,[n]=t;return t.length===0||t.length===1&&Y.isText(n)&&n.text===""&&!e.isVoid(r)},Ff=(e,r,t)=>{var n=v.end(e,t);return fe.equals(r,n)},yf=e=>{var r=ss.get(e);return r===void 0?!0:r},Of=(e,r,t)=>{if(r.offset!==0)return!1;var n=v.start(e,t);return fe.equals(r,n)},xf=(e,r)=>{var t=v.path(e,r,{edge:"end"});return v.node(e,t)},Pf=function(r,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=v.path(r,t,n),u=W.leaf(r,a);return[u,a]};function Sf(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:t=e.selection,reverse:n=!1,voids:a=!1}=r,{match:u}=r;if(u==null&&(u=()=>!0),!!t){var s=[],i=v.path(e,t);for(var[f,l]of W.levels(e,i))if(u(f,l)&&(s.push([f,l]),!a&&Z.isElement(f)&&v.isVoid(e,f)))break;n&&s.reverse(),yield*s}}()}var Tf=["text"],Rf=["text"],jf=function(r){var{marks:t,selection:n}=r;if(!n)return null;var{anchor:a,focus:u}=n;if(t)return t;if(P.isExpanded(n)){var s=P.isBackward(n);s&&([u,a]=[a,u]);var i=v.isEnd(r,a,a.path);if(i){var f=v.after(r,a);f&&(a=f)}var[l]=v.nodes(r,{match:Y.isText,at:{anchor:a,focus:u}});if(l){var[c]=l,g=ir(c,Tf);return g}else return{}}var{path:d}=a,[D]=v.leaf(r,d);if(a.offset===0){var m=v.previous(r,{at:d,match:Y.isText}),h=v.above(r,{match:j=>Z.isElement(j)&&v.isVoid(r,j)&&r.markableVoid(j)});if(!h){var o=v.above(r,{match:j=>Z.isElement(j)&&v.isBlock(r,j)});if(m&&o){var[E,b]=m,[,w]=o;p.isAncestor(w,b)&&(D=E)}}}var O=ir(D,Rf);return O},Nf=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:n="lowest",voids:a=!1}=t,{match:u,at:s=r.selection}=t;if(s){var i=v.after(r,s,{voids:a});if(i){var[,f]=v.last(r,[]),l=[i.path,f];if(p.isPath(s)&&s.length===0)throw new Error("Cannot get the next node from the root node!");if(u==null)if(p.isPath(s)){var[c]=v.parent(r,s);u=d=>c.children.includes(d)}else u=()=>!0;var[g]=v.nodes(r,{at:l,match:u,mode:n,voids:a});return g}}},Mf=function(r,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=v.path(r,t,n),u=W.get(r,a);return[u,a]};function If(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:t=e.selection,mode:n="all",universal:a=!1,reverse:u=!1,voids:s=!1,ignoreNonSelectable:i=!1}=r,{match:f}=r;if(f||(f=()=>!0),!!t){var l,c;if(Cl.isSpan(t))l=t[0],c=t[1];else{var g=v.path(e,t,{edge:"start"}),d=v.path(e,t,{edge:"end"});l=u?d:g,c=u?g:d}var D=W.nodes(e,{reverse:u,from:l,to:c,pass:O=>{var[j]=O;return Z.isElement(j)?!!(!s&&(v.isVoid(e,j)||v.isElementReadOnly(e,j))||i&&!v.isSelectable(e,j)):!1}}),m=[],h;for(var[o,E]of D)if(!(i&&Z.isElement(o)&&!v.isSelectable(e,o))){var b=h&&p.compare(E,h[1])===0;if(!(n==="highest"&&b)){if(!f(o,E)){if(a&&!b&&Y.isText(o))return;continue}if(n==="lowest"&&b){h=[o,E];continue}var w=n==="lowest"?h:[o,E];w&&(a?m.push(w):yield w),h=[o,E]}}n==="lowest"&&h&&(a?m.push(h):yield h),a&&(yield*m)}}()}var kf=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{force:n=!1,operation:a}=t,u=c=>bt.get(c)||[],s=c=>At.get(c)||new Set,i=c=>{var g=u(c).pop(),d=g.join(",");return s(c).delete(d),g};if(v.isNormalizing(r)){if(n){var f=Array.from(W.nodes(r),c=>{var[,g]=c;return g}),l=new Set(f.map(c=>c.join(",")));bt.set(r,f),At.set(r,l)}u(r).length!==0&&v.withoutNormalizing(r,()=>{for(var c of u(r))if(W.has(r,c)){var g=v.node(r,c),[d,D]=g;Z.isElement(d)&&d.children.length===0&&r.normalizeNode(g,{operation:a})}for(var m=u(r),h=m.length,o=0;m.length!==0;){if(!r.shouldNormalize({dirtyPaths:m,iteration:o,initialDirtyPathsLength:h,operation:a}))return;var E=i(r);if(W.has(r,E)){var b=v.node(r,E);r.normalizeNode(b,{operation:a})}o++,m=u(r)}})}},Lf=function(r,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=v.path(r,t,n),u=p.parent(a),s=v.node(r,u);return s},$f=function(r,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:a="forward"}=n,u={current:t,affinity:a,unref(){var{current:i}=u,f=v.pathRefs(r);return f.delete(u),u.current=null,i}},s=v.pathRefs(r);return s.add(u),u},zf=e=>{var r=Va.get(e);return r||(r=new Set,Va.set(e,r)),r},Wf=function(r,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{depth:a,edge:u}=n;if(p.isPath(t)){if(u==="start"){var[,s]=W.first(r,t);t=s}else if(u==="end"){var[,i]=W.last(r,t);t=i}}return P.isRange(t)&&(u==="start"?t=P.start(t):u==="end"?t=P.end(t):t=p.common(t.anchor.path,t.focus.path)),fe.isPoint(t)&&(t=t.path),a!=null&&(t=t.slice(0,a)),t},qf=function(r,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:a="forward"}=n,u={current:t,affinity:a,unref(){var{current:i}=u,f=v.pointRefs(r);return f.delete(u),u.current=null,i}},s=v.pointRefs(r);return s.add(u),u},Hf=e=>{var r=Ka.get(e);return r||(r=new Set,Ka.set(e,r)),r},Vf=function(r,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{edge:a="start"}=n;if(p.isPath(t)){var u;if(a==="end"){var[,s]=W.last(r,t);u=s}else{var[,i]=W.first(r,t);u=i}var f=W.get(r,u);if(!Y.isText(f))throw new Error("Cannot get the ".concat(a," point in the node at path [").concat(t,"] because it has no ").concat(a," text node."));return{path:u,offset:a==="end"?f.text.length:0}}if(P.isRange(t)){var[l,c]=P.edges(t);return a==="start"?l:c}return t};function Kf(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:t=e.selection,unit:n="offset",reverse:a=!1,voids:u=!1,ignoreNonSelectable:s=!1}=r;if(!t)return;var i=v.range(e,t),[f,l]=P.edges(i),c=a?l:f,g=!1,d="",D=0,m=0,h=0;for(var[o,E]of v.nodes(e,{at:t,reverse:a,voids:u,ignoreNonSelectable:s})){if(Z.isElement(o)){if(!u&&(e.isVoid(o)||e.isElementReadOnly(o))){yield v.start(e,E);continue}if(e.isInline(o))continue;if(v.hasInlines(e,o)){var b=p.isAncestor(E,l.path)?l:v.end(e,E),w=p.isAncestor(E,f.path)?f:v.start(e,E);d=v.string(e,{anchor:w,focus:b},{voids:u}),g=!0}}if(Y.isText(o)){var O=p.equals(E,c.path);for(O?(m=a?c.offset:o.text.length-c.offset,h=c.offset):(m=o.text.length,h=a?m:0),(O||g||n==="offset")&&(yield{path:E,offset:h},g=!1);;){if(D===0){if(d==="")break;D=j(d,n,a),d=jn(d,D,a)[1]}if(h=a?h-D:h+D,m=m-D,m<0){D=-m;break}D=0,yield{path:E,offset:h}}}}function j(G,$,q){return $==="character"?Rn(G,q):$==="word"?Fl(G,q):$==="line"||$==="block"?G.length:1}}()}var Uf=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:n="lowest",voids:a=!1}=t,{match:u,at:s=r.selection}=t;if(s){var i=v.before(r,s,{voids:a});if(i){var[,f]=v.first(r,[]),l=[i.path,f];if(p.isPath(s)&&s.length===0)throw new Error("Cannot get the previous node from the root node!");if(u==null)if(p.isPath(s)){var[c]=v.parent(r,s);u=d=>c.children.includes(d)}else u=()=>!0;var[g]=v.nodes(r,{reverse:!0,at:l,match:u,mode:n,voids:a});return g}}},Gf=function(r,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:a="forward"}=n,u={current:t,affinity:a,unref(){var{current:i}=u,f=v.rangeRefs(r);return f.delete(u),u.current=null,i}},s=v.rangeRefs(r);return s.add(u),u},Yf=e=>{var r=Ua.get(e);return r||(r=new Set,Ua.set(e,r)),r},Xf=(e,r,t)=>{if(P.isRange(r)&&!t)return r;var n=v.start(e,r),a=v.end(e,t||r);return{anchor:n,focus:a}};function Du(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Jf(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Du(Object(t),!0).forEach(function(n){$e(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Du(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var Zf=(e,r)=>{var{selection:t}=e;if(t){var n=(c,g)=>{if(!Y.isText(c))return!1;var[d,D]=v.parent(e,g);return!e.isVoid(d)||e.markableVoid(d)},a=P.isExpanded(t),u=!1;if(!a){var[s,i]=v.node(e,t);if(s&&n(s,i)){var[f]=v.parent(e,i);u=f&&e.markableVoid(f)}}if(a||u)V.unsetNodes(e,r,{match:n,split:!0,voids:!0});else{var l=Jf({},v.marks(e)||{});delete l[r],e.marks=l,Vr.get(e)||e.onChange()}}},Qf=(e,r)=>{ss.set(e,r)},_f=(e,r)=>v.point(e,r,{edge:"start"}),ec=function(r,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:a=!1}=n,u=v.range(r,t),[s,i]=P.edges(u),f="";for(var[l,c]of v.nodes(r,{at:u,match:Y.isText,voids:a})){var g=l.text;p.equals(c,i.path)&&(g=g.slice(0,i.offset)),p.equals(c,s.path)&&(g=g.slice(s.offset)),f+=g}return f},rc=function(r,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:a=!1}=n,[u,s]=P.edges(t);if(u.offset!==0||s.offset!==0||P.isCollapsed(t)||p.hasPrevious(s.path))return t;var i=v.above(r,{at:s,match:m=>Z.isElement(m)&&v.isBlock(r,m),voids:a}),f=i?i[1]:[],l=v.start(r,u),c={anchor:l,focus:s},g=!0;for(var[d,D]of v.nodes(r,{at:c,match:Y.isText,reverse:!0,voids:a})){if(g){g=!1;continue}if(d.text!==""||p.isBefore(D,f)){s={path:D,offset:d.text.length};break}}return{anchor:u,focus:s}},tc=(e,r)=>{var t=v.isNormalizing(e);v.setNormalizing(e,!1);try{r()}finally{v.setNormalizing(e,t)}v.normalize(e)},nc=(e,r,t)=>{var[n,a]=r;return Z.isElement(n)&&v.isEmpty(e,n)||Y.isText(n)&&n.text===""&&a[a.length-1]!==0},ac=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};v.withoutNormalizing(r,()=>{var n,a,{reverse:u=!1,unit:s="character",distance:i=1,voids:f=!1}=t,{at:l=r.selection,hanging:c=!1}=t;if(l){var g=!1;if(P.isRange(l)&&P.isCollapsed(l)&&(g=!0,l=l.anchor),fe.isPoint(l)){var d=v.void(r,{at:l,mode:"highest"});if(!f&&d){var[,D]=d;l=D}else{var m={unit:s,distance:i},h=u?v.before(r,l,m)||v.start(r,[]):v.after(r,l,m)||v.end(r,[]);l={anchor:l,focus:h},c=!0}}if(p.isPath(l)){V.removeNodes(r,{at:l,voids:f});return}if(!P.isCollapsed(l)){if(!c){var[,o]=P.edges(l),E=v.end(r,[]);fe.equals(o,E)||(l=v.unhangRange(r,l,{voids:f}))}var[b,w]=P.edges(l),O=v.above(r,{match:_=>Z.isElement(_)&&v.isBlock(r,_),at:b,voids:f}),j=v.above(r,{match:_=>Z.isElement(_)&&v.isBlock(r,_),at:w,voids:f}),G=O&&j&&!p.equals(O[1],j[1]),$=p.equals(b.path,w.path),q=f?null:(n=v.void(r,{at:b,mode:"highest"}))!==null&&n!==void 0?n:v.elementReadOnly(r,{at:b,mode:"highest"}),H=f?null:(a=v.void(r,{at:w,mode:"highest"}))!==null&&a!==void 0?a:v.elementReadOnly(r,{at:w,mode:"highest"});if(q){var z=v.before(r,b);z&&O&&p.isAncestor(O[1],z.path)&&(b=z)}if(H){var M=v.after(r,w);M&&j&&p.isAncestor(j[1],M.path)&&(w=M)}var F=[],y;for(var x of v.nodes(r,{at:l,voids:f})){var[S,ne]=x;y&&p.compare(ne,y)===0||(!f&&Z.isElement(S)&&(v.isVoid(r,S)||v.isElementReadOnly(r,S))||!p.isCommon(ne,b.path)&&!p.isCommon(ne,w.path))&&(F.push(x),y=ne)}var K=Array.from(F,_=>{var[,Ee]=_;return v.pathRef(r,Ee)}),ge=v.pointRef(r,b),Q=v.pointRef(r,w),se="";if(!$&&!q){var me=ge.current,[le]=v.leaf(r,me),{path:ae}=me,{offset:Se}=b,J=le.text.slice(Se);J.length>0&&(r.apply({type:"remove_text",path:ae,offset:Se,text:J}),se=J)}if(K.reverse().map(_=>_.unref()).filter(_=>_!==null).forEach(_=>V.removeNodes(r,{at:_,voids:f})),!H){var C=Q.current,[k]=v.leaf(r,C),{path:T}=C,R=$?b.offset:0,ue=k.text.slice(R,w.offset);ue.length>0&&(r.apply({type:"remove_text",path:T,offset:R,text:ue}),se=ue)}!$&&G&&Q.current&&ge.current&&V.mergeNodes(r,{at:Q.current,hanging:!0,voids:f}),g&&u&&s==="character"&&se.length>1&&se.match(/[\u0E00-\u0E7F]+/)&&V.insertText(r,se.slice(0,se.length-i));var X=ge.unref(),Be=Q.unref(),ce=u?X||Be:Be||X;t.at==null&&ce&&V.select(r,ce)}}})},uc=function(r,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};v.withoutNormalizing(r,()=>{var{hanging:a=!1,voids:u=!1}=n,{at:s=Tn(r),batchDirty:i=!0}=n;if(t.length){if(P.isRange(s))if(a||(s=v.unhangRange(r,s,{voids:u})),P.isCollapsed(s))s=s.anchor;else{var[,f]=P.edges(s);if(!u&&v.void(r,{at:f}))return;var l=v.pointRef(r,f);V.delete(r,{at:s}),s=l.unref()}else p.isPath(s)&&(s=v.start(r,s));if(!(!u&&v.void(r,{at:s}))){var c=v.above(r,{at:s,match:J=>Z.isElement(J)&&v.isInline(r,J),mode:"highest",voids:u});if(c){var[,g]=c;if(v.isEnd(r,s,g)){var d=v.after(r,g);s=d}else if(v.isStart(r,s,g)){var D=v.before(r,g);s=D}}var m=v.above(r,{match:J=>Z.isElement(J)&&v.isBlock(r,J),at:s,voids:u}),[,h]=m,o=v.isStart(r,s,h),E=v.isEnd(r,s,h),b=o&&E,w=!o||o&&E,O=!E,[,j]=W.first({children:t},[]),[,G]=W.last({children:t},[]),$=[],q=J=>{var[C,k]=J,T=k.length===0;return T?!1:b?!0:!(w&&p.isAncestor(k,j)&&Z.isElement(C)&&!r.isVoid(C)&&!r.isInline(C)||O&&p.isAncestor(k,G)&&Z.isElement(C)&&!r.isVoid(C)&&!r.isInline(C))};for(var H of W.nodes({children:t},{pass:q}))q(H)&&$.push(H);var z=[],M=[],F=[],y=!0,x=!1;for(var[S]of $)Z.isElement(S)&&!r.isInline(S)?(y=!1,x=!0,M.push(S)):y?z.push(S):F.push(S);var[ne]=v.nodes(r,{at:s,match:J=>Y.isText(J)||v.isInline(r,J),mode:"highest",voids:u}),[,K]=ne,ge=v.isStart(r,s,K),Q=v.isEnd(r,s,K),se=v.pathRef(r,E&&!F.length?p.next(h):h),me=v.pathRef(r,Q?p.next(K):K);V.splitNodes(r,{at:s,match:J=>x?Z.isElement(J)&&v.isBlock(r,J):Y.isText(J)||v.isInline(r,J),mode:x?"lowest":"highest",always:x&&(!o||z.length>0)&&(!E||F.length>0),voids:u});var le=v.pathRef(r,!ge||ge&&Q?p.next(K):K);if(V.insertNodes(r,z,{at:le.current,match:J=>Y.isText(J)||v.isInline(r,J),mode:"highest",voids:u,batchDirty:i}),b&&!z.length&&M.length&&!F.length&&V.delete(r,{at:h,voids:u}),V.insertNodes(r,M,{at:se.current,match:J=>Z.isElement(J)&&v.isBlock(r,J),mode:"lowest",voids:u,batchDirty:i}),V.insertNodes(r,F,{at:me.current,match:J=>Y.isText(J)||v.isInline(r,J),mode:"highest",voids:u,batchDirty:i}),!n.at){var ae;if(F.length>0&&me.current?ae=p.previous(me.current):M.length>0&&se.current?ae=p.previous(se.current):le.current&&(ae=p.previous(le.current)),ae){var Se=v.end(r,ae);V.select(r,Se)}}le.unref(),se.unref(),me.unref()}}})},sc=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{edge:n="anchor"}=t,{selection:a}=r;if(a){if(n==="anchor")V.select(r,a.anchor);else if(n==="focus")V.select(r,a.focus);else if(n==="start"){var[u]=P.edges(a);V.select(r,u)}else if(n==="end"){var[,s]=P.edges(a);V.select(r,s)}}else return},ic=e=>{var{selection:r}=e;r&&e.apply({type:"set_selection",properties:r,newProperties:null})},oc=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:n}=r,{distance:a=1,unit:u="character",reverse:s=!1}=t,{edge:i=null}=t;if(n){i==="start"&&(i=P.isBackward(n)?"focus":"anchor"),i==="end"&&(i=P.isBackward(n)?"anchor":"focus");var{anchor:f,focus:l}=n,c={distance:a,unit:u,ignoreNonSelectable:!0},g={};if(i==null||i==="anchor"){var d=s?v.before(r,f,c):v.after(r,f,c);d&&(g.anchor=d)}if(i==null||i==="focus"){var D=s?v.before(r,l,c):v.after(r,l,c);D&&(g.focus=D)}V.setSelection(r,g)}},lc=(e,r)=>{var{selection:t}=e;if(r=v.range(e,r),t){V.setSelection(e,r);return}if(!P.isRange(r))throw new Error("When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: ".concat(Ve.stringify(r)));e.apply({type:"set_selection",properties:t,newProperties:r})};function mu(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function pu(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?mu(Object(t),!0).forEach(function(n){$e(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):mu(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var fc=function(r,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:a}=r,{edge:u="both"}=n;if(a){u==="start"&&(u=P.isBackward(a)?"focus":"anchor"),u==="end"&&(u=P.isBackward(a)?"anchor":"focus");var{anchor:s,focus:i}=a,f=u==="anchor"?s:i;V.setSelection(r,{[u==="anchor"?"anchor":"focus"]:pu(pu({},f),t)})}},cc=(e,r)=>{var{selection:t}=e,n={},a={};if(t){for(var u in r)(u==="anchor"&&r.anchor!=null&&!fe.equals(r.anchor,t.anchor)||u==="focus"&&r.focus!=null&&!fe.equals(r.focus,t.focus)||u!=="anchor"&&u!=="focus"&&r[u]!==t[u])&&(n[u]=t[u],a[u]=r[u]);Object.keys(n).length>0&&e.apply({type:"set_selection",properties:n,newProperties:a})}},vc=function(r,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};v.withoutNormalizing(r,()=>{var{hanging:a=!1,voids:u=!1,mode:s="lowest",batchDirty:i=!0}=n,{at:f,match:l,select:c}=n;if(W.isNode(t)&&(t=[t]),t.length!==0){var[g]=t;if(f||(f=Tn(r),c!==!1&&(c=!0)),c==null&&(c=!1),P.isRange(f))if(a||(f=v.unhangRange(r,f,{voids:u})),P.isCollapsed(f))f=f.anchor;else{var[,d]=P.edges(f),D=v.pointRef(r,d);V.delete(r,{at:f}),f=D.unref()}if(fe.isPoint(f)){l==null&&(Y.isText(g)?l=z=>Y.isText(z):r.isInline(g)?l=z=>Y.isText(z)||v.isInline(r,z):l=z=>Z.isElement(z)&&v.isBlock(r,z));var[m]=v.nodes(r,{at:f.path,match:l,mode:s,voids:u});if(m){var[,h]=m,o=v.pathRef(r,h),E=v.isEnd(r,f,h);V.splitNodes(r,{at:f,match:l,mode:s,voids:u});var b=o.unref();f=E?p.next(b):b}else return}var w=p.parent(f),O=f[f.length-1];if(!(!u&&v.void(r,{at:w}))){if(i){var j=[],G=p.levels(w);Gl(r,()=>{var z=function(){var y=w.concat(O);O++;var x={type:"insert_node",path:y,node:M};r.apply(x),f=p.next(f),j.push(x),Y.isText?G.push(...Array.from(W.nodes(M),S=>{var[,ne]=S;return y.concat(ne)})):G.push(y)};for(var M of t)z()},()=>{os(r,G,z=>{var M=z;for(var F of j)if(p.operationCanTransformPath(F)&&(M=p.transform(M,F),!M))return null;return M})})}else for(var $ of t){var q=w.concat(O);O++,r.apply({type:"insert_node",path:q,node:$}),f=p.next(f)}if(f=p.previous(f),c){var H=v.end(r,f);H&&V.select(r,H)}}}})},dc=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};v.withoutNormalizing(r,()=>{var{at:n=r.selection,mode:a="lowest",voids:u=!1}=t,{match:s}=t;if(s==null&&(s=p.isPath(n)?Ir(r,n):O=>Z.isElement(O)&&v.isBlock(r,O)),!!n){var i=v.nodes(r,{at:n,match:s,mode:a,voids:u}),f=Array.from(i,O=>{var[,j]=O;return v.pathRef(r,j)});for(var l of f){var c=l.unref();if(c.length<2)throw new Error("Cannot lift node at a path [".concat(c,"] because it has a depth of less than `2`."));var g=v.node(r,p.parent(c)),[d,D]=g,m=c[c.length-1],{length:h}=d.children;if(h===1){var o=p.next(D);V.moveNodes(r,{at:c,to:o,voids:u}),V.removeNodes(r,{at:D,voids:u})}else if(m===0)V.moveNodes(r,{at:c,to:D,voids:u});else if(m===h-1){var E=p.next(D);V.moveNodes(r,{at:c,to:E,voids:u})}else{var b=p.next(c),w=p.next(D);V.splitNodes(r,{at:b,voids:u}),V.moveNodes(r,{at:c,to:w,voids:u})}}}})},gc=["text"],hc=["children"],ls=(e,r)=>{if(Z.isElement(r)){var t=r;return v.isVoid(e,r)?!0:t.children.length===1?ls(e,t.children[0]):!1}else return!v.isEditor(r)},Dc=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};v.withoutNormalizing(r,()=>{var{match:n,at:a=r.selection}=t,{hanging:u=!1,voids:s=!1,mode:i="lowest"}=t;if(a){if(n==null)if(p.isPath(a)){var[f]=v.parent(r,a);n=z=>f.children.includes(z)}else n=z=>Z.isElement(z)&&v.isBlock(r,z);if(!u&&P.isRange(a)&&(a=v.unhangRange(r,a,{voids:s})),P.isRange(a))if(P.isCollapsed(a))a=a.anchor;else{var[,l]=P.edges(a),c=v.pointRef(r,l);V.delete(r,{at:a}),a=c.unref(),t.at==null&&V.select(r,a)}var[g]=v.nodes(r,{at:a,match:n,voids:s,mode:i}),d=v.previous(r,{at:a,match:n,voids:s,mode:i});if(!(!g||!d)){var[D,m]=g,[h,o]=d;if(!(m.length===0||o.length===0)){var E=p.next(o),b=p.common(m,o),w=p.isSibling(m,o),O=Array.from(v.levels(r,{at:m}),z=>{var[M]=z;return M}).slice(b.length).slice(0,-1),j=v.above(r,{at:m,mode:"highest",match:z=>O.includes(z)&&ls(r,z)}),G=j&&v.pathRef(r,j[1]),$,q;if(Y.isText(D)&&Y.isText(h)){var H=ir(D,gc);q=h.text.length,$=H}else if(Z.isElement(D)&&Z.isElement(h)){var H=ir(D,hc);q=h.children.length,$=H}else throw new Error("Cannot merge the node at path [".concat(m,"] with the previous sibling because it is not the same kind: ").concat(Ve.stringify(D)," ").concat(Ve.stringify(h)));w||V.moveNodes(r,{at:m,to:E,voids:s}),G&&V.removeNodes(r,{at:G.current,voids:s}),v.shouldMergeNodesRemovePrevNode(r,d,g)?V.removeNodes(r,{at:o,voids:s}):r.apply({type:"merge_node",path:E,position:q,properties:$}),G&&G.unref()}}}})},mc=(e,r)=>{v.withoutNormalizing(e,()=>{var{to:t,at:n=e.selection,mode:a="lowest",voids:u=!1}=r,{match:s}=r;if(n){s==null&&(s=p.isPath(n)?Ir(e,n):D=>Z.isElement(D)&&v.isBlock(e,D));var i=v.pathRef(e,t),f=v.nodes(e,{at:n,match:s,mode:a,voids:u}),l=Array.from(f,D=>{var[,m]=D;return v.pathRef(e,m)});for(var c of l){var g=c.unref(),d=i.current;g.length!==0&&e.apply({type:"move_node",path:g,newPath:d}),i.current&&p.isSibling(d,g)&&p.isAfter(d,g)&&(i.current=p.next(i.current))}i.unref()}})},pc=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};v.withoutNormalizing(r,()=>{var{hanging:n=!1,voids:a=!1,mode:u="lowest"}=t,{at:s=r.selection,match:i}=t;if(s){i==null&&(i=p.isPath(s)?Ir(r,s):D=>Z.isElement(D)&&v.isBlock(r,D)),!n&&P.isRange(s)&&(s=v.unhangRange(r,s,{voids:a}));var f=v.nodes(r,{at:s,match:i,mode:u,voids:a}),l=Array.from(f,D=>{var[,m]=D;return v.pathRef(r,m)});for(var c of l){var g=c.unref();if(g){var[d]=v.node(r,g);r.apply({type:"remove_node",path:g,node:d})}}}})},Cc=function(r,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};v.withoutNormalizing(r,()=>{var{match:a,at:u=r.selection,compare:s,merge:i}=n,{hanging:f=!1,mode:l="lowest",split:c=!1,voids:g=!1}=n;if(u){if(a==null&&(a=p.isPath(u)?Ir(r,u):q=>Z.isElement(q)&&v.isBlock(r,q)),!f&&P.isRange(u)&&(u=v.unhangRange(r,u,{voids:g})),c&&P.isRange(u)){if(P.isCollapsed(u)&&v.leaf(r,u.anchor)[0].text.length>0)return;var d=v.rangeRef(r,u,{affinity:"inward"}),[D,m]=P.edges(u),h=l==="lowest"?"lowest":"highest",o=v.isEnd(r,m,m.path);V.splitNodes(r,{at:m,match:a,mode:h,voids:g,always:!o});var E=v.isStart(r,D,D.path);V.splitNodes(r,{at:D,match:a,mode:h,voids:g,always:!E}),u=d.unref(),n.at==null&&V.select(r,u)}s||(s=(q,H)=>q!==H);for(var[b,w]of v.nodes(r,{at:u,match:a,mode:l,voids:g})){var O={},j={};if(w.length!==0){var G=!1;for(var $ in t)$==="children"||$==="text"||s(t[$],b[$])&&(G=!0,b.hasOwnProperty($)&&(O[$]=b[$]),i?t[$]!=null&&(j[$]=i(b[$],t[$])):t[$]!=null&&(j[$]=t[$]));G&&r.apply({type:"set_node",path:w,properties:O,newProperties:j})}}}})},Bc=(e,r)=>{if(P.isCollapsed(r))return r.anchor;var[,t]=P.edges(r),n=v.pointRef(e,t);return V.delete(e,{at:r}),n.unref()},Ec=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};v.withoutNormalizing(r,()=>{var{mode:n="lowest",voids:a=!1}=t,{match:u,at:s=r.selection,height:i=0,always:f=!1}=t;if(u==null&&(u=Q=>Z.isElement(Q)&&v.isBlock(r,Q)),P.isRange(s)&&(s=Bc(r,s)),p.isPath(s)){var l=s,c=v.point(r,l),[g]=v.parent(r,l);u=Q=>Q===g,i=c.path.length-l.length+1,s=c,f=!0}if(s){var d=v.pointRef(r,s,{affinity:"backward"}),D;try{var[m]=v.nodes(r,{at:s,match:u,mode:n,voids:a});if(!m)return;var h=v.void(r,{at:s,mode:"highest"}),o=0;if(!a&&h){var[E,b]=h;if(Z.isElement(E)&&r.isInline(E)){var w=v.after(r,b);if(!w){var O={text:""},j=p.next(b);V.insertNodes(r,O,{at:j,voids:a}),w=v.point(r,j)}s=w,f=!0}var G=s.path.length-b.length;i=G+1,f=!0}D=v.pointRef(r,s);var $=s.path.length-i,[,q]=m,H=s.path.slice(0,$),z=i===0?s.offset:s.path[$]+o;for(var[M,F]of v.levels(r,{at:H,reverse:!0,voids:a})){var y=!1;if(F.length<q.length||F.length===0||!a&&Z.isElement(M)&&v.isVoid(r,M))break;var x=d.current,S=v.isEnd(r,x,F);if(f||!d||!v.isEdge(r,x,F)){y=!0;var ne=W.extractProps(M);r.apply({type:"split_node",path:F,position:z,properties:ne})}z=F[F.length-1]+(y||S?1:0)}if(t.at==null){var K=D.current||v.end(r,[]);V.select(r,K)}}finally{var ge;d.unref(),(ge=D)===null||ge===void 0||ge.unref()}}})},bc=function(r,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Array.isArray(t)||(t=[t]);var a={};for(var u of t)a[u]=null;V.setNodes(r,a,n)},Ac=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};v.withoutNormalizing(r,()=>{var{mode:n="lowest",split:a=!1,voids:u=!1}=t,{at:s=r.selection,match:i}=t;if(s){i==null&&(i=p.isPath(s)?Ir(r,s):D=>Z.isElement(D)&&v.isBlock(r,D)),p.isPath(s)&&(s=v.range(r,s));var f=P.isRange(s)?v.rangeRef(r,s):null,l=v.nodes(r,{at:s,match:i,mode:n,voids:u}),c=Array.from(l,D=>{var[,m]=D;return v.pathRef(r,m)}).reverse(),g=function(){var m=d.unref(),[h]=v.node(r,m),o=v.range(r,m);a&&f&&(o=P.intersection(f.current,o)),V.liftNodes(r,{at:o,match:E=>Z.isAncestor(h)&&h.children.includes(E),voids:u})};for(var d of c)g();f&&f.unref()}})};function Cu(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Bu(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Cu(Object(t),!0).forEach(function(n){$e(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Cu(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var wc=function(r,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};v.withoutNormalizing(r,()=>{var{mode:a="lowest",split:u=!1,voids:s=!1}=n,{match:i,at:f=r.selection}=n;if(f){if(i==null&&(p.isPath(f)?i=Ir(r,f):r.isInline(t)?i=o=>Z.isElement(o)&&v.isInline(r,o)||Y.isText(o):i=o=>Z.isElement(o)&&v.isBlock(r,o)),u&&P.isRange(f)){var[l,c]=P.edges(f),g=v.rangeRef(r,f,{affinity:"inward"});V.splitNodes(r,{at:c,match:i,voids:s}),V.splitNodes(r,{at:l,match:i,voids:s}),f=g.unref(),n.at==null&&V.select(r,f)}var d=Array.from(v.nodes(r,{at:f,match:r.isInline(t)?o=>Z.isElement(o)&&v.isBlock(r,o):o=>v.isEditor(o),mode:"lowest",voids:s})),D=function(){var E=P.isRange(f)?P.intersection(f,v.range(r,h)):f;if(!E)return 0;var b=Array.from(v.nodes(r,{at:E,match:i,mode:a,voids:s}));if(b.length>0){var[w]=b,O=b[b.length-1],[,j]=w,[,G]=O;if(j.length===0&&G.length===0)return 0;var $=p.equals(j,G)?p.parent(j):p.common(j,G),q=v.range(r,j,G),H=v.node(r,$),[z]=H,M=$.length+1,F=p.next(G.slice(0,M)),y=Bu(Bu({},t),{},{children:[]});V.insertNodes(r,y,{at:F,voids:s}),V.moveNodes(r,{at:q,match:x=>Z.isAncestor(z)&&z.children.includes(x),to:F.concat(0),voids:s})}},m;for(var[,h]of d)m=D()}})},Mc=()=>{var e={children:[],operations:[],selection:null,marks:null,isElementReadOnly:()=>!1,isInline:()=>!1,isSelectable:()=>!0,isVoid:()=>!1,markableVoid:()=>!1,onChange:()=>{},apply:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Yl(e,...n)},addMark:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return ef(e,...n)},deleteBackward:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return nf(e,...n)},deleteForward:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return af(e,...n)},deleteFragment:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return uf(e,...n)},getFragment:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Jl(e,...n)},insertBreak:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return mf(e,...n)},insertSoftBreak:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Cf(e,...n)},insertFragment:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return uc(e,...n)},insertNode:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return pf(e,...n)},insertText:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Ef(e,...n)},normalizeNode:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Zl(e,...n)},removeMark:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Zf(e,...n)},getDirtyPaths:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Xl(e,...n)},shouldNormalize:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Ql(e,...n)},above:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return _l(e,...n)},after:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return rf(e,...n)},before:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return tf(e,...n)},collapse:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return sc(e,...n)},delete:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return ac(e,...n)},deselect:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return ic(e,...n)},edges:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return sf(e,...n)},elementReadOnly:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return of(e,...n)},end:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return lf(e,...n)},first:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return ff(e,...n)},fragment:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return cf(e,...n)},getMarks:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return jf(e,...n)},hasBlocks:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return df(e,...n)},hasInlines:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return gf(e,...n)},hasPath:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return hf(e,...n)},hasTexts:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Df(e,...n)},insertNodes:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return vc(e,...n)},isBlock:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return bf(e,...n)},isEdge:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Af(e,...n)},isEmpty:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return wf(e,...n)},isEnd:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Ff(e,...n)},isNormalizing:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return yf(e,...n)},isStart:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Of(e,...n)},last:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return xf(e,...n)},leaf:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Pf(e,...n)},levels:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Sf(e,...n)},liftNodes:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return dc(e,...n)},mergeNodes:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Dc(e,...n)},move:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return oc(e,...n)},moveNodes:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return mc(e,...n)},next:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Nf(e,...n)},node:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Mf(e,...n)},nodes:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return If(e,...n)},normalize:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return kf(e,...n)},parent:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Lf(e,...n)},path:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Wf(e,...n)},pathRef:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return $f(e,...n)},pathRefs:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return zf(e,...n)},point:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Vf(e,...n)},pointRef:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return qf(e,...n)},pointRefs:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Hf(e,...n)},positions:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Kf(e,...n)},previous:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Uf(e,...n)},range:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Xf(e,...n)},rangeRef:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Gf(e,...n)},rangeRefs:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Yf(e,...n)},removeNodes:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return pc(e,...n)},select:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return lc(e,...n)},setNodes:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Cc(e,...n)},setNormalizing:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Qf(e,...n)},setPoint:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return fc(e,...n)},setSelection:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return cc(e,...n)},splitNodes:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Ec(e,...n)},start:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return _f(e,...n)},string:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return ec(e,...n)},unhangRange:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return rc(e,...n)},unsetNodes:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return bc(e,...n)},unwrapNodes:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Ac(e,...n)},void:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return vf(e,...n)},withoutNormalizing:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return tc(e,...n)},wrapNodes:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return wc(e,...n)},shouldMergeNodesRemovePrevNode:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return nc(e,...n)}};return e},Fc={isHistory(e){return de(e)&&Array.isArray(e.redos)&&Array.isArray(e.undos)&&(e.redos.length===0||cr.isOperationList(e.redos[0].operations))&&(e.undos.length===0||cr.isOperationList(e.undos[0].operations))}},un=new WeakMap,mr=new WeakMap,lt=new WeakMap,tr={isHistoryEditor(e){return Fc.isHistory(e.history)&&B.isEditor(e)},isMerging(e){return mr.get(e)},isSplittingOnce(e){return lt.get(e)},setSplittingOnce(e,r){lt.set(e,r)},isSaving(e){return un.get(e)},redo(e){e.redo()},undo(e){e.undo()},withMerging(e,r){var t=tr.isMerging(e);mr.set(e,!0),r(),mr.set(e,t)},withNewBatch(e,r){var t=tr.isMerging(e);mr.set(e,!0),lt.set(e,!0),r(),mr.set(e,t),lt.delete(e)},withoutMerging(e,r){var t=tr.isMerging(e);mr.set(e,!1),r(),mr.set(e,t)},withoutSaving(e,r){var t=tr.isSaving(e);un.set(e,!1),r(),un.set(e,t)}},Ic=e=>{var r=e,{apply:t}=r;return r.history={undos:[],redos:[]},r.redo=()=>{var{history:n}=r,{redos:a}=n;if(a.length>0){var u=a[a.length-1];u.selectionBefore&&ie.setSelection(r,u.selectionBefore),tr.withoutSaving(r,()=>{B.withoutNormalizing(r,()=>{for(var s of u.operations)r.apply(s)})}),n.redos.pop(),r.writeHistory("undos",u)}},r.undo=()=>{var{history:n}=r,{undos:a}=n;if(a.length>0){var u=a[a.length-1];tr.withoutSaving(r,()=>{B.withoutNormalizing(r,()=>{var s=u.operations.map(cr.inverse).reverse();for(var i of s)r.apply(i);u.selectionBefore&&ie.setSelection(r,u.selectionBefore)})}),r.writeHistory("redos",u),n.undos.pop()}},r.apply=n=>{var{operations:a,history:u}=r,{undos:s}=u,i=s[s.length-1],f=i&&i.operations[i.operations.length-1],l=tr.isSaving(r),c=tr.isMerging(r);if(l==null&&(l=Oc(n)),l){if(c==null&&(i==null?c=!1:a.length!==0?c=!0:c=yc(n,f)),tr.isSplittingOnce(r)&&(c=!1,tr.setSplittingOnce(r,void 0)),i&&c)i.operations.push(n);else{var g={operations:[n],selectionBefore:r.selection};r.writeHistory("undos",g)}for(;s.length>100;)s.shift();u.redos=[]}t(n)},r.writeHistory=(n,a)=>{r.history[n].push(a)},r},yc=(e,r)=>!!(r&&e.type==="insert_text"&&r.type==="insert_text"&&e.offset===r.offset+r.text.length&&A.equals(e.path,r.path)||r&&e.type==="remove_text"&&r.type==="remove_text"&&e.offset+e.text.length===r.offset&&A.equals(e.path,r.path)),Oc=(e,r)=>e.type!=="set_selection";export{Rc as E,re as R,jc as S,V as T,Nc as a,v as b,P as c,Z as d,Tc as e,Mc as f,Sc as i,L as r,Wo as u,Ic as w};
