import{c as Y,B as q,y as G,z as K,P as W,A as J,j as r,p as y,n as g,C as Q}from"./@udecode/plate-BPvte4DK.js";import{aK as Z,aL as ee,aM as N,aN as te,aO as _,aP as w,aC as S,aQ as ae,a4 as P,aR as ne,a5 as j,aS as v,aT as se,aU as L,aV as re,aW as oe,aX as I,aY as A,aZ as C,a_ as ie,a$ as le,b0 as ce,b1 as ue,b2 as me,W as de,b3 as fe,b4 as xe,b5 as he,b6 as E,b7 as ve,b8 as ge,b9 as pe,ba as Ce,bb as be,bc as je,bd as O,be as B,bf as Me,bg as ye,bh as R,bi as Ne,bj as we,bk as Se,bl as De}from"./en-US-X456fi_3.js";import{r as x}from"./react-uubelm5h.js";var T=Object.getOwnPropertySymbols,Ie=Object.prototype.hasOwnProperty,Ae=Object.prototype.propertyIsEnumerable,Ee=(e,a)=>{var t={};for(var n in e)Ie.call(e,n)&&a.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&T)for(var n of T(e))a.indexOf(n)<0&&Ae.call(e,n)&&(t[n]=e[n]);return t},Oe=({editor:e,getOptions:a})=>{const{normalizeNode:t}=e;return e.normalizeNode=([n,s])=>{const i=a(),{level:l,type:o}=i,m=Ee(i,["level","type"]);if(s.length===0){const c=G(e,l),d=c==null?void 0:c[0];if(!d||d.type!==o&&K(c,m)){const p=c?W.next(c[1]):[0];J(e,e.api.create.block({type:o},p),{at:p});return}}return t([n,s])},e},ot=Y({key:"trailingBlock",extendEditor:Oe,options:{level:0}}).extend(({editor:e})=>({options:{type:e.getType(q)}}));/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=Z("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var D="Avatar",[_e,it]=ee(D),[Pe,k]=_e(D),z=x.forwardRef((e,a)=>{const{__scopeAvatar:t,...n}=e,[s,i]=x.useState("idle");return r.jsx(Pe,{scope:t,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:r.jsx(N.span,{...n,ref:a})})});z.displayName=D;var F="AvatarImage",X=x.forwardRef((e,a)=>{const{__scopeAvatar:t,src:n,onLoadingStatusChange:s=()=>{},...i}=e,l=k(F,t),o=Le(n,i.referrerPolicy),m=te(c=>{s(c),l.onImageLoadingStatusChange(c)});return _(()=>{o!=="idle"&&m(o)},[o,m]),o==="loaded"?r.jsx(N.img,{...i,ref:a,src:n}):null});X.displayName=F;var $="AvatarFallback",V=x.forwardRef((e,a)=>{const{__scopeAvatar:t,delayMs:n,...s}=e,i=k($,t),[l,o]=x.useState(n===void 0);return x.useEffect(()=>{if(n!==void 0){const m=window.setTimeout(()=>o(!0),n);return()=>window.clearTimeout(m)}},[n]),l&&i.imageLoadingStatus!=="loaded"?r.jsx(N.span,{...s,ref:a}):null});V.displayName=$;function Le(e,a){const[t,n]=x.useState("idle");return _(()=>{if(!e){n("error");return}let s=!0;const i=new window.Image,l=o=>()=>{s&&n(o)};return n("loading"),i.onload=l("loaded"),i.onerror=l("error"),i.src=e,a&&(i.referrerPolicy=a),()=>{s=!1}},[e,a]),t}var Be=z,Re=X,ke=V;const ze=y(Be,"relative flex size-10 shrink-0 overflow-hidden rounded-full"),Fe=y(Re,"aspect-square size-full"),Xe=y(ke,"flex size-full items-center justify-center rounded-full bg-muted");function U({userId:e}){var n;const{useOption:a}=w(S),t=a("userById",e);return t?r.jsxs(ze,{className:"size-5",children:[r.jsx(Fe,{alt:t.name,src:t.avatarUrl}),r.jsx(Xe,{children:(n=t.name)==null?void 0:n[0]})]}):null}function $e(){const{useOption:e}=w(S),a=e("myUserId");return r.jsxs("div",{className:"flex w-full space-x-2",children:[r.jsx(U,{userId:a}),r.jsxs("div",{className:"flex grow flex-col items-end gap-2",children:[r.jsx(ae,{className:P()}),r.jsx(ne,{className:g(j({size:"sm"}),"w-[90px]"),children:"Comment"})]})]})}function b(e,a){const t=+v(e)-+v(a);return t<0?-1:t>0?1:t}function Ve(e){return a=>{const n=(e?Math[e]:Math.trunc)(a);return n===0?0:n}}function Ue(e,a){return+v(e)-+v(a)}function He(e,a){const t=v(e,a==null?void 0:a.in);return t.setHours(23,59,59,999),t}function Ye(e,a){const t=v(e,a==null?void 0:a.in);return+He(t,a)==+se(t,a)}function qe(e,a,t){const[n,s,i]=L(t==null?void 0:t.in,e,e,a),l=b(s,i),o=Math.abs(re(s,i));if(o<1)return 0;s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-l*o);let m=b(s,i)===-l;Ye(n)&&o===1&&b(n,i)===1&&(m=!1);const c=l*(o-+m);return c===0?0:c}function Ge(e,a,t){const n=Ue(e,a)/1e3;return Ve(t==null?void 0:t.roundingMethod)(n)}function Ke(e,a,t){const n=ie(),s=(t==null?void 0:t.locale)??n.locale??oe,i=2520,l=b(e,a);if(isNaN(l))throw new RangeError("Invalid time value");const o=Object.assign({},t,{addSuffix:t==null?void 0:t.addSuffix,comparison:l}),[m,c]=L(t==null?void 0:t.in,...l>0?[a,e]:[e,a]),d=Ge(c,m),p=(I(c)-I(m))/1e3,u=Math.round((d-p)/60);let h;if(u<2)return t!=null&&t.includeSeconds?d<5?s.formatDistance("lessThanXSeconds",5,o):d<10?s.formatDistance("lessThanXSeconds",10,o):d<20?s.formatDistance("lessThanXSeconds",20,o):d<40?s.formatDistance("halfAMinute",0,o):d<60?s.formatDistance("lessThanXMinutes",1,o):s.formatDistance("xMinutes",1,o):u===0?s.formatDistance("lessThanXMinutes",1,o):s.formatDistance("xMinutes",u,o);if(u<45)return s.formatDistance("xMinutes",u,o);if(u<90)return s.formatDistance("aboutXHours",1,o);if(u<A){const f=Math.round(u/60);return s.formatDistance("aboutXHours",f,o)}else{if(u<i)return s.formatDistance("xDays",1,o);if(u<C){const f=Math.round(u/A);return s.formatDistance("xDays",f,o)}else if(u<C*2)return h=Math.round(u/C),s.formatDistance("aboutXMonths",h,o)}if(h=qe(c,m),h<12){const f=Math.round(u/C);return s.formatDistance("xMonths",f,o)}else{const f=h%12,M=Math.trunc(h/12);return f<3?s.formatDistance("aboutXYears",M,o):f<9?s.formatDistance("overXYears",M,o):s.formatDistance("almostXYears",M+1,o)}}function We(){const e=le(),{props:a}=ve(e),t=ce(),{props:n}=ge(t);return r.jsxs(ue,{modal:!1,children:[r.jsx(me,{asChild:!0,children:r.jsx(de,{variant:"ghost",className:g("h-6 p-1 text-muted-foreground"),children:r.jsx(fe,{className:"size-4"})})}),r.jsx(xe,{children:r.jsxs(he,{children:[r.jsx(E,{...a,children:"Edit comment"}),r.jsx(E,{...n,children:"Delete comment"})]})})]})}function Je(){const e=pe();return r.jsx(Ce,{className:g(j({variant:"ghost"}),"h-6 p-1 text-muted-foreground"),children:e.isResolved?r.jsx(Te,{className:"size-4"}):r.jsx(be,{className:"size-4"})})}function Qe(){return r.jsxs("div",{className:"my-2 flex flex-col items-end gap-2",children:[r.jsx(je,{className:g(P(),"min-h-[60px]")}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(O.CancelButton,{className:j({size:"xs",variant:"outline"}),children:"Cancel"}),r.jsx(O.SaveButton,{className:j({size:"xs",variant:"default"}),children:"Save"})]})]})}function Ze(){const{comment:e,commentText:a,editingValue:t,isMyComment:n,isReplyComment:s,user:i}=Me();return r.jsxs("div",{children:[r.jsxs("div",{className:"relative flex items-center gap-2",children:[r.jsx(U,{userId:e.userId}),r.jsx("h4",{className:"text-sm font-semibold leading-none",children:i==null?void 0:i.name}),r.jsxs("div",{className:"text-xs leading-none text-muted-foreground",children:[Ke(e.createdAt,Date.now())," ago"]}),n&&r.jsxs("div",{className:"absolute -right-0.5 -top-0.5 flex space-x-1",children:[s?null:r.jsx(Je,{}),r.jsx(We,{})]})]}),r.jsx("div",{className:"mb-4 pl-7 pt-0.5",children:t?r.jsx(Qe,{}):r.jsx("div",{className:"whitespace-pre-wrap text-sm",children:a})})]})}function H({commentId:e}){const{useOption:a}=w(S);return a("commentById",e)?r.jsx(B,{id:e,children:r.jsx(Ze,{})},e):null}function et(){const e=ye(R);return r.jsx(r.Fragment,{children:Object.keys(e).map(a=>r.jsx(H,{commentId:a},a))})}function tt(e){const{disableForm:a}=e,{activeCommentId:t,hasNoComment:n,myUserId:s,ref:i}=Se();return r.jsx(B,{id:t,scope:R,children:r.jsxs("div",{ref:i,className:g(De(),"relative w-[310px]"),children:[!n&&r.jsxs(r.Fragment,{children:[r.jsx(H,{commentId:t},t),r.jsx(et,{})]}),!!s&&!a&&r.jsx($e,{})]})},t)}function lt(){const{activeCommentId:e,loaded:a}=Ne();return!a||!e?null:r.jsx(Q,{children:r.jsx(we,{className:"absolute z-50 w-[418px] pb-4","data-popover":!0,children:r.jsx(tt,{})})})}const at="------ End of Developer's Comments ------",ct=()=>{const e=document.getElementById("editor-content-json"),a=e?e.innerText:"",t="This is editable content.";if(!a)return t;let n;try{n=JSON.parse(a)}catch(i){return console.error("Failed to parse editor content to HTML:",i),t}let s="";return n.title&&(s+=`<b>${n.title}</b>`),n.overview&&(s+=`<p><b>Overview</b><p>${n.overview}</p></p>`),n.advantages&&Array.isArray(n.advantages)&&(s+="<p><b>Advantages</b></p><ul>",n.advantages.forEach(i=>{s+=`<li>${i}</li>`}),s+="</ul>"),n.drawbacks&&Array.isArray(n.drawbacks)&&(s+="<p><b>Drawbacks</b></p><ul>",n.drawbacks.forEach(i=>{s+=`<li>${i}</li>`}),s+="</ul>"),n.conclusion&&(s+=`<p><b>Conclusion</b></p><p>${n.conclusion}</p>`),s+=`<p>${at}</p>`,s};export{lt as C,ot as T,ct as p};
